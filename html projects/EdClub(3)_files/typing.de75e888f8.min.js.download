(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{451:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r,s;var l=a(17);var i=P(l);var o=a(12);var c=P(o);var u=a(18);var d=P(u);var f=a(299);var p=P(f);var h=a(123);var m=a(300);var v=P(m);var _=a(2);var y=P(_);var g=a(298);var b=a(1);var k=P(b);var w=a(5);var E=P(w);var x=a(8);var C=P(x);var N=a(42);var S=P(N);var T=a(20);var O=a(21);var M=P(O);function P(e){return e&&e.__esModule?e:{default:e}}function j(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function L(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function I(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var R=(r=(0,T.translate)(["common"],{wait:true}),r(s=function(e){I(t,e);function t(e){j(this,t);var a=L(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={sound:false,is_playing:false,played_once:false,speed:0,accuracy:100,noText:false};a.render_props=(0,h.get_render_props)(a.props.instant?"instant":"normal");return a}n(t,[{key:"componentDidMount",value:function e(){this.place_typable()}},{key:"componentWillUnmount",value:function e(){if(this.core){clearTimeout(this.core.play_next_timeout_id);this.core.end_lesson()}}},{key:"place_typable",value:function e(){var t=this.props.t;var a=this.props.attempt;var n=this.props.profile;if(a.details.lesson_text){var r=a.lesson.typing;var s=a.details.render_engine=="logographic";var l=this.core=new p.default({lesson_id:a.lesson.id,text:a.details.lesson_text,is_logograms:s,on_error:r.app&&r.app.startsWith("typing.games")?"block":r.on_error,max_secs:r.max_secs,deletable:a.details.deletable,t:t});if(s)this.render_props.logographic=true;this.typable=new h.Typable(this.refs.typable,this.render_props,l,true);this.keepinview=new v.default.KeepInView(this.typable,this.render_props.line_transition,this.props.instant?20:s?2.5:4);this.keyboard_plugin=new v.default.KeyboardPlugin(this.core,this.refs.vkeyboardhand,n.keyboard,true,true,n.keyboard_layout,n.use_hand,false);this.soundfx=new v.default.SoundFX(this.core,this.refs.root,!this.state.sound);l.events.on("stats_update",function(e){if(e.wpm>250)return;this.setState({speed:e.wpm,accuracy:e.accuracy})}.bind(this));l.events.on("progress",function(e){(0,C.default)(this.refs.progress_percent).css({width:e+"%"})}.bind(this));l.events.on("end",function(){this.setState({is_playing:false,played_once:true})}.bind(this));if(this.props.instant)this.core.replay_history(this.props.attempt.details.history,true)}else{this.setState({noText:true})}}},{key:"set_playbackspeed",value:function e(t){this.core.playback_speed=t;this.forceUpdate()}},{key:"set_sound",value:function e(t){this.setState({sound:t});this.soundfx.is_mute=!t}},{key:"play",value:function e(){var t=M.default.profile||this.props.profile;if(!t.is_instructor){var a=this.props.profile.is_basic&&i.default.settings.is_individual_edition;if(a){return(0,g.LaunchStudentPlansModal)(this.play,null,"AttemptPlayback")}}this.setState({is_playing:true});if(this.state.played_once){(0,C.default)(this.refs.typable).empty();this.place_typable()}this.core.replay_history(this.props.attempt.details.history)}},{key:"render",value:function e(){var t=this;var a=k.default.createElement("div",{style:{cursor:"pointer",fontSize:"2em",right:15,top:0,position:"absolute",zIndex:100},onClick:function e(){return M.default.hide_modal("att-playback")}},"Ã—");if(this.state.noText)return k.default.createElement("div",{style:{position:"relative",padding:30,margin:15,textAlign:"right"}},k.default.createElement("h3",{style:{textAlign:"center"}},"This playback is no longer available."),a);var n=this.props.attempt;var r=this.render_props;var s={transform:"scale(0.6)",position:"absolute",top:-80,left:-100};var l=this.core;var i=l&&this.core.stats;var o={field:{fontSize:20,display:"inline-block",marginRight:50},play:{background:"radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0.10) 100%)",color:"#464646",position:"absolute",textAlign:"center",left:0,right:0,fontSize:180,lineHeight:"305px",zIndex:2,textShadow:"0 0 12px #888",cursor:"pointer",marginLeft:-5}};var u={display:"inline-block",width:85,lineHeight:1.6};var d=this.props.t;return k.default.createElement("div",{style:{position:"relative",overflow:"hidden"}},k.default.createElement("div",{style:{minHeight:350},className:"PLYBK TPCMN row",ref:"root"},this.props.instant?k.default.createElement("div",{className:"col-sm-8 span8"},k.default.createElement("div",{className:"tpmodes "+r.display_className+" "+r.size,style:{transform:"scale(.85)"}},k.default.createElement("div",{className:"typable mono_standard",ref:"typable"}))):k.default.createElement("div",{className:"col-sm-8 span8",style:{position:"relative"}},!this.state.is_playing&&k.default.createElement("div",{style:o.play,onClick:this.play.bind(this)},k.default.createElement("i",{className:"icon icon-controller-play icon-play"})," "),k.default.createElement("div",{className:"tpmodes "+r.display_className+" "+r.size,style:{height:330,transform:"scale(.85)"}},k.default.createElement("div",{className:"typable mono_standard",ref:"typable"})),k.default.createElement("div",{id:"progress-bar",style:{margin:"-28px 50px -5px 40px"}},k.default.createElement("div",{ref:"progress_percent",id:"progress-percent"},k.default.createElement("div",{ref:"progress_dot",id:"progress-dot",style:{display:"block"}}))),k.default.createElement("div",{style:{position:"relative",margin:"35px 0 -15px",height:280}},k.default.createElement("div",{ref:"vkeyboardhand",id:"vkeyboardhand",style:s}),i&&k.default.createElement("div",{ref:"row",style:{position:"absolute",top:0,right:20,padding:10,background:"rgba(255,255,255,0.85)"}},d("Speed"),k.default.createElement("div",{style:{fontSize:"2em",marginBottom:10}},Math.round(this.state.speed||0),k.default.createElement("sup",null,k.default.createElement("small",null,d("WPM")))),d("Accuracy"),k.default.createElement("div",{style:{fontSize:"2em"}},this.state.accuracy||100,"%")))),k.default.createElement("div",{className:"col-sm-4 span4 hidden-xs",style:{background:"#f2f2f2",fontSize:"1.1em",height:610,padding:"0 40px 0 25px"}},k.default.createElement("div",{style:{minHeight:260}},k.default.createElement("h2",{style:{maxHeight:140,marginTop:30,overflow:"hidden"}},n.lesson.name),!this.props.instant&&k.default.createElement("div",{style:{paddingTop:10,whiteSpace:"nowrap"}},k.default.createElement("label",null,d("Playback Speed")),k.default.createElement("br",null),k.default.createElement("a",{onClick:function e(){return t.set_playbackspeed(1)},className:(0,y.default)({btn:true,"btn-primary":!l||l.playback_speed==1})},"1X"),k.default.createElement("a",{onClick:function e(){return t.set_playbackspeed(2)},className:(0,y.default)({btn:true,"btn-primary":l&&l.playback_speed==2})},"2X"),k.default.createElement("a",{onClick:function e(){return t.set_playbackspeed(4)},className:(0,y.default)({btn:true,"btn-primary":l&&l.playback_speed==4})},"4X"),k.default.createElement("a",{onClick:function e(){return t.set_playbackspeed(10)},className:(0,y.default)({btn:true,"btn-primary":l&&l.playback_speed==10})},"10X"),k.default.createElement("a",{onClick:function e(){return t.set_playbackspeed(1e3)},className:(0,y.default)({btn:true,"btn-primary":l&&l.playback_speed==1e3})},"Max"),k.default.createElement("br",null),k.default.createElement("br",null),k.default.createElement("label",null,d("Playback Sound")),k.default.createElement("br",null),k.default.createElement("a",{onClick:function e(){return t.set_sound(true)},className:(0,y.default)({btn:true,"btn-primary":this.state.sound})},d("On")),k.default.createElement("a",{onClick:function e(){return t.set_sound(false)},className:(0,y.default)({btn:true,"btn-primary":!this.state.sound})},d("Off")))),k.default.createElement("hr",{style:{borderColor:"#aaa"}}),k.default.createElement("div",null,k.default.createElement("label",{style:u},d("Speed"),":")," ",n.wpm," ",d("WPM")),k.default.createElement("div",null,k.default.createElement("label",{style:u},d("Duration"),":")," ",S.default.utc(n.duration*1e3).format("HH:mm:ss")),k.default.createElement("div",null,k.default.createElement("label",{style:u},d("Accuracy"),":")," ",n.real_accuracy,"%"),k.default.createElement("div",null,k.default.createElement("label",{style:u},d("Points"),":")," ",c.default.intcomma(n.score)),k.default.createElement("div",null,k.default.createElement("label",{style:u},d("Stars"),":")," ",k.default.createElement("img",{src:STATIC_URL+"STARS/"+n.stars+"s5.png"}))),a))}}]);return t}(k.default.Component))||s);function A(e,t,a){M.default.show_modal(k.default.createElement(d.default,{id:"att-playback",width:1e3,padding:0,show_x:false,onClose:function e(){return M.default.events.fire_event("unload")}},k.default.createElement(R,{attempt:t,profile:e,instant:a})))}function z(e,t,a){i.default.get(e,function(e){if(t.is_instructor){i.default.get(e.student,function(t){A(t,e,a)})}else{A(t,e,a)}})}e.exports=z},470:function(e,t,a){Object.defineProperty(t,"__esModule",{value:true});var n=a(977);var r=p(n);var s=a(978);var l=p(s);var i=a(979);var o=p(i);var c=a(980);var u=p(c);var d=a(982);var f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}t.default={instruction:r.default,classic_typing_app:l.default,videotyping_app:o.default,result_page:u.default,junior_result_page:f.default}},954:function(e,t,a){var n={me:"/sportal/me.json",typing_settings:"/sportal/settings.json",update_typing_settings:"/sportal/update_settings",lessonplan:STATIC_URL+"build/data/program.json",progress:STATIC_URL+"build/data/progress.json"};e.exports=n},957:function(e,t,a){Object.defineProperty(t,"__esModule",{value:true});t.themes=t.SettingsContainer=undefined;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a){if(Object.prototype.hasOwnProperty.call(a,n)){e[n]=a[n]}}}return e};var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var s,l;var i=a(1);var o=w(i);var c=a(8);var u=w(c);var d=a(954);var f=w(d);var p=a(12);var h=w(p);var m=a(17);var v=w(m);var _=a(298);var y=a(124);var g=w(y);var b=a(958);var k=a(20);function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t,a){if(t in e){Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true})}else{e[t]=a}return e}function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function N(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var S=t.SettingsContainer=(s=(0,k.translate)(["common"],{wait:true}),s(l=function(e){N(t,e);function t(){var e;var a,n,r;x(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={loaded:false,activeItem:-1,keyboards:null,lang_keyboard_map:null,sound:false,settingsNotification:false},a),C(n,r)}r(t,[{key:"toggleItem",value:function e(t){var a=this;if(!this.state.loaded){(0,b.get_keyboards)(function(e,n){return a.setState({loaded:true,keyboards:e,lang_keyboard_map:n,activeItem:t})})}else{var n=this.state.activeItem==t?-1:t;if(this.props.onPopup)this.props.onPopup(n!=-1);this.setState({activeItem:n})}if(t==-1&&!this.props.core.capturing){this.props.core.attach_capture()}}},{key:"componentDidMount",value:function e(){var t=this;this.outsideClickHandler=function(e){if(t.state.activeItem==-1)return;if((0,u.default)(t.refs.root).has(e.target).length===0)t.toggleItem(-1)};this.keyUpHandler=function(e){if(t.state.activeItem==-1)return;var a=e.which||e.keyCode;if(a&&a==27){if((0,u.default)(t.refs.root).has(e.target).length===0)t.toggleItem(-1)}};window.addEventListener("click",this.outsideClickHandler);window.addEventListener("keyup",this.keyUpHandler)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.outsideClickHandler);window.removeEventListener("keyup",this.keyUpHandler)}},{key:"apply_setting_param",value:function e(t,a){var n=this;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(r)v.default.updateProfile(E({},t,a),function(){if(n.props.on_instruction)approuter.refresh()},null);if(!this.props.on_instruction){this.props.profile[t]=a;this.props.apply_settings();this.forceUpdate()}}},{key:"apply_setting_param_paid_feature",value:function e(t,a){if(!window.is_tp||!this.props.profile.is_basic)return this.apply_setting_param(t,a);var n=this.props.profile[t];this.apply_setting_param(t,a,false);var r=this.props.core;r.detach_capture();(0,_.LaunchStudentPlansModal)(function(){this.apply_setting_param(t,a,true);r.attach_capture()}.bind(this),function(){this.apply_setting_param(t,n,false);r.attach_capture()}.bind(this),"SettingsApp")}},{key:"render",value:function e(){var t=this;var a=this.state.loaded;var r=approuter.get_teamsettings();var s=this.props,l=s.on_instruction,i=s.core;var c={apply_setting_param:this.apply_setting_param.bind(this),apply_setting_param_paid_feature:this.apply_setting_param_paid_feature.bind(this),profile:this.props.profile.getDerivedProfile(),allow_font_change:!i.is_logograms,teamsettings:r};var u=!r.lock_keyboard_guide||!r.lock_themes;var d=!r.lock_hands_guide||r.hands_guide&&!r.lock_use_hand||r.use_hand;var f=!r.lock_keyboard_sfx||!r.lock_voicefx||r.voicefx!="OFF";var p=!r.lock_themes||!r.lock_font_face;return o.default.createElement("div",{ref:"root",style:{display:"inline-block"}},u&&o.default.createElement(T,{icon:"keyboard",label:"Keyboard settings",tabindex:"20",panel:a&&o.default.createElement(O,n({keyboards:this.state.keyboards,lang_keyboard_map:this.state.lang_keyboard_map},c)),onClick:function e(a){t.toggleItem(0)},active:this.state.activeItem==0}),!l&&d&&o.default.createElement(T,{icon:"hand",panel:a&&o.default.createElement(M,c),label:"Hand Guide",tabindex:"40",onClick:function e(){return t.toggleItem(1)},active:this.state.activeItem==1}),f&&o.default.createElement(T,{icon:"sound2",panel:a&&o.default.createElement(P,c),label:"Sound settings",tabindex:"60",onClick:function e(){return t.toggleItem(2)},active:this.state.activeItem==2}),!l&&p&&o.default.createElement(T,{icon:"theme",panel:a&&o.default.createElement(L,c),label:"Themes",tabindex:"80",onClick:function e(){return t.toggleItem(3)},active:this.state.activeItem==3}),!l&&o.default.createElement(T,{icon:"settings",panel:a&&o.default.createElement(I,{profile:c.profile,teamsettings:r,notification:this.state.settingsNotification,apply_setting_param:function e(a,n,r){t.state.settingsNotification=r;t.apply_setting_param(a,n)}}),label:"Settings",tabindex:"100",notification:this.state.settingsNotification,onClick:function e(){return t.toggleItem(4)},active:this.state.activeItem==4}))}}]);return t}(o.default.Component))||l);var T=function e(t){var a=t.active,n=t.icon,r=t.onClick,s=t.panel,l=t.label,i=t.tabindex,c=t.notification;return o.default.createElement("div",{className:"header-item"+(a?" active":"")+(c?" notification":"")},o.default.createElement("span",{className:"edicon-"+n,onClick:r,onKeyUp:function e(t){if(t.keyCode==g.default.enter)r()},"aria-haspopup":"true","aria-expanded":a,"aria-controls":"collapsible-"+i,"aria-label":l,tabIndex:i,role:"menu"}),o.default.createElement("div",{id:"collapsible-"+i,"aria-hidden":!a,className:"dropdown-panel"},s))};var O=(0,k.translate)(["common"],{wait:false})(function(e){var t=e.apply_setting_param,a=e.profile,n=e.keyboards,r=e.lang_keyboard_map,s=e.t,l=e.teamsettings;var i=a.keyboard.split(",")[0];var c=r[i].keyboards;var u=[{value:0,name:s("Standard"),img:"Standard"},{value:4,name:s("Glass"),img:"Glass"},{value:1,name:s("Wobbly"),img:"Wobbly"},{value:5,name:s("Cartoon"),img:"Cartoon"},{value:6,name:s("Marble"),img:"Marble"},{value:2,name:s("Classic"),img:"Classic"},{value:3,name:s("Modern"),img:"Modern"}];var d=c.filter(function(e){return a.keyboard==e.slug})[0];var f=(d||{name:a.keyboard}).name;return o.default.createElement("div",{className:"settings-panel"},!l.lock_keyboard_guide&&o.default.createElement(R,{label:s("Keyboard Guide"),tabindex:"21",value:a.show_keyboard||false,onChange:function e(){return t("show_keyboard",!a.show_keyboard)}}),a.show_keyboard?o.default.createElement("div",null,!l.lock_keyboard&&o.default.createElement("div",null,!l.lock_keyboard_guide&&o.default.createElement("hr",null),o.default.createElement("span",{className:"selected-layout selectable",onClick:function e(){return(0,b.show_keyboard_assist)({profile:a,keyboards:n,lang_keyboard_map:r,layout_choices:c,apply_setting_param:t,schema_name:f})}},o.default.createElement("span",{className:"edicon-layout-keyboard-icon"})," ",f),o.default.createElement("span",{className:"inline-settings-label"},s("Keyboard Layout"))),!l.lock_themes&&!d.standard_theme&&o.default.createElement("div",null,o.default.createElement("hr",null),o.default.createElement("div",{className:"kb-styles"},u.map(function(e){return o.default.createElement("div",{key:e.value,className:"selectable "+(a.keyboard_layout==e.value?"selected":""),onClick:function a(){return t("keyboard_layout",e.value)}},o.default.createElement("img",{src:STATIC_URL+("engine/img/settings/kb-styles/"+e.img.toLowerCase()+".png")}),e.name)})))):null)});var M=(0,k.translate)(["common"],{wait:false})(function(e){var t=e.apply_setting_param,a=e.profile,n=e.t,r=e.teamsettings;return o.default.createElement("div",{className:"settings-panel"},!r.lock_hands_guide&&o.default.createElement(R,{label:n("Hand Guide"),tabindex:"41",value:a.show_hand||false,onChange:function e(){return t("show_hand",!a.show_hand)}}),a.show_hand&&(!r.lock_use_hand||r.use_hand)&&o.default.createElement("div",null,!r.lock_hands_guide&&o.default.createElement("hr",null),!r.lock_use_hand&&o.default.createElement("div",{className:"kb-hands"},o.default.createElement("div",{className:"selectable "+(a.use_hand?"":"selected"),onClick:function e(){return t("use_hand",null)}},o.default.createElement("span",{className:"edicon-both-hands"}),n("Both Hands")),o.default.createElement("div",{className:"selectable "+(a.use_hand=="left"?"selected":""),onClick:function e(){return t("use_hand","left")}},o.default.createElement("span",{className:"edicon-left-hand"}),n("Left Hand")),o.default.createElement("div",{className:"selectable "+(a.use_hand=="right"?"selected":""),onClick:function e(){return t("use_hand","right")}},o.default.createElement("span",{className:"edicon-right-hand"}),n("Right Hand"))),a.use_hand?o.default.createElement("div",{className:"sticky-keys-alert"},o.default.createElement("i",{className:"edicon-notice"})," ",n("Make sure Sticky Keys are turned on."),o.default.createElement("small",null," ",o.default.createElement("a",{target:"_blank",href:h.default.sticky_key_instruction_link()},n("Learn more"),"..."))):null))});var P=(0,k.translate)(["common"],{wait:false})(function(e){var t=e.apply_setting_param,a=e.profile,n=e.t,r=e.teamsettings;var s;var l=[];var i=[];if(h.default.speech_support){var c=a.language.split("_"[0]);s=speechSynthesis.getVoices();var u=s[0];var d=true;var f=false;var p=undefined;try{for(var m=s[Symbol.iterator](),v;!(d=(v=m.next()).done);d=true){var _=v.value;if(_.voiceURI==a.voice_name){u=_}if(_.lang.split("-")[0]==c)l.push(_);else i.push(_)}}catch(e){f=true;p=e}finally{try{if(!d&&m.return){m.return()}}finally{if(f){throw p}}}}function y(e,n,r){a[e]=n;t(e,n);if(h.default.speech_support)g(r)}function g(e,t){speechSynthesis.cancel();var n=new SpeechSynthesisUtterance;n.voice=t||h.default.get_voice(a.voice_name);var r=function e(t){return(t||100)/100};n.volume=r(a.voice_volume);n.rate=r(a.voice_rate);n.pitch=r(a.voice_pitch);n.text=e;speechSynthesis.speak(n)}var b=a.voicefx.match(/WORDS|CHARS|FULL/)!=null;var k=a.voicefx.match(/FULL|CHARS/)!=null;var w=a.voicefx=="FULL";var E=function e(a){return o.default.createElement("span",{key:a.voiceURI,className:"selectable "+(u==a?"selected":""),onClick:function e(){return t("voice_name",a.voiceURI)},onMouseOver:function e(){return g("1 2 3 "+a.name,a)}},a.name," (",a.lang,")")};return o.default.createElement("div",{className:"settings-panel"},!r.lock_keyboard_sfx&&o.default.createElement(R,{label:n("Keyboard Sound"),tabindex:"61",value:a.keyboard_sfx||false,onChange:function e(){return t("keyboard_sfx",!a.keyboard_sfx)}}),h.default.speech_support&&u&&(!r.lock_voicefx||r.voicefx!="OFF")&&o.default.createElement("div",null,!r.lock_keyboard_sfx&&o.default.createElement("hr",null),!r.lock_voicefx&&o.default.createElement(R,{label:n("Voice Over"),tabindex:"62",value:a.voicefx!="OFF",onChange:function e(){return t("voicefx",a.voicefx=="OFF"?"WORDS":"OFF")}}),a.voicefx!="OFF"?o.default.createElement("div",null,!r.lock_voicefx&&o.default.createElement("hr",null),o.default.createElement("div",{className:"option-block"},o.default.createElement(z,{value:u.name+" ("+u.lang+")",className:"dropdown_panel",style:{float:"right"}},l.length>0?l.map(E):null,l.length>0&&o.default.createElement("hr",{style:{margin:5}}),i.map(E)),o.default.createElement("span",{className:"inline-settings-label"},n("Voice Narrator"))),!r.lock_voicefx&&o.default.createElement(R,{style:{marginTop:17},tabindex:"63",label:n("Read Letters"),value:k,onChange:function e(){return t("voicefx",k?"WORDS":"CHARS")}}),!a.use_hand&&!r.lock_voicefx&&o.default.createElement(R,{style:{marginTop:17},tabindex:"64",label:n("Fully Guided"),value:w,onChange:function e(){return t("voicefx",w?"CHARS":"FULL")}}),o.default.createElement("hr",null),o.default.createElement("div",{className:"option-block"},o.default.createElement(U,{min:"10",max:"100",step:"15",labels:[n("Low"),n("Normal"),n("High")],value:a.voice_volume||100,onChange:function e(t){return y("voice_volume",t,"1 2 3")},style:{float:"right"}}),o.default.createElement("span",{className:"inline-settings-label"},n("Volume"))),!window.cordova&&!window.RNGSpeech?o.default.createElement("span",null,o.default.createElement("div",{className:"option-block"},o.default.createElement(U,{min:"50",max:"200",step:"25",labels:["0.5X","1X","1.5X","2X"],value:a.voice_rate||100,onChange:function e(t){return y("voice_rate",t,"1 2 3")},style:{float:"right"}}),o.default.createElement("span",{className:"inline-settings-label"},n("Speech Rate"))),o.default.createElement("div",{className:"option-block"},o.default.createElement(U,{min:"20",max:"180",step:"20",labels:[n("Low"),n("Normal"),n("High")],value:a.voice_pitch||100,onChange:function e(t){return y("voice_pitch",t,"1 2 3")},style:{float:"right"}}),o.default.createElement("span",{className:"inline-settings-label"},n("Pitch")))):null):null))});var j=t.themes=[{value:"yellow-taxi",img:"taxi.png",name:"Yellow taxi",is_paid:false},{value:"squirrel",img:"squirrel.png",name:"Squirrel & coffee",is_paid:false},{value:"eddie",img:"eddie.png",name:"Eddie's Adventure",is_paid:false},{value:"early-birds",img:"bird.png",name:"Early birds",is_paid:false},{value:"penguin-land",img:"penguin.png",name:"Penguin land",is_paid:false},{value:"kingfish",img:"kingfish.png",name:"kingfish",is_paid:true},{value:"robot",img:"robot.png",name:"robot",is_paid:true},{value:"dark",img:"night-sky.png",name:"Night Sky",is_paid:false},{value:"codder",img:"codder.png",name:"Codder",is_paid:false},{value:null,img:"classic.png",name:"Classic",is_paid:false},{value:"blue",img:"morning-blue.png",name:"Morning Blue",is_paid:false},{value:"bees",img:"bees.png",name:"Dogs and Bees",is_paid:false}];var L=(0,k.translate)(["common"],{wait:false})(function(e){var t=e.apply_setting_param,a=e.apply_setting_param_paid_feature,n=e.profile,r=e.t,s=e.allow_font_change,l=e.teamsettings;var i=[{value:"small",name:r("Small"),fontSize:16},{value:"med",name:r("Normal"),fontSize:20},{value:"large",name:r("Large"),fontSize:24},{value:"xlarge",name:r("Very Large"),fontSize:28}];var c="Droid Sans Mono";var u=["Amarante","Anonymous Pro","Aref Ruqaa","Cagliostro","Cantata One","Comfortaa","Cutive Mono","Fredericka the Great","Fredoka One","Gloria Hallelujah","Gruppo","Happy Monkey","Imprima","Inder","Limelight","Mitr","Monoton","Montserrat Alternates","Mystery Quest","Nova Mono","OpenDyslexic","Patrick Hand","Paytone One","Primary Penmanship","Questrial","Raleway","Ravi Prakash","Reem Kufi","Righteous","Rufina","Sarpanch","Share Tech Mono","Slackey","Source Code Pro","Space Mono","Ubuntu Mono","Vast Shadow","Wallpoet"];u.unshift(c);return o.default.createElement("div",{className:"settings-panel"},!l.lock_font_face&&o.default.createElement("div",null,o.default.createElement("div",{className:"text-sizes"},i.map(function(e){return o.default.createElement("div",{key:e.value,className:"selectable "+(n.font_size==e.value?"selected":""),onClick:function a(){return t("font_size",e.value)}},o.default.createElement("div",{style:{fontSize:e.fontSize}},"A"),e.name)})),o.default.createElement("hr",null),o.default.createElement(R,{label:r("Extra Large (Accessible)"),value:n.font_size=="xxlarge"||false,onChange:function e(){return t("font_size",n.font_size=="xxlarge"?"med":"xxlarge")}}),s&&o.default.createElement("div",null,o.default.createElement("hr",null),o.default.createElement("div",{className:"option-block clearfix"},o.default.createElement(z,{value:""+(n.font_face||c),className:"dropdown_panel",style:{float:"right"}},u.map(function(e){return o.default.createElement("span",{key:e,className:"selectable "+((n.font_face||c)==e?"selected":""),onClick:function a(){return t("font_face",e==c?null:e)}},e)})),o.default.createElement("span",{className:"inline-settings-label"},r("Font Face"))))),!l.lock_themes&&o.default.createElement("div",null,o.default.createElement("hr",null),o.default.createElement("div",{className:"themes"},j.map(function(e){return o.default.createElement("img",{key:e.value,className:"selectable "+(n.typing_theme==e.value?"selected":""),onClick:function n(){return(e.is_paid?a:t)("typing_theme",e.value)},src:STATIC_URL+"engine/img/settings/"+e.img})}))))});var I=(0,k.translate)(["common"],{wait:false})(function(e){var t=e.apply_setting_param,a=e.profile,n=e.t,r=e.teamsettings,s=e.notification;return o.default.createElement("div",{className:"settings-panel"},o.default.createElement(R,{label:n("Show live WPM and accuracy"),value:a.show_live_stats||false,onChange:function e(){return t("show_live_stats",!a.show_live_stats)}}),o.default.createElement("hr",null),o.default.createElement(R,{label:n("Show speed on each word"),value:a.show_live_extras||false,onChange:function e(){return t("show_live_extras",!a.show_live_extras)}}),!r.lock_block_on_errors&&o.default.createElement("div",null,o.default.createElement("hr",null),o.default.createElement(R,{label:n("Block on error(s)"),with_note:s,value:a.block_on_errors||0,onChange:function e(){return t("block_on_errors",a.block_on_errors?null:2,true)}}),a.block_on_errors&&o.default.createElement("div",{className:"kb-hands"},o.default.createElement("div",{className:"selectable "+(a.block_on_errors==1?"selected":""),onClick:function e(){return t("block_on_errors",1,true)}},o.default.createElement("span",null,n("1st"))),o.default.createElement("div",{className:"selectable "+(a.block_on_errors==2?"selected":""),onClick:function e(){return t("block_on_errors",2,true)}},o.default.createElement("span",null,n("2nd"))),o.default.createElement("div",{className:"selectable "+(a.block_on_errors==3?"selected":""),onClick:function e(){return t("block_on_errors",3,true)}},o.default.createElement("span",null,n("3rd")))),s&&o.default.createElement("div",{className:"sticky-keys-alert"},n("These changes will take effect on lesson restart."))))});var R=function(e){N(t,e);function t(){var e;var a,n,r;x(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={value:n.props.value},a),C(n,r)}r(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"onTouchStart",value:function e(){this.onClick();this.touchStart=true}},{key:"onClick",value:function e(){if(this.touchStart){this.touchStart=false;return}var t=!this.refs.checkbox.checked;this.setState({value:t});this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"render",value:function e(){var t=this;return o.default.createElement("div",{role:"checkbox","aria-checked":this.state.value,tabIndex:this.props.tabindex||1e3,style:this.props.style||{},onKeyUp:function e(a){if(a.keyCode==13)t.onClick(a)},"aria-labelledby":"chk_"+this.props.label.replace(" ","_")+(this.props.tabindex||1e3),onTouchStart:this.onTouchStart.bind(this),onMouseDown:this.onClick.bind(this)},o.default.createElement("span",{id:"chk_"+this.props.label.replace(" ","_")+(this.props.tabindex||1e3),style:{display:"inline-block",minWidth:300,fontWeight:400,fontSize:17}},this.props.label,this.props.with_note&&o.default.createElement("b",{style:{padding:5,color:"red"}},"*")),o.default.createElement("input",{ref:"checkbox","aria-label":this.props.label,className:"flip-switch",type:"checkbox",checked:this.state.value,onChange:function e(){}}),o.default.createElement("div",null,o.default.createElement("i",null)))}}]);return t}(o.default.Component);var A=function(e){N(t,e);function t(){x(this,t);return C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}r(t,[{key:"onClick",value:function e(t){var a=this.props,n=a.min,r=a.max,s=a.step;var l=(r-n)/s;var i=this.refs.toucharea.getBoundingClientRect();var o=(t.pageX-i.left)*(r-n)/i.width;o=Math.round(o/s)*s+parseInt(n);o=o<n?n:o>r?r:o;if(o!=this.props.value){this.props.onChange(o)}}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.min,r=a.max,s=a.value;return o.default.createElement("div",{className:"custom-range-input"},o.default.createElement("div",{className:"lower-track",style:{width:(s-n)/(r-n)*100+"%"}}),o.default.createElement("div",{className:"thumb-track"},o.default.createElement("div",null,o.default.createElement("div",{className:"thumb",style:{left:(s-n)/(r-n)*100+"%"}}),o.default.createElement("i",{className:"hotspot",ref:"toucharea",onTouchMove:function e(a){t.onClick(a.nativeEvent.touches[0])},onClick:function e(a){return t.onClick(a.nativeEvent)},onMouseMove:function e(a){return(a.buttons&1||a.buttons===undefined&&a.nativeEvent.which==1)&&t.onClick(a.nativeEvent)}}))))}}]);return t}(o.default.Component);var z=function(e){N(t,e);function t(e){x(this,t);var a=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={open:false};a.close=a.close.bind(a);return a}r(t,[{key:"close",value:function e(t){t.preventDefault();t.stopPropagation();this.setState({open:false});window.removeEventListener("click",this.close)}},{key:"toggle_open",value:function e(t){if(!this.state.open){window.addEventListener("click",this.close)}this.setState({open:!this.state.open});t.preventDefault();t.stopPropagation()}},{key:"dropdown_body_clicked",value:function e(t){if(t.target&&t.target.classList&&t.target.classList.contains("selectable")){this.setState({open:false});window.removeEventListener("click",this.close)}t.preventDefault();t.stopPropagation()}},{key:"render",value:function e(){return o.default.createElement("span",{className:"dropdown",style:this.props.style||{}},o.default.createElement("label",{style:{display:"inline-block",minWidth:184,textAlign:"left",marginBottom:3},"data-toggle":"dropdown",onClick:this.toggle_open.bind(this)},o.default.createElement("span",{className:"caret",style:{float:"right",margin:"9px 4px 0 0"}}),this.props.value),this.state.open&&o.default.createElement("div",{className:"dropdown-menu "+(this.props.className||""),onClick:this.dropdown_body_clicked.bind(this)},this.props.children))}}]);return t}(o.default.Component);var U=function(e){N(t,e);function t(){var e;var a,n,r;x(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={value:n.props.value},a),C(n,r)}r(t,[{key:"delayOnChange",value:function e(t){var a=this;if(this.onChangeTimeout)clearTimeout(this.onChangeTimeout);this.setState({value:t});this.onChangeTimeout=setTimeout(function(){return a.props.onChange(t)},400)}},{key:"render",value:function e(){var t=this.props,a=t.min,n=t.max,r=t.step,s=t.value,l=t.labels;var i=l.length>1&&100/(l.length-1);return o.default.createElement("div",{className:"slider",style:this.props.style||{}},o.default.createElement(A,{min:a,max:n,step:r,onChange:this.delayOnChange.bind(this),value:this.state.value}),l&&l.length>1&&o.default.createElement("div",{className:"labels"},l.map(function(e,t){return o.default.createElement("span",{key:t,style:{left:t*i+"%"}},e)})))}}]);return t}(o.default.Component)},958:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r,s;var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=a(18);var o=m(i);var c=a(1);var u=m(c);var d=a(20);var f=a(8);var p=m(f);var h=a(209);function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=function e(t){var a=t.schema,n=t.with_keys,r=t.selected,s=t.onClick;var i;var o=function e(t){if((typeof t==="undefined"?"undefined":l(t))=="object")return t&&t[0]&&(t[0].o||a.terminators[t[0]["->"]])||"";else return t};var c=a.keymap[" "],d=a.keymap["shift"];var f={quote:o(c[2][10]),double_quote:o(d[2][10]),open_square:o(c[1][10]),close_square:o(c[1][11]),open_curly:o(d[1][10]),close_curly:o(d[1][11]),backslash:o(c[1][12]),pipe:o(d[1][12]),enter:a.labels&&a.labels.enter||"enter"};if(a.layout=="iso"){i=u.default.createElement("g",null,u.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),u.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),u.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),u.default.createElement("path",{className:"backslash",d:"M634.8,141.4c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3v-35.2c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V141.4z"}),u.default.createElement("path",{className:"path-enter active",d:"M668.9,141.4c0,1.6-1.3,3-3,3h-25.3c-1.7,0-3-1.4-3-3v-36.1c0-2.6-2.1-4.7-4.7-4.7h-5.6c-1.7,0-3-1.3-3-3V62.3c0-1.7,1.3-3,3-3h38.5c1.7,0,3.1,1.4,3.1,3V141.4z"}),u.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 138.7126)"},f.double_quote),u.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 120.3762)"},f.quote),u.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},f.open_square),u.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.877)"},f.open_curly),u.default.createElement("text",{transform:"matrix(1 0 0 1 598.7656 94.426)"},f.close_square),u.default.createElement("text",{transform:"matrix(1 0 0 1 598.3442 74.7849)"},f.close_curly),u.default.createElement("text",{transform:"matrix(1 0 0 1 610.4075 140.6807)"},f.backslash),u.default.createElement("text",{transform:"matrix(1 0 0 1 610.5442 118.677)"},f.pipe),u.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 631.6479 72.5581)"},f.enter))}else{i=u.default.createElement("g",null,u.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),u.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),u.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),u.default.createElement("path",{className:"backslash",d:"M668.8,97.6c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3V62.4c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V97.6z"}),u.default.createElement("path",{className:"path-enter",d:"M668.8,141.5c0,1.6-1.3,3-3,3h-72.9c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h72.9c1.7,0,3,1.3,3,3V141.5z"}),u.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 138.7127)"},f.double_quote),u.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 120.3763)"},f.quote),u.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},f.open_square),u.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.8769)"},f.open_curly),u.default.createElement("text",{transform:"matrix(1 0 0 1 598.7657 94.426)"},f.close_square),u.default.createElement("text",{transform:"matrix(1 0 0 1 598.3443 74.7849)"},f.close_curly),u.default.createElement("text",{transform:"matrix(1 0 0 1 644.3574 96.8807)"},f.backslash),u.default.createElement("text",{transform:"matrix(1 0 0 1 644.4941 74.8769)"},f.pipe),u.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 636.3144 137.7128)"},f.enter))}return u.default.createElement("svg",{className:"sample-layout"+(r?" selected":"")+(n?" with-keys":""),viewBox:"515 50 180 105",onClick:s},i)};var b=(r=(0,d.translate)(["common"],{wait:true}),r(s=function(e){y(t,e);function t(){var e;var a,n,r;v(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.prev_pages=[],n.state={page:0,selected_schema_slug:n.props.profile.keyboard,selected_schema_name:n.props.schema_name,selected_lang:n.props.profile.keyboard.split(",")[0],layout_choices:n.props.layout_choices,enter_shape:null},a),_(n,r)}n(t,[{key:"go_next",value:function e(){var t=this.state,a=t.page,n=t.enter_shape,r=t.layout_choices;if(a==1){this.set_language_keyboard(this.state.selected_lang)}else{this.prev_pages.push(a);if(a==0)this.setState({page:1});else if(a==2){var s=r.filter(function(e){return e.schema.layout==n});if(s.length==1)this.set_schema(s[0],true);else this.setState({page:3})}else this.setState({page:4})}}},{key:"set_enter_shape",value:function e(t){this.state.enter_shape=t;this.go_next()}},{key:"set_schema",value:function e(t){this.setState({page:4,selected_schema_name:t.name,selected_schema_slug:t.slug})}},{key:"set_language_keyboard",value:function e(t){var a=this;var n=this.props.keyboards.filter(function(e){return e.code==t})[0].keyboards;this.setState({layout_choices:n});var r=[];var s=true;var l=false;var i=undefined;try{var o=function e(){var t=u.value;if(!t.schema)r.push(new Promise(function(e,a){p.default.ajax({url:STATIC_URL+"engine/keyboards/schema/"+t.slug+".json",dataType:"json",success:function a(n){t.schema=n;e()},error:a})}))};for(var c=n[Symbol.iterator](),u;!(s=(u=c.next()).done);s=true){o()}}catch(e){l=true;i=e}finally{try{if(!s&&c.return){c.return()}}finally{if(l){throw i}}}Promise.all(r).then(function(){a.prev_pages.push(a.state.page);var e,t;var r=true;var s=false;var l=undefined;try{for(var i=n[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var c=o.value;if(!c.schema.layout||c.schema.layout=="ansi")t=c.schema;else if(c.schema.layout=="iso")e=c.schema}}catch(e){s=true;l=e}finally{try{if(!r&&i.return){i.return()}}finally{if(s){throw l}}}if(e&&t){a.setState({page:2,iso_kb:e,ansi_kb:t})}else{if(n.length==1)a.set_schema(n[0]);else a.setState({page:3})}})}},{key:"componentWillUpdate",value:function e(t,a){if(a.page==4){this.vkeyboard.style.display="block";if(a.selected_schema_slug!=this.state.selected_schema_slug||!this.kb){this.kb=new h.Keyboard(this.vkeyboard,a.selected_schema_slug,true,false)}}else this.vkeyboard.style.display="none"}},{key:"componentDidUpdate",value:function e(){if(this.state.page==1){(0,p.default)(".languages").scrollTop(1).scrollTop(0);var t=(0,p.default)(".languages .selectable.selected")[0];if(t)t.scrollIntoView()}}},{key:"componentWillUnmount",value:function e(){this.bk&&this.kb.release()}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.t,r=a.keyboards,s=a.apply_setting_param,l=a.change_language_keyboard;var i=this.state,o=i.page,c=i.selected_schema_slug,d=i.selected_lang,f=i.layout_choices,p=i.enter_shape;var h;if(o==0)h=u.default.createElement("div",null,u.default.createElement("span",{className:"inline-settings-label"},n("Layouts")),u.default.createElement("div",{className:"layouts",style:{marginTop:12}},f.map(function(e){return u.default.createElement("span",{key:e.slug,className:"selectable "+(c==e.slug?"selected":""),onClick:function a(){s("keyboard",e.slug);t.setState({selected_schema_slug:e.slug})}},u.default.createElement("span",{className:"edicon-layout-keyboard-icon"}),e.name)})));if(o==1)h=u.default.createElement("div",null,u.default.createElement("span",{className:"inline-settings-label"},n("Language")),u.default.createElement("div",{className:"languages"},r.map(function(e){return u.default.createElement("span",{key:e.code,style:{pointerEvents:"initial"},className:"selectable "+(d==e.code?"selected":""),onClick:function a(){t.state.selected_lang=e.code;t.go_next()}},e.name," ",u.default.createElement("br",null),u.default.createElement("small",null,e.nativeName))})));if(o==2)h=u.default.createElement("div",null,u.default.createElement("span",{dangerouslySetInnerHTML:{__html:n("What does the <b>enter key</b> on your keyboard look like?")}}),u.default.createElement("div",{style:{paddingTop:20,textAlign:"center"}},u.default.createElement(g,{selected:p=="ansi",onClick:function e(){return t.set_enter_shape("ansi")},schema:this.state.ansi_kb}),u.default.createElement("hr",{className:"divider",style:{height:130}}),u.default.createElement(g,{selected:p=="iso",onClick:function e(){return t.set_enter_shape("iso")},iso:true,schema:this.state.iso_kb})));if(o==3){var m=f;if(p)m=f.filter(function(e){return e.schema.layout==p});h=u.default.createElement("div",null,u.default.createElement("span",{dangerouslySetInnerHTML:{__html:n("Which of the following options match the <b>keys around</b> the <b>enter key</b> on your keyboard?")}}),u.default.createElement("div",{style:{paddingTop:20,textAlign:m.length>2?"left":"center"}},m.map(function(e,a){return u.default.createElement("span",{style:{display:"inline-block",verticalAlign:"top",width:181},key:a},a%3?u.default.createElement("hr",{className:"divider"}):null,u.default.createElement(g,{selected:e.slug==c,onClick:function a(){t.prev_pages.push(o);t.set_schema(e)},schema:e.schema,with_keys:true}),u.default.createElement("div",{style:{marginBottom:10,textAlign:"center",padding:"0 10px"}},e.name))})))}if(o==4)h=u.default.createElement("div",null,u.default.createElement("span",null,n("Based on the information you provided, your keyboard is {{name}}",{name:""}),u.default.createElement("span",{className:"highlighted"},this.state.selected_schema_name),"."));return u.default.createElement("div",null,u.default.createElement("div",{style:{fontWeight:500,margin:-25,padding:"15px 25px",borderBottom:"solid 1px #ddd"}},n("Identify Keyboard Layout")),u.default.createElement("div",{className:"settings-panel",style:{padding:"50px 0"}},h,u.default.createElement("div",{style:{margin:"10px 30px -70px",transform:"scale(0.7)",transformOrigin:"0 0"},ref:function e(a){return t.vkeyboard=a}})),u.default.createElement("div",{style:{margin:-25,padding:"15px 20px",fontSize:17,borderTop:"solid 1px #ddd"}},this.prev_pages.length?u.default.createElement("button",{className:"btn btn-sm btn-link",onClick:function e(){return t.setState({page:t.prev_pages.pop()})}},u.default.createElement("span",{className:"icon icon-chevron-left"}),n(" Back")):null,o>0&&o<4?u.default.createElement("button",{className:"btn btn-primary",style:{float:"right",marginLeft:15},onClick:function e(){return t.go_next()}},n("Next")):u.default.createElement("button",{className:"btn "+(o==0?"btn-default":"btn-primary"),style:{float:"right",marginLeft:15},onClick:function e(){if(o==4)t.props.apply_setting_param("keyboard",c);approuter.hide_modal("keyboard-assist")}},n("Done")),o==0&&u.default.createElement("button",{style:{float:"right"},className:"btn btn-primary",onClick:function e(){return t.go_next()}},n("Help me identify my layout"))))}}]);return t}(u.default.Component))||s);function k(e){approuter.show_modal(u.default.createElement(o.default,{id:"keyboard-assist",width:550,padding:25,className:"keyboard-assist-modal"},u.default.createElement(b,e)))}function w(e){p.default.getJSON(STATIC_URL+"engine/keyboards/keyboards.json",function(t){var a={};for(var n=0,r=t.length;n<r;n++){a[t[n]["code"]]=t[n]}e(t,a)})}e.exports={show_keyboard_assist:k,get_keyboards:w}},977:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r,s;var l=a(209);var i=a(20);var o=a(1);var c=O(o);var u=a(2);var d=O(u);var f=a(8);var p=O(f);var h=a(77);var m=O(h);var v=a(210);var _=O(v);var y=a(12);var g=O(y);var b=a(21);var k=O(b);var w=a(299);var E=O(w);var x=a(300);var C=O(x);var N=a(124);var S=O(N);var T=a(957);function O(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function j(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function L(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,s){try{var l=t[r](s);var i=l.value}catch(e){a(e);return}if(l.done){e(i)}else{return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function I(e){this.core=e.core;this.core.events.on("keydown",this.on_press.bind(this));this.use_hand=e.use_hand;this.on_close=e.on_close;this.keyboard=e.keyboard;this.keyboard_layout=e.keyboard_layout;this.initialize();this.maybe_audio_play();this.in_transition=false}I.prototype.go_next=function(){this.maybe_audio_stop();(0,p.default)(".step.active").removeClass("active").addClass("done").next().addClass("active");this.maybe_close();this.refresh_icons();this.maybe_audio_play()};I.prototype.go_prev=function(){this.maybe_audio_stop();if(this.is_first()){(0,p.default)("#instructions").stop().animate({"margin-top":-100},100).animate({"margin-top":0},550);return}this.core.record_keydown_time("<-");(0,p.default)(".step.active").removeClass("active").prev().removeClass("done").addClass("active");this.maybe_close();this.refresh_icons();this.maybe_audio_play()};I.prototype.is_last=function(){return(0,p.default)(".step.active").next(".step").length==0};I.prototype.is_first=function(){return(0,p.default)(".step.active").prev(".step").length==0};I.prototype.refresh_icons=function(){if(this.requires_typing()&&!g.default.isIOS)(0,p.default)(".arrow-down").hide();else{(0,p.default)(".arrow-down").show();if(this.is_last()){(0,p.default)(".arrow-down").addClass("arrow-last")}else{(0,p.default)(".arrow-down").removeClass("arrow-last")}}if(this.is_first()){(0,p.default)(".arrow-up").addClass("inactive")}else{(0,p.default)(".arrow-up").removeClass("inactive")}};I.prototype.maybe_audio_stop=function(){var e=(0,p.default)(".step.active audio").get(0);e&&e.pause()};I.prototype.maybe_audio_play=function(){var e=(0,p.default)(".step.active audio").get(0);if(e){e.currentTime=0;e.play()}};I.prototype.maybe_close=function(){if(!(0,p.default)(".step").not(".done").length){setTimeout(this.close.bind(this))}};I.prototype.close=function(){(0,p.default)(".arrow-up,.arrow-down").hide();var e=(0,p.default)("#night");e.delay(50).animate({opacity:0},400,"easeOut",function(){e.hide()});(0,p.default)("#instructions").hide();if(this.on_close){this.on_close();this.on_close=null}(0,p.default)(window).unbind("keydown",this.on_keydown);(0,p.default)(window).unbind("resize",this.on_resize)};I.prototype.on_press=function(e){if(this.in_transition)return;if((0,p.default)(".step.active .intro-keyboard").length){var t=(0,p.default)(".step.active .intro-keyboard");var a=t.data("chr");if(e.is_valid||!a){if(!a||a==e.chr)this.go_next();else if(e.chr=="<-")this.go_prev()}else{var n=(0,p.default)(".step.active h1 .keybtn");n.css("background","pink");n.removeClass().addClass("keybtn").animateCss("headShake");setTimeout(function(){n.css("background","white")},300)}}};I.prototype.requires_typing=function(){return(0,p.default)(".step.active .intro-keyboard").length>0&&(0,p.default)(".step.active h1 .keybtn").length>0};I.prototype.on_keydown=function(e){switch(e.which){case S.default.space:case S.default.down_arrow:case S.default.enter:case S.default.right_arrow:if(!this.requires_typing()){this.go_next();e.preventDefault()}break;case S.default.up_arrow:case S.default.left_arrow:this.go_prev();break;case S.default.escape:this.close();break}};I.prototype.on_resize=function(e){setTimeout(function(){var e=(0,p.default)(window).width();var t="";if(e<1200)t+="wd1200 ";if(e<1e3)t+="wd1000 ";if(e<900)t+="wd900 ";if(e<780)t+="wd780 ";if(e<500)t+="wd500 ";var a=(0,p.default)("#instructions");a.attr("class","");if(t)a.addClass(t)},0)};I.prototype.initialize=L(regeneratorRuntime.mark(function e(){var t,a,n,r,s,l,i,o,c,u,d,f,h,m,v;return regeneratorRuntime.wrap(function e(_){while(1){switch(_.prev=_.next){case 0:(0,p.default)("#night").show();this.on_resize();(0,p.default)(".arrow-up").click(p.default.proxy(this.go_prev,this));(0,p.default)(".arrow-down").click(p.default.proxy(this.go_next,this));a=true;n=false;r=undefined;_.prev=7;for(s=(0,p.default)(".intro-keyboard")[Symbol.iterator]();!(a=(l=s.next()).done);a=true){i=l.value;t=new C.default.KeyboardPlugin(this.core,i,this.keyboard,true,true,this.keyboard_layout,this.use_hand,false)}_.next=15;break;case 11:_.prev=11;_.t0=_["catch"](7);n=true;r=_.t0;case 15:_.prev=15;_.prev=16;if(!a&&s.return){s.return()}case 18:_.prev=18;if(!n){_.next=21;break}throw r;case 21:return _.finish(18);case 22:return _.finish(15);case 23:if(!t){_.next=26;break}_.next=26;return t.keyboard.loading;case 26:o=void 0;if(k.default.program.is_junior){o=function e(a,n){var r=t.keyboard.get_key_id_for_char(n);return(0,p.default)("<img/>").addClass("keybtn").attr("src",STATIC_URL+("engine/img/intro/letters/"+r+".svg"))[0].outerHTML}}else{o=function e(t,a){return(0,p.default)("<span/>").addClass("keybtn").text(a)[0].outerHTML}}c=true;u=false;d=undefined;_.prev=31;for(f=(0,p.default)(".step-elm")[Symbol.iterator]();!(c=(h=f.next()).done);c=true){m=h.value;(0,p.default)(m).html((0,p.default)(m).html().replace(/\[([^\]]+)\]/g,o))}_.next=39;break;case 35:_.prev=35;_.t1=_["catch"](31);u=true;d=_.t1;case 39:_.prev=39;_.prev=40;if(!c&&f.return){f.return()}case 42:_.prev=42;if(!u){_.next=45;break}throw d;case 45:return _.finish(42);case 46:return _.finish(39);case 47:v=(0,p.default)(".intro-text");v.each(function(e,t){var a=1;while((0,p.default)(t).height()>130&&a>1){a-=.01;(0,p.default)(t).find("p").css("font-size",a+"em")}});(0,p.default)(window).keydown(p.default.proxy(this.on_keydown,this));(0,p.default)(window).resize(p.default.proxy(this.on_resize,this));k.default.events.on("unload",function(){(0,p.default)(window).unbind("keydown",this.on_keydown);(0,p.default)(window).unbind("resize",this.on_resize)}.bind(this));this.refresh_icons();setTimeout(function(){(0,p.default)(".step.active h1 .keybtn").removeClass().addClass("keybtn").animateCss("bounceIn")},500);case 54:case"end":return _.stop()}}},e,this,[[7,11,15,23],[16,,18,22],[31,35,39,47],[40,,42,46]])}));var R=(r=(0,i.translate)(["common"],{wait:false}),r(s=function(e){j(t,e);n(t,[{key:"render",value:function e(){var t=this.props.instructions;var a=[];var n=this.props.lesson;var r=this.props.profile;for(var s=0;s<t.length;s++){var l=t[s];var i=l.body.slice(0,250);var o=c.default.createElement("div",null);var u=c.default.createElement("div",null);var f=l.body||l.title||l.tag?{maxHeight:500}:{maxWidth:"100%",maxHeight:(0,p.default)(window).height()-50};if(l.image_url){if(l.is_video){if(l.is_youtube){var h="//www.youtube.com/embed/"+l.video_code;o=c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("iframe",{width:"640",height:"390",src:h,frameBorder:"0",allowFullScreen:true}))}else if(l.is_google_docs_video){var m="https://docs.google.com/file/d/"+l.video_code+"/preview";o=c.default.createElement("iframe",{src:m,width:"640",height:"385"})}}else{o=c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("img",{className:"inst-image",src:l.image_url,style:f}))}}if(l.chr&&!l.image_url){u=c.default.createElement("div",{id:"intro-keyboard",className:"intro-keyboard akeyboard","data-chr":l.chr})}var v=c.default.createElement("div",{key:"inst"+s,className:(0,d.default)({step:true,active:s==0})},l.audio_url&&c.default.createElement("audio",null,c.default.createElement("source",{src:l.audio_url,type:"audio/mp3"})),c.default.createElement("span",{className:"step-counter"},c.default.createElement("b",null,s)," of ",c.default.createElement("b",null,t.length)),c.default.createElement("div",{className:"step-elm intro-head"},l.title_tag||""),c.default.createElement("h1",{className:"step-elm"},l.title),c.default.createElement("div",{className:"step-elm intro-text"},i.split("\n").map(function(e,t){if(e=="")return c.default.createElement("br",{key:"br-"+t});return c.default.createElement("div",{key:"txt-"+t},e)})),o,u);a.push(v)}return c.default.createElement("div",{id:"article",ref:"root","aria-label":"press ESC key to continue"},c.default.createElement(_.default,{profile:r,layout:"game",compact:true},k.default.program.is_junior?null:c.default.createElement(T.SettingsContainer,{core:this.core,profile:r,on_instruction:true})),c.default.createElement("div",{id:"night"}),c.default.createElement("div",{id:"instructions"},c.default.createElement("div",{className:"inst-nav-lnk arrow-up"}),c.default.createElement("div",{className:"inst-nav-lnk arrow-down"}),a))}}]);function t(e){M(this,t);var a=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.core=new E.default({lesson_id:e.lesson.id,text:e.instructions.map(function(e){return e.chr||" "}).join(""),on_error:"block",max_secs:0,deletable:true,use_hand:e.profile.use_hand,ignore_case:k.default.program.is_junior,t:e.t});return a}n(t,[{key:"componentDidMount",value:function e(){var t=this.props.t;var a=this.props.lesson;var n=this.props.profile;var r=k.default.get_teamsettings();this.soundfx=new C.default.SoundFX(this.core,this.refs.root,!n.keyboard_sfx);if(n.voicefx!="OFF"){var s=new C.default.KeyboardPlugin(this.core,(0,p.default)("<div />"),n.keyboard,false,false,n.keyboard_layout,n.use_hand,false);this.voiceover=new C.default.VoiceOver(this.props.profile,r,this.core,"instruction",s.keyboard)}this.core.attach_capture();this.instructions=new I({core:this.core,use_hand:this.props.profile.use_hand,on_close:function e(){k.default.next()},keyboard:this.props.profile.keyboard,keyboard_layout:this.props.profile.keyboard_layout});this.settings_validator=new C.default.SettingsValidator(n,k.default.program,k.default.refresh);this.settings_validator.check_settings()}},{key:"componentWillUnmount",value:function e(){this.voiceover&&this.voiceover.utterance.clear(true);this.core.detach_capture()}}]);return t}(c.default.Component))||s);function A(e,t){var a=e.instruction.instruction;var n=t.getDerivedProfile();return c.default.createElement(m.default,{key:"instruction_"+e.resource_uri,rootId:"instruction",header:false,scroll:false},c.default.createElement(R,{key:"ClassicTypingApp"+k.default.current_app_index,lesson:e,instructions:a,profile:n}))}e.exports=A},978:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r,s,l,i,o,c,u,d,f,p,h,m;var v=a(1);var _=X(v);var y=a(12);var g=X(y);var b=a(299);var k=X(b);var w=a(209);var E=a(300);var x=X(E);var C=a(123);var N=a(210);var S=X(N);var T=a(17);var O=X(T);var M=a(21);var P=X(M);var j=a(8);var L=X(j);var I=a(77);var R=X(I);var A=a(20);var z=a(298);var U=a(957);var D=a(151);var W=X(D);var F=a(124);var V=X(F);var H=a(18);var q=X(H);var K=a(214);var B=X(K);var G=a(149);var Y=a(958);function X(e){return e&&e.__esModule?e:{default:e}}function J(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,s){try{var l=t[r](s);var i=l.value}catch(e){a(e);return}if(l.done){e(i)}else{return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function Q(e,t,a){if(t in e){Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true})}else{e[t]=a}return e}function $(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function Z(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function ee(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var te=(r=(0,A.translate)(["common"],{wait:true}),r(s=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={stats_visible:false,stats:null};a.ele=null;a.onStatsUpdate=a.onStatsUpdate.bind(a);return a}n(t,[{key:"onStatsUpdate",value:function e(t){if(t.wpm>250)return;if(this.state.stats_visible){if(t.total_chars>3){this.setState({stats:t})}else{this.setState({stats_visible:false});this.ele.fadeOut(1e3)}}else{if(t.total_chars>3){this.setState({stats_visible:true,stats:t});this.ele.fadeIn(1e3)}}}},{key:"componentDidMount",value:function e(){this.props.core.events.on("stats_update",this.onStatsUpdate)}},{key:"componentWillUnmount",value:function e(){this.props.core.events.unbind("stats_update",this.onStatsUpdate)}},{key:"render",value:function e(){var t=this;var a=this.state.stats;var n=this.props.t;var r=this.props.core.max_secs;if(r&&a){var s=r-a.duration/1e3-+(new Date-this.props.core.last_keydown)/1e3}if(!a)return null;return _.default.createElement("div",{ref:function e(a){return t.ele=(0,L.default)(a)},className:g.default.cx({stats:true,flat_view:this.props.flat_view}),style:this.props.stats_style},_.default.createElement("div",{className:"stat-row"},_.default.createElement("div",{className:"stat-col"},n("Speed")),Math.round(a.wpm),_.default.createElement("sup",null,n("WPM"))),_.default.createElement("div",{className:"stat-row"},_.default.createElement("div",{className:"stat-col"},n("Accuracy")),a.accuracy,"%"),this.props.show_timeout&&s&&r?_.default.createElement("div",{className:"stat-row"},_.default.createElement("div",{className:"stat-col"},n("Time left")),parseInt(s/60)+":"+parseInt(s%60)):null)}}]);return t}(_.default.Component))||s);var ae=(l=(0,A.translate)(["common"],{wait:true}),l(i=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.ele=null;a.hide=a.hide.bind(a);return a}n(t,[{key:"show",value:function e(){this.ele.animate({top:-30},1e3,"bounceout")}},{key:"hide",value:function e(){this.ele.stop().animate({top:-300},450,"backin")}},{key:"componentDidMount",value:function e(){var t=this;var a=this.props.core.events;a.on("start",this.hide);a.on("unpause",function(e){if(e==0)t.hide()});this.show()}},{key:"render",value:function e(){var t=this;var a=this.props.t;return _.default.createElement("div",{ref:function e(a){return t.ele=(0,L.default)(a)},tabIndex:-1,"aria-hidden":true,className:"drop-banner"},a("Start Typing"))}}]);return t}(_.default.Component))||i);var ne=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.ele=null;a.$kb=(0,L.default)("#vkeyboardhand")[0];return a}n(t,[{key:"show",value:function e(){var t=this;this.ele.animateCss("flipInX",function(){return t.ele.show()})}},{key:"hide",value:function e(){var t=this;this.ele.animateCss("fadeOut",function(){return t.ele.hide()})}},{key:"componentDidMount",value:function e(){this.show()}},{key:"componentDidUpdate",value:function e(){if(this.props.hidden&&this.ele.is(":visible"))this.hide();else if(!this.props.hidden&&!this.ele.is(":visible"))this.show()}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.width,r=a.indicatorTop;var s={top:Math.min(this.$kb.offsetTop+15,window.innerHeight-200),left:Math.max(0,this.$kb.offsetLeft-n-20),width:n,minHeight:r+30};return _.default.createElement("div",{ref:function e(a){return t.ele=(0,L.default)(a)},style:s,className:"keyboard-popup",tabIndex:-1,"aria-hidden":true},_.default.createElement("div",null,this.props.children,_.default.createElement("i",{className:"right-indicator",style:{top:r}})))}}]);return t}(_.default.Component);var re=(o=(0,A.translate)(["common"],{wait:true}),o(c=function(e){ee(t,e);function t(){var e;var a,n,r;$(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={hidden:false},a),Z(n,r)}n(t,[{key:"hide",value:function e(){this.setState({hidden:true})}},{key:"render",value:function e(){var t=this;var a=this.props.t;return _.default.createElement(ne,{width:306,indicatorTop:40,hidden:this.state.hidden},_.default.createElement("h4",{style:{marginTop:0}},a("Incorrect Keyboard Detected")),a("It looks like you have the wrong keyboard layout selected. We suggest you review your keyboard layout and make sure itâ€™s compatible with this lesson."),_.default.createElement("div",{style:{marginTop:15}},_.default.createElement("button",{className:"btn btn-primary",onClick:function e(){(0,Y.get_keyboards)(function(e,a){var n=t.props,r=n.profile,s=n.apply_setting_param;var l=r.keyboard.split(",")[0];var i=a[l].keyboards;var o=(i.filter(function(e){return r.keyboard==e.slug})[0]||{name:r.keyboard}).name;(0,Y.show_keyboard_assist)({profile:r,keyboards:e,lang_keyboard_map:a,layout_choices:i,apply_setting_param:s,schema_name:o})});t.hide()}},a("Update Keyboard Layout")),_.default.createElement("button",{className:"btn btn-link",onClick:function e(){localStorage.setItem("ignore_possible_keyboard_mismatch",true);t.hide()}},"Dismiss")))}}]);return t}(_.default.Component))||c);var se=(u=(0,A.translate)(["common"],{wait:true}),u(d=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.ele=null;a.ignore=a.props.core.ignore_case;a.state={active:false,hidden:false};return a}n(t,[{key:"hide",value:function e(){this.setState({hidden:true})}},{key:"componentDidMount",value:function e(){var t=this;if(this.ignore)return;this.props.core.events.on("capslock_detected",function(e){if(e){if(!t.ignore)t.setState({hidden:false,active:true})}else{if(t.state.active)t.hide()}})}},{key:"render",value:function e(){var t=this;var a=this.props.t;var n=a("We detected that you have CapsLock key ON. Press the CapsLock key again to turn it off.");return this.state.active?_.default.createElement(ne,{width:241,indicatorTop:85,hidden:this.state.hidden},_.default.createElement("h4",{style:{marginTop:0}},a("CapsLock ON")),n,_.default.createElement("button",{className:"btn btn-link",style:{display:"block",marginTop:10,marginLeft:-10},"aria-label":n,onClick:function e(){localStorage.setItem("ignore_possible_keyboard_mismatch",true);t.hide();t.ignore=true}},"Dismiss")):null}}]);return t}(_.default.Component))||d);var le=function(e){ee(t,e);function t(){$(this,t);return Z(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}n(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.core.events;a.on("start",function(){return t.progressDot.show()});a.on("progress",function(e){t.progressBar.stop().animate({width:e+"%"},1e3,"bounceout")})}},{key:"render",value:function e(){var t=this;return _.default.createElement("div",{id:"progress-bar"},_.default.createElement("div",{ref:function e(a){return t.progressBar=(0,L.default)(a)},id:"progress-percent"},_.default.createElement("div",{ref:function e(a){return t.progressDot=(0,L.default)(a)},id:"progress-dot"})))}}]);return t}(_.default.Component);var ie=function(e){ee(t,e);function t(){$(this,t);return Z(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}n(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.core.events.on("progress",function(e){t.setState({progress:e})})}},{key:"render",value:function e(){return _.default.createElement("div",{id:"progress-bar"},this.props.typable.lines.map(function(e){return _.default.createElement("span",{key:"line-progress-"+e.index,className:g.default.cx({"progress-line-block":true,active:e.is_focused,done:e.is_done})})}))}}]);return t}(_.default.Component);var oe=(f=(0,A.translate)(["common"],{wait:true}),f(p=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={show_anchor:false,side:a.props.core.anchor_side,key:a.props.core.anchor_key};return a}n(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.core.events.group();a.on("anchor_start",function(){return t.setState({show_anchor:false})});a.on("anchor_stop",function(){return t.setState({show_anchor:true})});a.on("anchor_abort",function(){return t.setState({show_anchor:false})});a.on("anchor_updated",function(e){return t.setState({side:e.side,key:e.key})});this._core_events=a}},{key:"componentWillUnmount",value:function e(){this._core_events.unbindAll()}},{key:"render",value:function e(){var t=this.state.key;var a=this.state.side;var n=void 0;var r=void 0;var s=this.props.t("Hold the {{one_letter}} key while typing this lesson.",{one_letter:"ONE_LETTER"});var l=s.split("ONE_LETTER");switch(a){case"left":n="";r={position:"fixed",top:"46.5%",marginLeft:-130};break;default:case"right":n="flip-x";r={position:"fixed",top:"40%",marginLeft:-400};break}return _.default.createElement(G.TransitionGroup,null,this.state.show_anchor?_.default.createElement(G.CSSTransition,{classNames:"blackoverlay",timeout:{enter:500,exit:200}},_.default.createElement("div",{className:"blackoverlay"},_.default.createElement("div",{className:"blackoverlay-message"},_.default.createElement("div",null,l[0],_.default.createElement("span",{className:"keybtn"},t),l[1]),_.default.createElement("img",{className:n,style:r,src:STATIC_URL+"engine/img/righthand-press.png"})))):null)}}]);return t}(_.default.Component))||p);var ce=(h=(0,A.translate)(["common"],{wait:true}),h(m=function(e){ee(t,e);function t(e){$(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={is_typing:false,pause_count:0,show_settings:false,settings_do_not_match:false,possible_keyboard_mismatch:false};var n=e.lesson;var r=e.profile.getDerivedProfile();var s=a.props.t;a.core=new k.default({lesson_id:n.id,text:n.typing.text,is_logograms:n.typing.render_engine=="logographic",on_error:n.typing.on_error,profile_block_on_errors:r.block_on_errors,max_secs:n.typing.max_secs,is_test:n.is_test,deletable:n.typing.deletable&&!r.disable_backspace||r.is_blind,use_hand:r.use_hand,ignore_case:P.default.program&&P.default.program.is_junior||false,t:s});if(n.typing.render_engine.search(/anchor$/)>-1&&(g.default.isIOS||r.voicefx=="FULL"||r.is_blind)){n.typing.render_engine="normal"}a.render_props=(0,C.get_render_props)(n.typing.render_engine);a.render_props.format=n.typing.format;a.render_props.size=r.font_size;a.navAccess=a.navAccess.bind(a);a._mounted=false;return a}n(t,[{key:"plug_ads",value:function e(){var t=[{id:"adslot_1",slot:"4189766002",parent:P.default.root}];if(this.props.window_width>1440)t.push({id:"adslot_2",slot:"5798780009",parent:P.default.root});g.default.plug_ads(t,this.onRemoveAd.bind(this))}},{key:"hide_ads",value:function e(){(0,L.default)("#adslot_1, #adslot_2").fadeOut()}},{key:"show_ads",value:function e(){(0,L.default)("#adslot_1, #adslot_2").fadeIn()}},{key:"is_showing_ads",value:function e(){if(P.default.program.is_junior)return false;return this.render_props.size!="xxlarge"&&this.props.profile.is_basic&&!window.hide_ads}},{key:"onRemoveAd",value:function e(){(0,z.LaunchStudentPlansModal)(this.onSubscribe.bind(this),this.onSubscribe.bind(this),"ClassicTypingApp");this.core.detach_capture()}},{key:"onSubscribe",value:function e(t){this.core.attach_capture()}},{key:"remove_current_theme",value:function e(){if(document.body)document.body.className=g.default.filterString(document.body.className," ",function(e){return e.search("theme-")==0})}},{key:"apply_fontface",value:function e(t,a){var n=this;if(!t)t="Droid Sans Mono";var r={active:function e(){n.typable.change_font(t);setTimeout(a,100)},inactive:function e(){console.warn("Font ("+t+") could not be loaded. Please make sure you have white-listed Google Fonts. (fonts.gstatic.com)");setTimeout(a,100)}};if(t=="OpenDyslexic"){r.custom={families:["OpenDyslexic"],urls:[window.STATIC_URL+"corp2/css/dyslexic.css"]}}else if(t=="Primary Penmanship"){r.custom={families:["Primary Penmanship"],urls:[window.STATIC_URL+"corp2/css/KGPrimaryPenmanshipAlt.css?1"]}}else{r.google={families:[t]};r.classes=false}W.default.load(r)}},{key:"apply_theme",value:function e(t){var a=true;var n=false;var r=undefined;try{for(var s=U.themes[Symbol.iterator](),l;!(a=(l=s.next()).done);a=true){var i=l.value;if(i.value==t){this.remove_current_theme();(0,L.default)(document.body).addClass("theme-"+t);return}}}catch(e){n=true;r=e}finally{try{if(!a&&s.return){s.return()}}finally{if(n){throw r}}}}},{key:"navAccess",value:function e(t){if(t.ctrlKey&&t.keyCode==27){if(this.core.capturing){this.core.detach_capture();this.core.pause();(0,L.default)("[tabindex=1]").focus();var a=function(e){if(e.which==27){this.core.attach_capture();window.removeEventListener("keydown",a)}}.bind(this);window.addEventListener("keydown",a)}}}},{key:"show_warn_keyboard_punching",value:function e(){var t=this.core;var a=this.props.t;t.detach_capture();var n;function r(){P.default.hide_modal("keyboard_punching");P.default.refresh();if(n)clearTimeout(n)}P.default.show_modal(_.default.createElement(q.default,{id:"keyboard_punching",width:"100vw",padding:0,show_x:false,close_outside:false,esc_close:false,style:{boxShadow:"0 0 200px #444"}},_.default.createElement("div",{style:{background:"rgba(0,0,0,.9)",fontSize:25,textAlign:"center",padding:60}},_.default.createElement("div",null,a("Please focus on your accuracy and try again.")),_.default.createElement("div",{className:"btn btn-default btn-lg",style:{marginTop:10},onClick:r},a("Restart Lesson")))));n=setTimeout(r,4e3)}},{key:"componentDidMount",value:function e(){var t=this;var a=this.core;var n=this.props.lesson.typing.render_engine;var r=P.default.get_teamsettings();var s=this.props.profile.getDerivedProfile();window.addEventListener("keydown",this.navAccess);a.events.on("abort",function(e){return e.punching&&t.show_warn_keyboard_punching()});a.events.on("pause",function(e){this.setState({pause_count:e,is_typing:false})}.bind(this));a.events.on("unpause",function(e){this.setState({is_typing:true})}.bind(this));a.events.on("backspace_prevented",function(){(0,L.default)(this.refs.backspace_forbidden).stop().fadeTo(150,.7).delay(300).fadeOut(700)}.bind(this));P.default.events.on("unload",function(){a.detach_capture();if(a.has_started&&!a.has_ended)a.end_lesson(true);this.remove_current_theme();window.removeEventListener("keydown",this.navAccess)}.bind(this));a.events.on("start",function(){this.setState({is_typing:true})}.bind(this));a.events.on("end",function(e){if(!t.props.lesson.push_result_url){return console.warn("push_result_url is not available")}if(e.is_partial&&!s.save_partial_attempts)return;O.default.postTypingResults(e,function(a){if(t.is_showing_ads()&&!window.cordova){window.location=a.canonical_url;return}if(e.is_partial)return;P.default.goto_url(a)})});var l=n=="right-anchor"||n=="left-anchor";if(l)a.force_input_capture_mode();this.keyboard_plugin=new x.default.KeyboardPlugin(this.core,this.refs.vkeyboardhand,s.keyboard,s.show_keyboard,s.show_hand,s.keyboard_layout,s.use_hand,l,s.typing_theme);this.keyboard_plugin.keyboard.events.on("possible_keyboard_mismatch",function(){return!localStorage.getItem("ignore_possible_keyboard_mismatch")&&t.setState({possible_keyboard_mismatch:true})});this.typable=new C.Typable(this.refs.typable,this.render_props,this.core);this.soundfx=new x.default.SoundFX(this.core,this.refs.root,!s.keyboard_sfx);this.voiceover=new x.default.VoiceOver(s,r,this.core,n,this.keyboard_plugin.keyboard,this.props.lesson.typing.voiceover_words);this.keepinview=new x.default.KeepInView(this.typable,this.render_props.line_transition,0);if(this.is_showing_ads()){this.plug_ads()}this.settings_validator=new x.default.SettingsValidator(this.props.profile,P.default.program,this.apply_settings.bind(this));this.settings_validator.events.on("mismatch_detected",function(){return t.setState({settings_do_not_match:true})});this.settings_validator.events.on("mismatch_cleared",function(){if(t.state.settings_do_not_match)t.setState({settings_do_not_match:false})});var i=(0,L.default)(this.refs.vkeyboardhand);i.show().fadeTo(1,0);setTimeout(function(){i.fadeTo(1e3,1)}.bind(this),1e3);this.apply_settings();this.core.attach_capture()}},{key:"componentWillUnmount",value:function e(){var t=this.keyboard_plugin&&this.keyboard_plugin.keyboard;if(t)t.release();this.core.detach_capture();this.unmounted=true}},{key:"size_adjust_render_props",value:function e(){var t=this.keyboard_plugin.keyboard;var a=this.render_props;var n=a.display_rows;var r=a.size=="xxlarge"?0:t.height()||0;var s=this.props.window_height;var l=s-r;var i=this.typable.facts.line_h_allin;var o=this.typable.lines.length;if(a.display_row_range){var c=a.display_row_range[0];var u=a.display_row_range[1];var d=parseInt(l/i)-2;n=Math.min(o,Math.min(Math.max(d,c),u))}var f=n*i;var p=f+r;var h=Math.max(0,(s-p-260)/2);var m=150;var v=90;if(t.show_both_standalone()){m=115;v=70}var _=f+h+m;if(t.show_hands_only())_+=80;else if(t.show_neither())_-=30;a.display_rows=n;a.vkeyboard_style={top:_};a.stats_style={top:_+20};a.typable_style={marginTop:Math.max(0,h)+v}}},{key:"apply_settings",value:function e(){var t=this;var a=this.keyboard_plugin.keyboard;var n=this.props.profile.getDerivedProfile();if(a.show_keyboard!=n.show_keyboard||a.show_hand!=n.show_hand||a.schema_name!=n.keyboard||a.keyboard_layout_file_id!=n.keyboard_layout||a.use_hand!=n.use_hand){a.apply_settings(n.show_keyboard,n.show_hand,n.keyboard,n.keyboard_layout,n.use_hand,n.typing_theme)}else{if(a.show_keyboard&&a.is_svg_loaded)a.set_theme(n.typing_theme)}if(this.render_props.size!=n.font_size){this.render_props.size=n.font_size}this.apply_theme(n.typing_theme);this.soundfx.is_mute=!n.keyboard_sfx;this.core.use_hand=n.use_hand;this.voiceover.settings_updated(n);this.settings_validator.check_settings(true);this.needsExtraUpdate=true;var r=this.core.is_logograms?"Roboto Mono":n.font_face;this.apply_fontface(r,function(){if(!t.unmounted){t._mounted=true;t.forceUpdate()}})}},{key:"componentDidUpdate",value:function e(t,a){this.typable.clean_rerender();this.size_adjust_render_props();this.keepinview.set_linecount(this.render_props.display_rows);if(this.is_showing_ads())this.show_ads();else this.hide_ads();if(this.needsExtraUpdate){this.needsExtraUpdate=false;this.forceUpdate()}}},{key:"render",value:function e(){var t=this;var a=this.props.t;var n=this.props.lesson,r=this.props.profile,s=P.default.get_teamsettings(),l=r.getDerivedProfile(),i=this.core,o=this.typable,c=this.keepinview,u=this.state,d=this.render_props,f=this.keyboard_plugin&&this.keyboard_plugin.keyboard;var p=false;var h=false;var m=n.typing.render_engine;var v=void 0;if(f){v=f.keyboard_options().className}if(!l.use_hand&&(m=="right-anchor"||m=="left-anchor")){p=true}if(l.show_live_stats&&(m=="normal"||p)){h=true}var y=null;if(P.default.program&&P.default.program.is_junior||false){y={background:"rgba(255, 255, 255)",color:"#444",borderBottom:"1px solid rgba(255, 255, 255, .1)"}}var b=n.lesson_type!="test"||!n.typing.max_secs;var k=n.lesson_index?a("Lesson {{name}}")+n.lesson_index+": "+n.name:n.name;return _.default.createElement("div",{ref:"root",className:g.default.cn("container",d.size)},_.default.createElement(S.default,{name:k,profile:l,compact:true,style:y},P.default.program&&P.default.program.is_junior||false?null:_.default.createElement("div",{style:{display:"inline-block"}},(u.is_typing||u.pause_count>0&&u.pause_count<4)&&b&&_.default.createElement("div",{className:"header-item",onClick:function e(){i.toggle_pause()}},_.default.createElement("span",{className:"edicon-"+(u.is_typing?"pause":"play")})),u.settings_do_not_match?_.default.createElement("div",{className:"header-item",onClick:function e(){return t.settings_validator.show_warning_modal()}},_.default.createElement("span",{className:"edicon-alert"})):null,document.location.port=="8000"&&!window.is_prod&&_.default.createElement("div",{className:"header-item",onClick:function e(){return i.idkfa(200)}},_.default.createElement("span",{className:"edicon-flash"})),!s.lock_restart&&_.default.createElement("div",{tabIndex:"2",role:"menuitem","aria-label":a("Restart the lesson"),className:"header-item",onClick:P.default.refresh,onKeyUp:function e(t){if(t.keyCode==V.default.enter)P.default.refresh()}},_.default.createElement("span",{className:"edicon-refresh"}))),P.default.program&&P.default.program.is_junior||false?null:_.default.createElement(U.SettingsContainer,{core:i,profile:r,apply_settings:this.apply_settings.bind(this),onPopup:function e(t){if(t)(0,L.default)(".hdrlt").css("z-index",500);else(0,L.default)(".hdrlt").css("z-index",100)}})),_.default.createElement(oe,{core:i}),_.default.createElement(ae,{core:i}),o&&!p?_.default.createElement(x.default.PauseTooltip,{core:i,typable:c,className:d.display_className}):null,_.default.createElement("div",{style:d.typable_style,className:g.default.cn("tpmodes",d.display_className,d.size,v),tabIndex:-1,"aria-hidden":true},_.default.createElement("div",{ref:"typable",className:g.default.cx({typable:true,mono_standard:true,hide_extras:!l.show_live_extras}),style:{opacity:this._mounted?1:0}}),o?d.progress_style=="per_line"?_.default.createElement(ie,{core:i,typable:o}):_.default.createElement(le,{core:i}):null),h&&d.size!="xxlarge"?_.default.createElement(te,{core:i,show_timeout:this.props.program.program_type=="test",flat_view:f&&f.show_neither(),stats_style:d.stats_style}):null,_.default.createElement(se,{core:i}),this.state.possible_keyboard_mismatch&&_.default.createElement(re,{profile:r,apply_setting_param:function e(a,n){O.default.updateProfile(Q({},a,n));r[a]=n;t.apply_settings();t.forceUpdate()}}),_.default.createElement("div",{ref:"vkeyboardhand",id:"vkeyboardhand",className:"in-lesson-keyboard",style:d.vkeyboard_style,tabIndex:-1,"aria-hidden":true}),_.default.createElement("img",{ref:"backspace_forbidden",className:"backspace-forbidden",src:STATIC_URL+"engine/img/backspace-forbidden-icon.png"}))}}]);return t}(_.default.Component))||m);e.exports=function(){var e=J(regeneratorRuntime.mark(function e(t,a){var n,r,s;return regeneratorRuntime.wrap(function e(l){while(1){switch(l.prev=l.next){case 0:if(!t.repeatable_count){l.next=8;break}l.next=3;return O.default.get(P.default.program.resource_uri+"game/");case 3:n=l.sent;r=n&&n.lesson_games.find(function(e){return e.lesson==t.resource_uri})||{};if(!(t.repeatable_count<=r.attempt_count)){l.next=8;break}s="You have attempted this lesson "+r.attempt_count+" times. This test\n                            only allows for "+t.repeatable_count+" attempts.";return l.abrupt("return",(0,B.default)('Test "'+t.name+'" Locked',"Maximum Attempts Reached",s,"Go back",function(){return P.default.exit_lesson()}));case 8:return l.abrupt("return",_.default.createElement(R.default,{key:"typing_"+t.resource_uri,styles:["TP_APP1","TPCMN"],scroll:false,header:false,hasSize:true,noTouch:true},_.default.createElement(ce,{key:"ClassicTypingApp"+P.default.current_app_index,lesson:t,program:P.default.program,profile:a})));case 9:case"end":return l.stop()}}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},979:function(e,t,a){var n,r;var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var l=a(1);var i=T(l);var o=a(77);var c=T(o);var u=a(8);var d=T(u);var f=a(947);var p=a(210);var h=T(p);var m=a(299);var v=T(m);var _=a(300);var y=T(_);var g=a(123);var b=a(20);var k=a(298);var w=a(18);var E=T(w);var x=a(950);var C=T(x);var N=a(12);var S=T(N);function T(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function M(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var j=i.default.createElement("svg",{className:"menu-action",width:"75px",height:"75px"},i.default.createElement("path",{className:"colorsect",fill:"#4D4D4D",d:"M39.9,5.4C20.9,5.5,5.4,21,5.4,40C5.5,58.9,21,74.5,40,74.4c19-0.1,34.5-15.6,34.4-34.5 C74.4,20.9,58.8,5.4,39.9,5.4z"}),i.default.createElement("path",{fill:"#fff",d:"M57.8,54.4c1.3,0,2-0.1,2.6,0c1,0.1,1.7,0.7,1.7,1.7c0.1,1.1-0.5,1.8-1.5,1.9c-2.6,0.3-5.2,0.5-7.7,0.6 c-1.3,0-1.9-1-1.9-2.2c0-1.8-0.1-3.6,0-5.4c0.1-1.4-0.4-3.3,1.8-3.4c2.2-0.1,1.8,1.9,2.1,3.3c5.2-5.1,5.4-16.1-0.1-22.8 c-5.6-6.8-14.3-9.1-22.4-5.8c-7.5,3-12.4,11.2-11.7,19.1c0.8,8.8,6.9,15.5,15.7,17.3c1.6,0.3,4.3-0.2,3.8,2.5 c-0.5,2.6-3,1.4-4.5,1.2c-12-2-20.3-13.6-18.6-25.9c1.6-11.9,12.3-20.2,25.1-19.4c11.3,0.7,20.5,11.1,20.5,22.9 C62.7,45.3,61,49.8,57.8,54.4z"}));var L=i.default.createElement("svg",{className:"menu-action",width:"75px",height:"75px"},i.default.createElement("path",{className:"colorsect",fill:"#4D4D4D",d:"M40.6,5.5C22,4.7,6.2,19.9,5.5,39.2C4.7,57.8,19.9,73.6,39.2,74.4C57.8,75.1,73.6,60,74.4,40.6 C75.1,22,60,6.2,40.6,5.5z"}),i.default.createElement("path",{fill:"#fff",d:"M38.5,32.3c0.1-1.6,0.1-2.8,0.3-3.9c0.5-3.4,2.3-4.6,5.4-3c2.6,1.4,5.1,3.1,7.6,4.7c2.9,1.9,5.9,3.7,8.7,5.8 c3.2,2.3,3.3,5.7,0.1,7.9c-5.1,3.5-10.2,7-15.5,10.2c-3.9,2.4-6.2,1-6.4-3.7c0-0.8,0-1.5,0-2.9c-3.1,2-5.7,3.8-8.4,5.5 c-1.1,0.7-2.2,1.4-3.4,1.8c-2.3,0.8-3.9,0.2-4.5-2.3c-0.2-1.1-0.4-2.2-0.4-3.2c0-6.2-0.1-12.4,0-18.6c0-2.1-0.2-4.4,2-5.6 c2.1-1.1,3.8,0.3,5.5,1.4C32.5,28.3,35.3,30.2,38.5,32.3z M25.9,39.7C25.9,39.7,25.9,39.7,25.9,39.7c0,2.2-0.1,4.4,0,6.6 c0,1.2-0.5,2.9,0.7,3.6c1.3,0.8,2.4-0.6,3.4-1.3c3.1-2,6.2-4,9.3-6c2.5-1.6,3.1-1.3,3.2,1.6c0,1.2,0,2.4,0,3.6 c0.1,2.6,0.8,3,3.1,1.5c3.7-2.4,7.4-4.8,11-7.2c2.6-1.7,2.6-2.5-0.1-4.3c-2.6-1.8-5.3-3.6-8-5.2c-1.7-1-3.3-3.4-5.1-2.5 c-1.9,0.9-0.6,3.6-0.9,5.5c-0.1,0.9,0.3,1.9-0.6,2.5c-1,0.7-1.9-0.2-2.7-0.7c-3.5-2.3-7-4.6-10.5-6.9c-1.8-1.2-2.8-0.8-2.8,1.4 C25.9,34.5,25.9,37.1,25.9,39.7z"}));var I=i.default.createElement("svg",{className:"menu-action",width:"75px",height:"75px"},i.default.createElement("path",{className:"colorsect",fill:"#4D4D4D",d:"M5.4,39.9c0,19,15.6,34.5,34.5,34.5c19,0,34.5-15.6,34.5-34.5c0-19-15.6-34.5-34.5-34.5 C20.9,5.4,5.4,21,5.4,39.9z"}),i.default.createElement("path",{fill:"#fff",d:"M40,55.3c-3.9,0-7.8,0.2-11.7,0c-5-0.3-7.9-4.2-6.4-8.5c1-2.8,3.2-4.2,5.9-4.2c8-0.1,15.9-0.2,23.9,0 c3.9,0.1,6.6,3,6.5,6.4c-0.1,3.4-2.7,6.1-6.7,6.3C47.8,55.4,43.9,55.2,40,55.3C40,55.3,40,55.3,40,55.3z M39.8,51.4 c3.7,0,7.4,0,11.1,0c1.9,0,3.6-0.3,3.5-2.6c0-2.2-1.7-2.4-3.4-2.4c-7.4,0-14.7,0-22.1,0c-1.7,0-3.3,0.3-3.4,2.5 c0,2.1,1.5,2.6,3.3,2.5C32.4,51.3,36.1,51.4,39.8,51.4z"}),i.default.createElement("path",{fill:"#fff",d:"M39.8,37.4c-3.9,0-7.8,0.1-11.7,0c-3.6-0.2-5.7-2.1-6.4-5.2c-0.6-2.9,0.6-5,3-6.6c1.3-0.8,2.8-1,4.3-1 c7.3,0,14.5-0.1,21.8,0c5.5,0.1,8.6,4,7.1,8.4c-1.1,3.2-3.7,4.3-6.8,4.4C47.3,37.5,43.5,37.4,39.8,37.4 C39.8,37.4,39.8,37.4,39.8,37.4z M39.9,28.5c-3.8,0-7.6,0-11.4,0c-1.7,0-3,0.5-3.1,2.4c-0.1,1.9,1.2,2.6,2.9,2.6c7.7,0,15.3,0,23,0 c1.7,0,3-0.6,2.9-2.6c-0.1-1.9-1.4-2.4-3.1-2.4C47.5,28.5,43.7,28.5,39.9,28.5z"}));function R(e){var t=(0,d.default)('<audio id="music" loop><source type="audio/mpeg"></audio>');var a=t[0];t.attr("src",e);t.appendTo("body");function n(){var e=a.play();if(e!==undefined){e.then(function(){}).catch(function(){})}}function r(e){a.volume=e}function s(){t.remove()}r(0);n();return{play:n,setVolume:r,close:s}}function A(e){var t=Math.floor(e/60);if(t<10)t="0"+t;e=e%60;if(e<10)e="0"+e;return t+":"+e}var z=function(e){P(t,e);function t(){var e;var a,n,r;O(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.opath="M95.8,115.4c1.5,1.4,3.2,2.8,4.9,4.2c1.7,1.4,3.4,2.8,5.1,4.1c1.7,1.3,3.5,2.7,5.3,4c1.8,1.3,3.6,2.4,5.4,3.6 c1.8,1.2,3.6,2.2,5.4,3.1c1.8,1,3.6,1.8,5.4,2.6c1.8,0.7,3.5,1.3,5.2,1.9c1.7,0.5,3.4,0.9,5,1.1c1.4,0.2,3,0.3,4.5,0.4 c1.5,0,3,0,4.5-0.1c1.5-0.1,3-0.3,4.5-0.5c1.5-0.3,3-0.5,4.4-1c1.4-0.4,2.9-0.9,4.2-1.4c1.3-0.5,2.7-1.3,4-2 c1.3-0.7,2.5-1.5,3.8-2.4c1.3-0.9,2.3-1.9,3.4-3c2.2-2.2,4.3-4.3,6.4-6.4c2.2-2.1,4.2-4.1,6.4-6c2.2-2,4.2-3.8,6.4-5.6 c2.2-1.8,4.3-3.4,6.6-4.9c2.2-1.5,4.5-2.9,6.8-4.1c2.3-1.3,4.8-2.2,7.3-3.1s5.1-1.5,7.8-2s5.6-0.7,8.5-0.7c3.6,0,7-0.4,10.2-1.2 c3.2-0.7,6.3-1.9,9.3-3.3c3-1.4,5.8-3.2,8.4-5.3c2.7-2.1,5.3-4.5,7.8-7.1c2.5-2.6,5-5.6,7.5-8.7c2.4-3.1,4.9-6.6,7.2-10.2 c2.4-3.6,4.8-7.4,7.2-11.3s4.9-8.1,7.4-12.4c0.8-1.4,1.7-2.8,2.8-4.1c1-1.3,2.2-2.6,3.3-3.8c1.2-1.2,2.4-2.2,3.8-3.2 c1.3-1,2.7-1.8,4.1-2.4c1.4-0.6,2.9-1.2,4.4-1.3s3.1-0.4,4.6-0.1c1.5,0.2,3.1,0.7,4.6,1.5c1.5,0.8,3,2,4.3,3.5 c1.7,1.9,3.8,4.3,6,6.9c2.2,2.6,4.9,5.4,7.6,8c2.7,2.6,5.7,5,8.6,6.9c3,1.9,6.1,3.2,9.2,3.7c1.3,0.3,2.6,0.4,3.9,0.5 c1.3,0.1,2.7,0.1,4.1,0.1s2.9-0.2,4.4-0.3c1.5-0.1,3.1-0.4,4.8-0.7c2.2-0.4,4.4-0.7,6.6-0.9c2.2-0.2,4.3-0.2,6.5-0.2 c2.2,0,4.2,0.3,6.3,0.6c2.1,0.4,4.1,0.8,6.1,1.3c2,0.6,4,1.3,5.8,2.2s3.7,1.9,5.5,3.1c1.8,1.2,3.4,2.5,5,4c1.6,1.5,3.1,3.1,4.6,4.9 c0.9,1.3,1.8,2.5,2.6,3.8c0.9,1.3,1.7,2.5,2.5,3.8c0.8,1.3,1.6,2.5,2.5,3.8c0.8,1.3,1.6,2.4,2.4,3.7c0.8,1.3,1.6,2.4,2.4,3.6 s1.6,2.3,2.5,3.5c0.8,1.2,1.7,2.3,2.5,3.4c0.9,1.2,1.7,2.2,2.6,3.3c2,2.2,4,3.9,6.3,5.1c2.2,1.3,4.4,2.2,6.7,2.6 c2.3,0.5,4.7,0.7,7,0.5c2.3-0.2,4.8-0.5,7.2-1.1c2.4-0.6,4.8-1.4,7.1-2.3s4.7-2.1,6.8-3.2c2.2-1.2,4.4-2.4,6.5-3.7 c2.1-1.3,4-2.5,5.8-3.7c3.4-2.2,6.6-3.7,9.6-4.3c3-0.6,5.8-0.5,8.4,0.1c2.6,0.6,5.1,1.9,7.5,3.4c2.4,1.6,4.7,3.6,7,5.8 c2.2,2.2,4.5,4.6,6.8,7c2.3,2.4,4.6,4.9,7,7.3c2.4,2.3,4.9,4.6,7.5,6.5c2.6,1.9,5.4,3.5,8.4,4.6c1.8,0.7,3.6,1.2,5.4,1.3 c1.8,0.3,3.5,0.3,5.2,0.2s3.4-0.4,5.1-0.9c1.7-0.4,3.3-1,5-1.7c1.7-0.6,3.3-1.4,4.9-2.2c1.6-0.8,3.2-1.7,4.9-2.6 c1.6-0.9,3.2-1.9,4.9-2.8c1.6-0.9,3.2-1.9,4.9-2.8c2-0.9,4-1.5,5.8-2s3.8-0.6,5.6-0.6c1.8,0,3.5,0.3,5.2,0.7s3.3,1.2,4.9,2 c1.5,0.9,3.1,2,4.4,3.2c1.4,1.3,2.7,2.8,4,4.5c1.3,1.7,2.3,3.6,3.4,5.7c1.1,2.1,2,4.3,2.9,6.7c0.9,2.4,1.6,5.1,2.4,7.8 s1.6,5.7,2.5,8.5c0.9,2.9,1.8,5.8,2.9,8.7c1.1,2.9,2.2,5.7,3.5,8.3c1.3,2.6,2.8,5,4.6,7.3c1.7,2.2,3.7,4.1,5.9,5.7 c2.2,1.5,4.8,2.8,7.5,3.5c2.9,0.7,6,1,9.6,0.7c1.2-0.1,2.2-0.3,3.4-0.6c1.2-0.4,2.2-0.8,3.3-1.3s2.2-1.3,3.3-2.1 c1.1-0.8,2.2-1.7,3.2-2.7c1.1-1,2.1-2.1,3.1-3.3c1-1.3,2-2.5,3-3.9c1-1.3,1.9-2.8,2.8-4.3c0.9-1.5,1.7-3.1,2.5-4.9 c0.8-1.6,1.5-3.2,2.2-4.9c0.7-1.6,1.4-3.3,2.2-4.9c0.7-1.6,1.4-3.3,2.2-4.9c0.8-1.5,1.6-3.1,2.5-4.8c0.9-1.5,1.8-3.1,2.9-4.4 c1.1-1.3,2.2-2.8,3.4-4c1.3-1.3,2.6-2.5,4.1-3.6c1.5-1.1,3.1-2.2,4.9-3.1c0.9-0.4,1.8-0.6,2.7-0.9c0.9-0.3,1.8-0.4,2.7-0.5 c0.9-0.2,1.8-0.2,2.7-0.2s1.8,0,2.7,0.1s1.8,0.3,2.7,0.4c0.9,0.2,1.8,0.4,2.7,0.6c0.9,0.3,1.8,0.5,2.7,0.8c0.9,0.3,1.8,0.6,2.7,1 c1.4,0.7,2.9,1.4,4.3,2.2c1.4,0.7,3,1.4,4.4,2.2c1.5,0.7,3,1.3,4.5,1.9c1.5,0.5,3.1,1.1,4.6,1.5c1.5,0.4,3.1,0.7,4.7,0.9 c1.6,0.2,3.2,0.2,4.9,0.1c1.6-0.1,3.3-0.4,4.9-0.9c1.7-0.4,3.4-1.2,5.1-2.1c1.1-0.5,2.2-1.2,3.1-1.8c1-0.6,1.9-1.3,2.8-2.1 c0.9-0.7,1.7-1.4,2.4-2.2c0.7-0.7,1.4-1.5,2.1-2.3c0.6-0.8,1.3-1.5,1.8-2.3s1.1-1.5,1.5-2.3s0.9-1.5,1.3-2.2c0.4-0.7,0.7-1.4,1-2.1 c0.8-1.8,1.5-3.6,2.3-5.5c0.8-1.9,1.6-3.8,2.5-5.6c0.9-1.9,1.8-3.7,2.8-5.6c1-1.9,2-3.6,3.1-5.3c1.1-1.7,2.3-3.3,3.6-4.9 c1.3-1.6,2.7-3.1,4.1-4.3c1.4-1.3,3.1-2.5,4.8-3.6c1.7-1.1,3.6-2,5.6-2.7c1.4-0.4,2.9-0.5,4.2-0.5c1.3,0,2.8,0.2,4.1,0.5 c1.3,0.4,2.6,0.8,4,1.4c1.3,0.6,2.5,1.3,3.7,2.2c1.2,0.8,2.3,1.7,3.4,2.7c1.1,1,2.1,2,3.1,3.1s1.9,2.2,2.7,3.2 c0.8,1.1,1.6,2.2,2.3,3.3c1.1,1.6,2.2,3.4,3.2,5.2s2.2,3.6,3.4,5.4s2.2,3.6,3.3,5.4c1.1,1.8,2.2,3.4,3.1,5c1,1.6,1.9,3.1,2.8,4.4 c0.8,1.3,1.5,2.5,2.2,3.5c0.6,1,1.1,1.7,1.4,2.2",a),M(n,r)}s(t,[{key:"componentDidMount",value:function e(){this.path=(0,C.default)(this.opath);setTimeout(this.animate_bar.bind(this),this.props.delay||0);this.progress_base.setAttribute("d",this.opath)}},{key:"animate_bar",value:function e(){var t=this.path;var a="";var n=0;var r=this.props.percent;var s=t.length*r/100;var l=1;for(var i=0;i<s;i++){l=Math.min(2,l*1.01);setTimeout(function(){if(!this.progress_bar)return;if(n==1)(0,d.default)(this.progress_circle_begin).attr("stroke","#33ACE0");var e=t[n];a+=e[0]+e.slice(1).join(",");this.progress_bar.setAttribute("d",a);var l=Math.floor(n/((s-1)/r));this.progress_percent.innerHTML=l+"%";if(l==100){(0,d.default)(this.progress_circle_end).attr("stroke","#33ACE0")}n++}.bind(this),i*7*l)}}},{key:"render",value:function e(){var t=this;return i.default.createElement("div",{className:"fancy-progress-bar"},i.default.createElement("svg",{viewBox:"0 0 980 200"},i.default.createElement("path",{d:"",stroke:"#ccc",strokeWidth:"5",ref:function e(a){return t.progress_base=a},fill:"transparent"}),i.default.createElement("path",{d:"",stroke:"#33ACE0",strokeWidth:"5",ref:function e(a){return t.progress_bar=a},fill:"transparent"}),i.default.createElement("g",{ref:function e(a){return t.percentg=a},style:{transform:"translate(890px, 50px)"}},i.default.createElement("text",{fontFamily:"Verdana",fontSize:"23",ref:function e(a){return t.progress_percent=a},stroke:"#999"})),i.default.createElement("circle",{cx:"51",cy:"110",r:"45",stroke:"#ccc",strokeWidth:"5",fill:"transparent",ref:function e(a){return t.progress_circle_begin=a}}),i.default.createElement("g",{transform:"translate(30, 82) scale(0.8, 0.8)"},i.default.createElement("path",{className:"svgfill",d:"M26.9,3.4c12.7,0,21.6,12.7,17,24.6c-2.8,7.4-7.9,13.2-13.5,18.6c-1.9,1.9-4.7,2-6.7,0.2c-6.4-6-12.4-12.5-14.6-21.2C6.4,14.3,15.2,3.4,26.9,3.4z M27,13.8c-4.3,0-7.9,3.4-8,7.7c-0.1,4.2,3.7,8.1,7.9,8.1c4.2,0,7.8-3.6,7.8-7.9C34.8,17.4,31.3,13.8,27,13.8z"}),i.default.createElement("path",{className:"svgfill",d:"M19.1,54.6l-0.5-3.1c3.6-0.5,6.4-0.5,6.5-0.5l0,3.2C25.2,54.1,22.5,54.1,19.1,54.6z"}),i.default.createElement("path",{className:"svgfill",d:"M42.3,67.8c-3.6-0.3-8-0.4-12.2-0.6L28,67.2l0.1-3.2l2.1,0.1c4.2,0.1,8.6,0.3,12.3,0.6L42.3,67.8z M24.4,67.1c-5.1-0.2-10.9-0.6-14.6-1.6l0.8-3.1c3.5,0.9,9,1.3,13.9,1.5L24.4,67.1z M6,63.7c-1.1-1-1.4-2.1-1.4-2.8c0-0.2,0-0.5,0.1-0.8c0.8-3.8,4.2-6.4,10.3-7.9l0.8,3.1c-3.3,0.8-7.4,2.4-8,5.5c0,0,0,0.1,0,0.1c0,0.1,0,0.2,0.3,0.5L6,63.7z"}),i.default.createElement("path",{className:"svgfill",d:"M51.3,69.7c-1-0.6-2.8-1.1-5.5-1.4l0.4-3.1c3.1,0.4,5.3,1,6.7,1.9L51.3,69.7z"})),i.default.createElement("circle",{cx:"912",cy:"107",r:"45",stroke:"#ccc",strokeWidth:"5",fill:"transparent",ref:function e(a){return t.progress_circle_end=a}}),i.default.createElement("g",{transform:"translate(886, 82) scale(0.8, 0.8)"},i.default.createElement("line",{className:"svgstroke",x1:"42.2",y1:"6.4",x2:"42.2",y2:"63.8"}),i.default.createElement("polygon",{className:"svgfill",points:"7.4,22.4 42.2,10.7 42.2,34.2"}),i.default.createElement("ellipse",{className:"svgfill",cx:"35.9",cy:"63.8",rx:"15.8",ry:"2.9"}))))}}]);return t}(i.default.Component);var U=(n=(0,b.translate)(["common"],{wait:true}),n(r=function(e){P(t,e);s(t,[{key:"change_player_speed",value:function e(t){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=this.refs.player;var r=this.music;if(!n)return;var s={rate:n.playbackRate};if(this.cur_tm)this.cur_tm.kill();this.cur_tm=f.TweenMax.to(s,a,{rate:t,onUpdate:function e(){if(r)r.setVolume(Math.max(s.rate/2,.04));try{n.playbackRate=s.rate}catch(e){}}})}}]);function t(e){O(this,t);var a=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={show_result_page:false,showPlayButton:false};a.playVideo=function(){var e=a.refs.player;var t=e.play();if(t!==undefined){t.then(function(){a.setState({showPlayButton:false});a.music.play();a.core.attach_capture()}).catch(function(){a.setState({showPlayButton:true});a.core.detach_capture()})}};var n=e.lesson,r=e.profile;var s=a.props.t;var l=a.core=new v.default({lesson_id:n.id,text:n.videotyping.text,profile_block_on_errors:2,max_secs:60*10,t:s});l.attach_capture();var i=l.events;i.on("keydown",function(e){if(e.is_valid){if(this.slow_animation_timeout)clearTimeout(this.slow_animation_timeout);this.change_player_speed(1,2);this.slow_animation_timeout=setTimeout(function(){this.change_player_speed(0,3)}.bind(this),2e3)}else{this.change_player_speed(0,1)}}.bind(a));i.on("end",function(e){if(!this.props.lesson.push_result_url){return console.warn("push_result_url is not available")}if(e.is_partial&&!r.save_partial_attempts)return;(0,d.default)(this.refs.typable).remove();api.postTypingResults(e,function(e){this.setState({show_result_page:true,attempt:e});setTimeout(function(){(0,d.default)(this.ressect).addClass("active")}.bind(this),500);setTimeout(function(){if(window.is_basic&&!window.hide_ads){var e=function e(){return(0,k.LaunchStudentPlansModal)(function(){return(0,d.default)("#vt_ad1").fadeOut()},null,"VideoTypingResult")};if(this.ad_container1)S.default.plug_ads([{id:"vt_ad1",slot:"1180881973",parent:(0,d.default)(this.ad_container1)}],e)}}.bind(this),1e3)}.bind(this))}.bind(a));a.render_props=(0,g.get_render_props)("story");return a}s(t,[{key:"componentDidMount",value:function e(){var t=this.refs.player,a=(0,d.default)(t);this.playVideo();t.playbackRate=0;a.css("opacity",0);if(window.binfo&&window.binfo.browser=="Edge")setTimeout(function(){t.load();t.play();setTimeout(function(){return t.playbackRate=0},400)},2e3);t.addEventListener("loadeddata",function(){a.animate({opacity:1},2e3)},false);var n=this.typable=new g.Typable(this.refs.typable,this.render_props,this.core);this.keepinview=new y.default.KeepInView(n,this.render_props.line_transition,0);this.keepinview.set_linecount(5);var r=this.props.lesson.videotyping;if(r.soundtrack){this.music=new R(r.soundtrack)}this.updateLineCount();approuter.events.on("unload",function(){core.detach_capture();if(core.has_started&&!core.has_ended)core.end_lesson(true)}.bind(this))}},{key:"updateLineCount",value:function e(){if(this.typable_height)this.keepinview.set_linecount(Math.floor(this.typable_height/this.typable.facts.line_h_allin)-1)}},{key:"componentDidUpdate",value:function e(){this.typable.clean_rerender();this.updateLineCount()}},{key:"componentWillUnmount",value:function e(){if(this.music)this.music.close()}},{key:"redoLesson",value:function e(){document.location=approuter.current_app.canonical_url}},{key:"handleMenu",value:function e(){if(approuter.program&&approuter.lesson)approuter.goto_url(approuter.program.resource_uri,approuter.lesson.lesson_plan_url);else approuter.dashboard()}},{key:"handleNext",value:function e(){var t=this.state.attempt;approuter.goto_url(t.url,t.canonical_url)}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.lesson,r=n.videotyping;var s=this.props.t;var l=640,o=400,c=l/parseFloat(o),u=c-c*.08,d=c+c*.08,f=a.window_width,p=a.window_height,m=f/p;var v={position:"absolute"};var _={};var y=m<d&&m>u;if(y){if(m<c){var g=p/o;var b=p*c;var k=-(b-f)/2;Object.assign(_,{height:p,width:"auto",marginLeft:k});Object.assign(v,{marginLeft:k})}else{var g=f/l;var w=f/c;var E=-(w-p)/2;Object.assign(_,{width:f,height:"auto",marginTop:E});Object.assign(v,{marginTop:E})}}else{_={};if(m<c){var g=f/l;var w=f/c;var E=(p-w)/2;Object.assign(_,{width:f,height:"auto",marginTop:E});Object.assign(v,{marginTop:E})}else{var g=p/o;var b=p*c;var k=(f-b)/2;Object.assign(_,{height:p,width:"auto",marginLeft:k});Object.assign(v,{marginLeft:k})}}Object.assign(v,{fontSize:12*g,top:r.top*g,left:r.left*g,width:r.width*g,height:r.height*g});this.typable_height=v.height;var x=this.state.attempt;var C=Math.floor(approuter.lesson.lesson_index*100/approuter.program.lesson_count);return i.default.createElement("div",{ref:"root"},!this.state.show_result_page&&i.default.createElement(h.default,{name:n.lesson_index+": "+n.name,profile:profile,display:"videotyping"}),i.default.createElement("video",{ref:"player",style:_,loop:true,playsInline:true},i.default.createElement("source",{src:r.url,type:"video/mp4"})),this.state.showPlayButton&&i.default.createElement("div",{className:"play-button",onClick:this.playVideo},s("Click here to begin")),i.default.createElement("div",{style:v},i.default.createElement("div",{ref:"typable",className:"story_typable typable mono_standard"})),this.state.show_result_page&&i.default.createElement("div",{className:"ressect",ref:function e(a){return t.ressect=a}},i.default.createElement("div",{className:"content"},window.is_basic&&!window.hide_ads?i.default.createElement("div",{className:"progress-wrapper with-ads"},i.default.createElement(z,{delay:2500,percent:C,small:true}),i.default.createElement("div",{className:"ads",ref:function e(a){return t.ad_container1=a}})):i.default.createElement("div",{className:"progress-wrapper"},i.default.createElement(z,{delay:2500,percent:C})),i.default.createElement("div",{className:"text-content"},i.default.createElement("div",{className:"column1"},i.default.createElement("div",{className:"lesson-name"},this.props.lesson.name),i.default.createElement("div",{className:"lesson-text"},r.text)),i.default.createElement("div",{className:"column2"},i.default.createElement("div",{className:"metrics"},i.default.createElement("div",{className:"top"},i.default.createElement("div",null,i.default.createElement("div",{className:"m-label"},s("Speed")),i.default.createElement("div",{className:"m-value"},x.wpm,i.default.createElement("span",{className:"m-sublabel"},s("wpm")))),i.default.createElement("div",null,i.default.createElement("div",{className:"m-label"},s("Accuracy")),i.default.createElement("div",{className:"m-value"},x.real_accuracy,"%"))),i.default.createElement("div",{className:"bottom"},i.default.createElement("div",null,i.default.createElement("div",{className:"m-label"},s("Duration")),i.default.createElement("div",{className:"m-value"},A(parseInt(x.msecs/1e3)))),i.default.createElement("div",null,i.default.createElement("div",{className:"m-label"},s("Overall Time")),i.default.createElement("div",{className:"m-value"},A(parseInt(x.game_msecs/1e3)))))),i.default.createElement("div",{className:"buttons"},i.default.createElement("a",{className:"btn-wrapper",href:"#",onClick:this.handleMenu.bind(this)},I),i.default.createElement("a",{className:"btn-wrapper",href:"#",onClick:this.redoLesson.bind(this)},j),i.default.createElement("a",{className:"btn-wrapper",href:"#",onKeyUp:function(e){if(e.keyCode==13)this.handleNext()}.bind(this),onClick:this.handleNext.bind(this)},L)))))))}}]);return t}(i.default.Component))||r);function D(e,t){return i.default.createElement(c.default,{key:"videotyping_"+e.resource_uri,styles:[],darkerBody:true,scroll:false,header:false,hasSize:true},i.default.createElement(U,{lesson:e,profile:t}))}e.exports=D},980:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r,s;var l=a(1);var i=O(l);var o=a(42);var c=O(o);var u=a(299);var d=O(u);var f=a(123);var p=a(8);var h=O(p);var m=a(146);var v=O(m);var _=a(77);var y=O(_);var g=a(451);var b=O(g);var k=a(981);var w=O(k);var E=a(12);var x=O(E);var C=a(20);var N=a(298);var S=a(18);var T=O(S);function O(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function j(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function L(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var I=function e(t){var a=t.today,n=t.attempts,r=t.playback_attempt,s=t.profile,l=t.t;c.default.locale(s.language);return i.default.createElement("table",{className:"res-table",cellSpacing:"0",cellPadding:"0"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,l("When")),i.default.createElement("th",null,l("Speed")),i.default.createElement("th",null,l("Accuracy")),i.default.createElement("th",null,l("Real Accuracy")),i.default.createElement("th",null,l("Score")),i.default.createElement("th",null,l("Stars")),i.default.createElement("th",null,l("Duration")),i.default.createElement("th",null))),i.default.createElement("tbody",null,n.map(function(e,t){return i.default.createElement("tr",{key:t,className:t%2?"even-row":""},i.default.createElement("td",null,(0,c.default)(e.created).from(a)),i.default.createElement("td",null,e.wpm," ",l("wpm"),e.wpm_change?e.wpm_change>0?i.default.createElement("sup",{className:"pos-change"},"+",e.wpm_change,i.default.createElement("sup",null," ",l("wpm"))):i.default.createElement("sup",{className:"neg-change"},e.wpm_change,i.default.createElement("sup",null," ",l("wpm"))):null),i.default.createElement("td",null,e.accuracy,"%",e.accuracy_change?e.accuracy_change>0?i.default.createElement("sup",{className:"pos-change"},"+",e.accuracy_change,"%"):i.default.createElement("sup",{className:"neg-change"},e.accuracy_change,"%"):null),i.default.createElement("td",null,e.real_accuracy,"%"),i.default.createElement("td",null,L(e.score)),i.default.createElement("td",null,e.stars&&i.default.createElement("img",{src:STATIC_URL+"STARS/"+e.stars+"s5.png",style:{width:100}})),i.default.createElement("td",null,i.default.createElement("img",{src:STATIC_URL+"t/clock.png"})," ",e.duration.split(" ")[0]+" "+l(e.duration.split(" ")[1])),i.default.createElement("td",null,i.default.createElement("button",{className:"btn btn-primary btn-xs",style:{width:"35px"},onClick:function t(){return r(e)}},i.default.createElement("i",{className:"icon icon-controller-play"}))))})))};var R=(r=(0,C.translate)(["common","badge"],{wait:true}),r(s=function(e){j(t,e);function t(e){M(this,t);var a=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.render_props=(0,f.get_render_props)("normal");var n=a.props.attempt;a.can_redo=true;a.hide_score=false;a.min_stars=e.team.min_stars||1;if(n.details.render_engine=="logographic"){a.render_props.logographic=true}a.hide_requirements=n.lesson.typing.min_wpm==0;a.hide_score=n.lesson.objective_completion;if(window.is_tp){try{x.default.trackAdwordsConv(1003463654,"m5TjCOWdh3IQ5se-3gM");x.default.trackAdwordsConv(1003463654,"1HpwCMyih3IQ5se-3gM")}catch(e){}}return a}n(t,[{key:"playback_attempt",value:function e(t){(0,b.default)(t.resource_uri,this.props.profile)}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.t,r=a.min_accuracy,s=a.difficulty;var l=this.props.attempt;var o=this.render_props;var u=l.lesson.typing;if(!this.hide_requirements&&(r||u.min_wpm||u.goal_wpm)){var d=i.default.createElement("div",{id:"res_left_sec",tabIndex:"2","aria-label":"Requirements for this lesson are: accuracy of "+r+" percent, min speed of "+u.min_wpm+" wpm and goal speed of"+u.goal_wpm+" wpm"},i.default.createElement("h2",null,n("Requirement:")),i.default.createElement("p",null,i.default.createElement("span",null,r,"%"),i.default.createElement("span",null),i.default.createElement("span",null,n("accuracy"))),i.default.createElement("p",null,i.default.createElement("span",null,u.min_wpm+s),i.default.createElement("span",null,n("WPM")),i.default.createElement("span",null," ",n("speed"))),i.default.createElement("p",null,i.default.createElement("span",null,u.goal_wpm+s),i.default.createElement("span",null,n("WPM")),i.default.createElement("span",null," ",n("speed goal"))))}if(this.state&&this.state.lesson_attempts.length>1){var f=this.state.lesson_attempts;var p=(0,c.default)();var m=function e(t){var a=(0,c.default)(t);if(p.diff(a,"days"))return a.format("MM/DD/Y");else return a.format("LT")};var _=f.map(function(e){return m(e.created)}).reverse();var y={title:{text:n("Speed WPM"),x:-20},xAxis:{categories:_},tooltip:{valueSuffix:n("WPM")},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},credits:{enabled:false},yAxis:{min:0},series:[{name:n("Speed (WPM)"),data:f.map(function(e){return e.wpm}).reverse(),showInLegend:false}]};var g={title:{text:n("Accuracy"),x:-20},xAxis:{categories:_},credits:{enabled:false},tooltip:{valueSuffix:"%"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},yAxis:{min:0,max:100},series:[{name:n("Accuracy"),data:f.map(function(e){return e.accuracy}).reverse(),showInLegend:false}]};var b=i.default.createElement("div",{id:"attempt-progress-sect"},i.default.createElement("h3",null,n(l.lesson.is_test?"Progress":"Lesson Progress")),i.default.createElement("p",null,n("Your previous attempts on this lesson:")),i.default.createElement(I,{profile:this.props.profile,t:n,attempts:f,today:p,playback_attempt:this.playback_attempt.bind(this)}),i.default.createElement(v.default,{id:"lesson_progress_chart",className:"chart_box",options:y}),i.default.createElement(v.default,{id:"lesson_accuracy_chart",className:"chart_box",options:g}))}if(l.details.lesson_text){var k=i.default.createElement("div",{ref:"replay_sect"},i.default.createElement("a",{className:"pull-right btn btn-link",onClick:function e(){return t.playback_attempt(t.props.attempt)},style:{marginTop:10}},n("Replay"),i.default.createElement("i",{className:"icon icon-controller-play",style:{display:"inline-block"}})),i.default.createElement("h3",null,n("Review Performance")),i.default.createElement("div",{className:"tpmodes "+o.display_className+" "+o.size},i.default.createElement("div",{className:"typable mono_standard",ref:"typable"})))}var w=window.is_basic&&!window.hide_ads;return i.default.createElement("div",null,i.default.createElement("div",{className:"result_arena",ref:"result_arena"}),i.default.createElement("div",{className:"res_sec",ref:"res_sec"},i.default.createElement("h3",{ref:"explanation",className:"res_expl",tabIndex:"1"}),i.default.createElement("div",{className:"res_right_sec",tabIndex:"1","aria-label":"your score is: "+l.score+"with real accuracy of "+l.real_accuracy+"% and speed of "+l.wpm+" wpm in "+l.duration+" seconds."},i.default.createElement("h2",null,n("Your Score"),":"),i.default.createElement("p",null,i.default.createElement("span",null,Math.min(100,l.accuracy),"%"),i.default.createElement("span",null),i.default.createElement("span",null,"Â ",n("accuracy"))),i.default.createElement("p",null,i.default.createElement("span",null,l.real_accuracy,"%"),i.default.createElement("span",null),i.default.createElement("span",null,"Â ",n("real accuracy"))),i.default.createElement("p",null,i.default.createElement("span",null,l.wpm),i.default.createElement("span",null,n("WPM")),i.default.createElement("span",null,"Â ",n("speed"))),i.default.createElement("p",null,i.default.createElement("span",null,l.duration),i.default.createElement("span",null,"Â ",n("seconds")),i.default.createElement("span",null,"Â ",n("duration")))),l.lesson.is_test?null:i.default.createElement("div",{className:"sep_vline"}),d),i.default.createElement("div",{id:"ad_box_1"}),i.default.createElement("div",{id:"ad_box_2"}),i.default.createElement("div",{id:"res_end_content"},this.props.profile.is_anonymous&&l.lesson.index>10&&i.default.createElement("div",{id:"res_save_progress",style:{padding:3,textAlign:"center",background:"#fdf6b4",borderRadius:15,margin:"0 auto 20px",width:500}},n("You have not yet saved your progress.")," ",i.default.createElement("button",{className:"btn btn-link",onClick:function e(a){return t.launchSaveWork()}},n("Save my work")),i.default.createElement("button",{className:"btn btn-link",onClick:function e(){return(0,h.default)("#res_save_progress").hide()}},n("Later"))),i.default.createElement("div",{id:"res_menu"},i.default.createElement("a",{role:"button",className:"action-btn menu-icon hint--top hint--rounded",tabIndex:"3","aria-label":n("main menu")+(w?"":" (Ctrl + h)"),onKeyUp:function(e){if(e.keyCode==13)this.handleMenu()}.bind(this),onClick:this.handleMenu.bind(this)}),this.can_redo?i.default.createElement("a",{role:"button",className:"action-btn redo-icon hint--top hint--rounded",tabIndex:"4","aria-label":n("redo this lesson")+(w?"":" (Ctrl + r)"),onKeyUp:function(e){if(e.keyCode==13)this.handleRedo()}.bind(this),onClick:this.handleRedo.bind(this)}):null,l.next_lesson_url?i.default.createElement("a",{role:"button",onKeyUp:function(e){if(e.keyCode==13)this.handleNext()}.bind(this),tabIndex:"5","aria-label":n("go to next lesson")+(w?"":" (Ctrl + f)"),className:"action-btn next-icon hint--top hint--rounded",onClick:this.handleNext.bind(this)}):i.default.createElement("i",null)),i.default.createElement("div",{className:"lesson-details"},i.default.createElement("span",{className:"lesson-details-label"},n("Lesson")," #",l.lesson.lesson_index,": "),l.lesson.name),k,b))}},{key:"launchSaveWork",value:function e(){var t=this;approuter.show_modal(i.default.createElement(T.default,{show_x:true,id:"save-progress-modal",width:650},i.default.createElement(N.SignupWithValidEmailView,{profile:this.props.profile,onSuccess:function e(){(0,h.default)("#res_save_progress").html(t.props.t("Profile created. Your progress is saved.")).css({background:"#d3ef97",padding:10});approuter.hide_modal("save-progress-modal",true)}})))}},{key:"handleMenu",value:function e(){approuter.exit_lesson()}},{key:"handleRedo",value:function e(){var t=this.props.attempt.lesson;approuter.goto_url(t.resource_uri,t.canonical_url)}},{key:"handleNext",value:function e(){var t=this.props.attempt;approuter.goto_url(t.next_lesson_url,t.next_lesson_canonical_url)}},{key:"_keydown_handler",value:function e(t){if(!t.key)return;if(!t.ctrlKey)return;if(window.is_basic&&!window.hide_ads)return;var a=t.key.toLowerCase();if(a=="h")this.handleMenu();if(a=="r")this.handleRedo();if(a=="f"){var n=this.props.attempt;if(n.next_lesson_url&&!n.is_score_zero)this.handleNext()}t.stopPropagation();t.preventDefault()}},{key:"componentDidMount",value:function e(){this.keydown_handler=this._keydown_handler.bind(this);(0,h.default)(document).keydown(this.keydown_handler);if(window.is_basic&&!window.hide_ads)this.plug_ads();if(this.hide_score){var t=(0,h.default)(this.refs.result_arena);t.animate({opacity:1},800/this.props.attempt.speed,"expoout");Object.assign(this.refs.explanation.style,{fontSize:"2.5em",marginTop:"-170px",marginBottom:"100px"});this.continue_with_showing_stats()}else this.start_result_animation()}},{key:"componentWillUnmount",value:function e(){(0,h.default)(document).unbind("keydown",this.keydown_handler)}},{key:"start_result_animation",value:function e(){var t=this.props.attempt;var a=(0,h.default)(this.refs.result_arena);a.animate({opacity:1},800/t.speed,"expoout");var n=(0,h.default)('<div id="res_white_shade"></div>');a.append(n);var r=(0,h.default)("<div />").addClass("star_bg star_bg_flash").css("opacity",0);a.append(r);var s=(0,h.default)("<div />").addClass("star_bg").attr("id","star_holder");a.append(s);(0,E.setTimeout)(function(){s.hide().fadeIn("slow")},800/t.speed);(0,E.setTimeout)(this.animate_points_and_stars.bind(this),1e3/t.speed)}},{key:"animate_points_and_stars",value:function e(){var t=this.props.attempt;var a=t.stars,n=t.score,r=t.lesson.score;var s=0;for(var l=0;l<a;l++){(0,E.setTimeout)(function(){this.show_star(s);s++}.bind(this),470*l/t.speed)}if(n>=r){(0,E.setTimeout)(function(){(0,h.default)(".star-white").animate({opacity:1},230,"easeOut");(0,h.default)(".star-flashing").stop().fadeTo(120,1).fadeTo(800,.1);(0,h.default)(".star-flashing").addClass(".silver-star-flashing");(0,h.default)("#star_holder").css("-webkit-transform","scale(1.05)");this.show_high_score()}.bind(this),(a*185+(1+a)*350+400)/t.speed)}else{(0,E.setTimeout)(this.show_high_score.bind(this),470*a/t.speed)}(0,E.setTimeout)(function(){this.show_score(n,(1+a)*250)}.bind(this),a*300/t.speed)}},{key:"show_high_score",value:function e(){var t=this.props.attempt;if(t.is_high_score){var a=(0,h.default)("<img />").attr({id:"res_highscore",src:STATIC_URL+"engine/img/end/highscore-glow.png"});(0,h.default)(this.refs.result_arena).append(a);(0,h.default)("#res_highscore").css({width:500,opacity:0,marginLeft:34,marginTop:-200});(0,h.default)("#res_highscore").animate({width:135,opacity:1,marginLeft:264,marginTop:0},450,"easeIn");(0,h.default)("#res_highscore").css({"-webkit-transform":"rotateZ(10deg)"})}this.show_badges()}},{key:"show_star",value:function e(t){var a=(0,h.default)("<div />").addClass("astar");a.css("marginLeft",112*(t-2.5));var n=(0,h.default)("<img />").attr("src",STATIC_URL+"engine/img/end/white_star.png").addClass("star-white").css("opacity",0);var r=(0,h.default)("<img />").attr("src",STATIC_URL+"engine/img/end/star-flashing.png").addClass("star-flashing");var s=(0,h.default)("<img />").attr("src",STATIC_URL+"engine/img/end/star-active.png");a.append(r);a.append(n);a.append(s);(0,h.default)("#star_holder").append(a);(0,E.setTimeout)(function(){r.fadeTo(2e3,0)})}},{key:"show_score",value:function e(t,a){var n=this.props.attempt;var r=(0,h.default)("<div />").addClass("res_score_box");var s=(0,h.default)("<div />").addClass("res-score");var l=(0,h.default)("<div />").addClass("res-score-reflection");var i=(0,h.default)("<div />").addClass("res-score-shadow");var o=60;var c=1e3/o;var u=parseInt(a/1e3*o);var d=parseInt(t/u);var f=0;for(var p=0;p<u;p++){(0,E.setTimeout)(function(){f+=d;s.html(f);l.html(f)},p*c/n.speed)}(0,E.setTimeout)(function(){s.html(t);l.html(t)},(a+10)/n.speed);r.append(s);r.append(l);r.append(i);(0,h.default)(this.refs.result_arena).append(r)}},{key:"show_one_badge",value:function e(t,a){var n=this.props.attempt;var r=(0,h.default)("<img />").attr("src",STATIC_URL+"badges/"+t.graphic_active);r.css({width:"245px",margin:"17px 0px 0px"});var s=(0,h.default)("<div />").append(r).addClass("badge_box");var l=(0,h.default)("<div />").addClass("badgebg");var i=this.props.t;(0,h.default)(l).append(s);(0,h.default)(this.refs.result_arena).append(l);l.addClass("animated bounceIn");var o=(0,h.default)("<div />").addClass("badge_text");o.append((0,h.default)("<div />").addClass("badge_text_title").html(i(t.name)));o.append((0,h.default)("<div />").addClass("badge_text_txt").html(i(t.description)));o.append((0,h.default)("<div />").addClass("new_badge").html(i("New Badge")));o.attr("tabIndex","7");o.attr("aria-label",i("Congratulations! you have earned the following badge: ")+i(t.name)+", "+i(t.description));(0,h.default)(this.refs.result_arena).append(o);o.focus();var c=(0,h.default)("<input type='button' value='"+i("Continue")+" &raquo;' />").addClass("next_btn");o.append(c);s.addClass("hoja");var u=function(){c.remove();s.addClass("faster4");l.removeClass("animated bounceIn");l.addClass("animated bounceOut");(0,E.setTimeout)(function(){l.remove();o.remove();a()},800)}.bind(this);c.click(u)}},{key:"show_badges",value:function e(){var t=this.props.attempt;if(!t.badges||t.badges.length==0)return this.continue_with_showing_stats();(0,h.default)(".star_bg").hide();(0,h.default)(".res_score_box").hide();(0,h.default)("#res_highscore").hide();var a=0;var n=function(){var e=t.badges[a];if(e){this.show_one_badge(e,n);a++}else{(0,h.default)(".star_bg").show();(0,h.default)(".res_score_box").show();(0,h.default)("#res_highscore").show();this.continue_with_showing_stats()}}.bind(this);n()}},{key:"continue_with_showing_stats",value:function e(){var t=(0,h.default)(this.refs.res_sec);var a=this.explain_results();var n=this.props.t;var r=this.props.attempt;var s=r.stars,l=r.score;var t=(0,h.default)(this.refs.res_sec);var i=n("Lesson finished, You have earned {{number_stars}} stars, Your score is {{score}}",{number_stars:s,score:l});i=i+" . "+a;(0,h.default)(this.refs.explanation).html(this.explanation||r.explanation);(0,h.default)(this.refs.explanation).attr("aria-label",i);t.css({opacity:.4,marginTop:-20});(0,h.default)(this.refs.result_arena).append(t);t.show().animate({opacity:1,marginTop:0},1e3,"bounceout");(0,E.setTimeout)(function(){(0,h.default)(this.refs.result_arena).animate({top:-150},700,"easeIn");this.end_show_content();(0,h.default)(this.refs.explanation).focus()}.bind(this),800/r.speed)}},{key:"explain_results",value:function e(){var t=this.props,a=t.attempt,n=t.t,r=t.min_accuracy,s=t.difficulty;var l;if(a.lesson.is_test){l=n("Thank you for taking the test.");if(a.lesson.failable&&a.score==0)l=n("You did not pass the test.")+(this.can_redo?" "+n("Try again."):"")}else{var i=[n("Nice job"),n("Excellent work"),n("Good job"),n("Good work"),n("Well done")];var o=i[Math.floor(Math.random()*i.length)];var c="";if(this.min_stars>1&&a.stars<this.min_stars&&a.score)c=" "+n("To move on, you need to get {{min_stars}} stars.",{min_stars:this.min_stars});var u=function e(t,a){if(t.stars==5)return o+"! "+n("Time to move on to the next lesson.");if(t.accuracy<r)return n("This lesson has a minimum accuracy of {{min_acc}}%. Try to get 100% accuracy on the next try. You'll build speed later.",{min_acc:r});if(t.wpm>=a.goal_wpm+s){if(t.accuracy<100)return n("{{good_work}} on your speed!",{good_work:o})+"<br/>"+n("Now focus on getting 100% accuracy.");else return n("{{good_work}} on your speed and accuracy!",{good_work:o})+" "+(t.real_accuracy<100?n("For a perfect score you also need 100% real accuracy."):n("Time to move on to the next lesson."))}if(t.wpm<a.min_wpm+s){var l;if(t.accuracy>95)l=n("{{good_work}} on your accuracy",{good_work:o});else l=n("Your accuracy is good");return l+" "+n("but you need to work on your speed.")+" "+n("To pass this lesson, you need to type {{x}}WPM faster.",{x:a.min_wpm+s-t.wpm})}if(t.accuracy<100)return n("Focus on accuracy first, then build speed. You don't want to make any mistakes.");if(t.real_accuracy<80)return n("{{good_work}} on your speed and accuracy!",{good_work:o})+" "+n("You can improve your real accuracy by not making mistakes in the first place.");return n("Great work on accuracy. Now it's time to build up your speed.")+" "+n("Type {{x}}WPM faster to earn more stars.",{x:a.goal_wpm+s-t.wpm})};l=u(a,a.lesson.typing)+c}(0,h.default)(this.refs.explanation).html(l);return l}},{key:"end_show_content",value:function e(){var t=this.props.attempt;var a=(0,h.default)("<div />").attr("id","res_end_content_white_box");(0,h.default)(this.refs.result_arena).append(a);var n=(0,h.default)("#res_end_content").show();if(t.stars==0)(0,h.default)("#next-lesson-btn").hide();a.append(n);(0,E.setTimeout)(function(){a.css("top",(0,h.default)(document).height()).animate({top:690},1e3,"easeOut")});(0,E.setTimeout)(function(){this.end_place_content()}.bind(this),900/t.speed)}},{key:"end_place_content",value:function e(){var t=this;(0,h.default)("#arena").show().css({opacity:1,height:(0,h.default)("#arena-text").height()+100});(0,h.default)("#arena-text").stop().css({marginTop:0});api.getTypingResultsStats(this.props.attempt.resource_uri,function(e){var a=e.lesson_attempts.slice().reverse();if(a.length>1){var n=a[0];a.map(function(e){e.wpm_change=e.wpm-n.wpm;e.accuracy_change=e.accuracy-n.accuracy;n=e})}t.setState(e)});(0,E.setTimeout)(this.place_typable.bind(this),1500)}},{key:"place_typable",value:function e(){var t=this.props.attempt;var a=this.props.t;if(t.details.lesson_text){var n=t.lesson.typing;var r=new d.default({lesson_id:t.lesson.id,text:t.details.lesson_text,on_error:n.app?n.app.startsWith("typing.games")?"block":n.on_error:n.on_error,max_secs:n.max_secs,deletable:t.details.deletable,is_logograms:t.lesson.typing.render_engine=="logographic",t:a});new f.Typable(this.refs.typable,this.render_props,r,true);r.replay_history(t.details.history,true)}}},{key:"plug_ads",value:function e(){var t=this;var a=function e(){return(0,N.LaunchStudentPlansModal)(function(){return t.hide_ads()},null,"ResultPage")};x.default.plug_ads([{id:"adslot_1",slot:"5272875204",parent:(0,h.default)("#ad_box_1")},{id:"adslot_2",slot:"6749608402",parent:(0,h.default)("#ad_box_2")}],a)}},{key:"hide_ads",value:function e(){(0,h.default)("#adslot_1, #adslot_2").hide()}}]);return t}(i.default.Component))||s);function A(e,t){var a="RESPG";if(t.is_basic&&!window.hide_ads)a+=" with-ads";var n=t.teams.filter(function(t){return t.resource_uri==e.team_uri})[0]||{};var r=t.teamprograms.filter(function(t){return t.team==e.team_uri&&t.program==e.teamprogram_uri})[0]||{};var s=e.game_min_accuracy||r.min_accuracy||e.lesson.typing.min_accuracy||80;var l=e.game_difficulty+r.difficulty;return i.default.createElement(y.default,{key:e.resource_uri,style:a,header:false,no_ad_delay:true},i.default.createElement(R,{attempt:e,profile:t,team:n,min_accuracy:s,difficulty:l}))}e.exports=A},981:function(e,t,a){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();t.default=g;var r=a(1);var s=f(r);var l=a(78);var i=f(l);var o=a(17);var c=f(o);var u=a(18);var d=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v={width:"530px",maxWidth:"530px"};var _=function(e){m(t,e);function t(){var e;var a,n,r;p(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={rating:0},n.sendFeedback=function(){var e={lesson_id:n.props.lesson.id,rating:n.state.rating,has_bug:n.refs.has_bug.checked,has_content_bug:n.refs.has_content_bug.checked,too_easy:n.refs.too_easy.checked,too_hard:n.refs.too_hard.checked,notes:n.refs.notes.value};c.default.postLessonFeedback(e,function(){return n.setState({sent:true})})},n.handleClose=function(){approuter.hide_modal("lsnfeedback")},a),h(n,r)}n(t,[{key:"render",value:function e(){var t=this;return s.default.createElement("div",null,this.state.sent?s.default.createElement("div",{style:{padding:"0 6px",textAlign:"center"}},s.default.createElement("h4",null,s.default.createElement("b",null,"Feedback Received")),s.default.createElement("h3",{style:{margin:"70px 0 50px"}},"Thank you!"),s.default.createElement("input",{type:"button",value:"Close",className:"btn btn-primary",onClick:this.handleClose})):s.default.createElement("div",{style:{padding:"0 6px"}},s.default.createElement("div",{style:{paddingRight:15},className:"pull-right"},s.default.createElement("b",null,profile.fname," ",profile.lname)),s.default.createElement("h4",null,s.default.createElement("b",null,"Feedback")),s.default.createElement("div",{style:{padding:"8px 0 4px"}},"Rate your experience with this lesson"),s.default.createElement(y,{value:this.state.rating,onChange:function e(a){return t.setState({rating:a})}}),s.default.createElement("hr",{style:{margin:"3px -8px 15px",borderColor:"#e1e1e1"}}),s.default.createElement("p",null,s.default.createElement("label",null,s.default.createElement("input",{ref:"has_content_bug",type:"checkbox"})," I found an issue with the lesson's content"),s.default.createElement("br",null),s.default.createElement("label",null,s.default.createElement("input",{ref:"has_bug",type:"checkbox"})," I found a bug with this lesson"),s.default.createElement("br",null),s.default.createElement("label",null,s.default.createElement("input",{ref:"too_easy",type:"checkbox"})," This lesson is too easy"),s.default.createElement("br",null),s.default.createElement("label",null,s.default.createElement("input",{ref:"too_hard",type:"checkbox"})," This lesson is too difficult"),s.default.createElement("br",null)),s.default.createElement("div",{className:"form-group"},s.default.createElement("textarea",{onChange:function e(a){return t.setState({enabledSend:a.target.value.length>6})},ref:"notes",className:"form-control",style:{maxWidth:"90%"},rows:"5"})),s.default.createElement("div",{className:"pull-right"},s.default.createElement("div",null,s.default.createElement("input",{style:{marginRight:10},type:"button",value:"Cancel",onClick:this.handleClose,className:"btn btn-default"}),s.default.createElement("input",{type:"button",value:"Send",disabled:!this.state.enabledSend,className:"btn btn-primary",onClick:this.sendFeedback})))))}}]);return t}(s.default.Component);var y=function(e){m(t,e);function t(){var e;var a,n,r;p(this,t);for(var s=arguments.length,l=Array(s),i=0;i<s;i++){l[i]=arguments[i]}return r=(a=(n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n),n.state={hoverIndex:0},a),h(n,r)}n(t,[{key:"render",value:function e(){var t=this;var a=this.props,n=a.value,r=a.onChange;var l=5;var o=function e(a){return t.setState({hoverIndex:a})};var c="yellow";var u=n;if(this.state.hoverIndex>0){c="khaki";u=this.state.hoverIndex}return s.default.createElement("div",{onMouseLeave:function e(){return o(0)}},(0,i.default)(l).map(function(e){return s.default.createElement("span",{key:e,onMouseEnter:function t(){return o(e+1)},onClick:function a(){t.setState({hoverIndex:0});t.props.onChange(e+1)},style:{cursor:"pointer",display:"inline-block"}},s.default.createElement("svg",{width:40,height:50,viewBox:"0 0 40 40"},s.default.createElement("path",{fill:u>e?"#FFE317":"#FFFFFF",stroke:"#CEA90D",strokeMiterlimit:"10",d:"M21.1,2.6l4.7,9.6c0.2,0.3,0.5,0.6,0.8,0.6l10.6,1.5c0.9,0.1,1.3,1.2,0.6,1.9l-7.7,7.5c-0.3,0.3-0.4,0.6-0.3,1 l1.8,10.5c0.2,0.9-0.8,1.6-1.6,1.2l-9.5-5c-0.3-0.2-0.7-0.2-1,0l-9.5,5c-0.8,0.4-1.8-0.3-1.6-1.2l1.8-10.5c0.1-0.4-0.1-0.7-0.3-1 l-7.7-7.5c-0.7-0.6-0.3-1.8,0.6-1.9l10.6-1.5c0.4-0.1,0.7-0.3,0.8-0.6l4.7-9.6C19.5,1.8,20.7,1.8,21.1,2.6z"})))}))}}]);return t}(s.default.Component);function g(e){approuter.show_modal(s.default.createElement(d.default,{id:"lsnfeedback",width:400},s.default.createElement(_,{lesson:e})))}},982:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r=function(){var e=f(regeneratorRuntime.mark(function e(t,a){var n,r,s;return regeneratorRuntime.wrap(function e(a){while(1){switch(a.prev=a.next){case 0:n=["295453747","295453991","295434210"];r=n[Math.floor(Math.random()*n.length)];a.next=4;return api.getVideo(r);case 4:s=a.sent;return a.abrupt("return",l.default.createElement(o.default,{header:false},l.default.createElement(k,{video:s,onNext:t.callback})));case 6:case"end":return a.stop()}}},e,this)}));return function t(a,n){return e.apply(this,arguments)}}();var s=a(1);var l=d(s);var i=a(77);var o=d(i);var c=a(983);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,s){try{var l=t[r](s);var i=l.value}catch(e){a(e);return}if(l.done){e(i)}else{return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e){return STATIC_URL+"engine/audio/result-junior/"+e}function _(e){return STATIC_URL+"engine/img/result-junior/"+e}var y=function(){function e(){m(this,e);this.audios=[]}n(e,[{key:"add",value:function e(t){this.audios.push(t);var a=this.audios.length-1;return function(){var e=true;var t=false;var n=undefined;try{for(var r=this.audios[Symbol.iterator](),s;!(e=(s=r.next()).done);e=true){var l=s.value;if(!l.current)continue;l.current.pause();l.current.currentTime=0}}catch(e){t=true;n=e}finally{try{if(!e&&r.return){r.return()}}finally{if(t){throw n}}}this.audios[a].current.play()}.bind(this)}}]);return e}();var g=new y;var b=function(e){h(t,e);function t(e){m(this,t);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.audioref=l.default.createRef();a.onMouseEnter=a.onMouseEnter.bind(a);a.play=null;return a}n(t,[{key:"onMouseEnter",value:function e(){if(!this.play)return;this.play()}},{key:"componentDidMount",value:function e(){this.play=g.add(this.audioref)}},{key:"render",value:function e(){return l.default.createElement("span",{className:"button",onClick:this.props.onClick,style:{cursor:"pointer"}},l.default.createElement("img",{src:_(this.props.graphic),width:"160px",onMouseEnter:this.onMouseEnter}),l.default.createElement("audio",{ref:this.audioref},l.default.createElement("source",{src:v(this.props.audio)})))}}]);return t}(l.default.Component);var k=function(e){h(t,e);function t(e){m(this,t);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.musicRef=l.default.createRef();a.state={is_playing:false};return a}n(t,[{key:"render",value:function e(){return l.default.createElement("div",{id:"RPJ"},l.default.createElement("img",{className:"header",src:_("goodjob-stars.svg")}),l.default.createElement(u.default,{className:"animation",src:this.props.video.url,loopAt:this.props.video.loop,poster:this.props.video.image_large,posterAfterSeconds:1.5,width:950,height:534}),l.default.createElement("audio",{ref:this.musicRef},l.default.createElement("source",{src:v("music2.mp3")})),l.default.createElement("div",{className:"navigation"},l.default.createElement(b,{graphic:"home.svg",audio:"37-home.mp3",onClick:approuter.exit_lesson}),l.default.createElement(b,{graphic:"redo.svg",audio:"36-redo.mp3",onClick:approuter.redo_lesson}),l.default.createElement(b,{graphic:"next.svg",audio:"34-moveforward.mp3",onClick:this.props.onNext})))}},{key:"componentDidMount",value:function e(){var t=this.musicRef.current;t.volume=.5;t.play()}}]);return t}(l.default.Component);e.exports=r},983:function(e,t,a){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,a,n){if(a)e(t.prototype,a);if(n)e(t,n);return t}}();var r=a(1);var s=i(r);var l=a(12);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=25;function f(e,t,a){var n=function n(){try{return a.apply(undefined,arguments)}finally{e.removeEventListener(t,n)}};e.addEventListener(t,n)}var p=function(e){u(t,e);function t(e){o(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.videoRef=s.default.createRef();return a}n(t,[{key:"render",value:function e(){return s.default.createElement("video",{ref:this.videoRef,playsInline:true,src:this.props.src,width:this.props.width,height:this.props.height})}},{key:"componentDidMount",value:function e(){var t=this.videoRef.current;var a=d;if(this.props.fps){a=this.props.fps}var n=void 0;var r=this.props.loopAt/a;function s(){var e=t.currentTime*a;if(e>=n-1){t.currentTime=r;t.play()}requestAnimationFrame(s)}f(t,"canplay",function(){n=t.duration*a;t.play();s()})}}]);return t}(s.default.Component);var h=function(e){u(t,e);function t(e){o(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.canvas=s.default.createRef();return a}n(t,[{key:"render",value:function e(){return s.default.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height})}},{key:"componentDidMount",value:function e(){var t=this.canvas.current;var a=t.getContext("2d");var n=document.createElement("VIDEO");var r=this.props.width;var s=this.props.height;var l=void 0;var i=false;n.src=this.props.src;n.autoPlay=false;n.muted=true;n.oncanplay=function(){l=Math.min(t.width/r,t.height/s);i=true;requestAnimationFrame(o);n.play()};function o(){var e=t.width;var c=t.height;a.clearRect(0,0,e,c);if(i){var u=c/2-s/2*l;var d=e/2-r/2*l;a.drawImage(n,d,u,r*l,s*l)}requestAnimationFrame(o)}}}]);return t}(s.default.Component);var m=function(e){u(t,e);function t(e){o(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.container=s.default.createRef();return a}n(t,[{key:"render",value:function e(){return s.default.createElement("div",{ref:this.container})}},{key:"componentDidMount",value:function e(){var t=this.container.current;var a=document.createElement("video");var n=document.createElement("video");a.src=n.src=this.props.src;a.autoPlay=n.autoPlay=false;a.muted=n.muted=true;a.width=n.width=this.props.width;a.height=n.height=this.props.height;if(this.props.poster){var r=this.props.poster;if(this.props.posterAfterSeconds){(0,l.setTimeout)(function(){a.poster=n.poster=r},this.props.posterAfterSeconds*1e3)}else{a.poster=n.poster=r}}n.style.display="none";t.appendChild(a);t.appendChild(n);var s=d;if(this.props.fps){s=this.props.fps}var i=void 0;var o=this.props.loopAt/s;function c(){n.play();a.style.display="none";n.style.display="inline-block";var e=n;n=a;a=e;n.currentTime=o}a.addEventListener("ended",c);n.addEventListener("ended",c);f(a,"durationchange",function(){i=a.duration*s});f(n,"canplay",function(){n.currentTime=o});f(a,"canplay",function(){a.play()})}}]);return t}(s.default.Component);e.exports=m}}]);
//# sourceMappingURL=typing.de75e888f8.min.js.map