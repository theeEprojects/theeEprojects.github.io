(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{115:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a,r;t.map_content=O;function o(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var i=t.LESSON_TYPING=0,l=t.LESSON_HEADER=1,s=t.LESSON_INSTRUCTIONS=2,u=t.LESSON_VIDEO=3,c=t.LESSON_VIDEO_TYPING=4;var d=t.LESSON_TYPES=(a={},o(a,i,"Typing"),o(a,l,"Header"),o(a,u,"Video"),a);var f=t.TYPING_TEXT=1,p=t.TYPING_BOXES=2,m=t.TYPING_RIGHT_ANCHOR=3,h=t.TYPING_LEFT_ANCHOR=4,v=t.TYPING_CODE=5,g=t.TYPING_LOGOGRAPHIC=6,y=t.TYPING_GAME_BALLOON_VALLEY=1001,_=t.TYPING_GAME_MONSTER_ATTACK=1002,b=t.TYPING_GAME_TEMPLE_BASH=1003,w=t.TYPING_GAME_FLOATING_BUBBLES=1004,E=t.TYPING_GAME_APPLE_THIEVES=1005;var k=t.RENDER_ENGINES=(r={},o(r,f,"Classic Typing"),o(r,p,"Boxed Typing"),o(r,m,"Right Anchor"),o(r,h,"Left Anchor"),o(r,v,"Code Typing"),o(r,y,"Baloon Valley"),o(r,_,"Monster Attack"),o(r,b,"Temple Bash"),o(r,w,"Floating Bubbles"),o(r,E,"Apple Thieves"),r);var x=t.CONTENT={keys:"Keys",review:"Review",practice:"Practice",travel:"Travel","key1-and-key2":"{{KEY1}} and {{KEY2}}","new-key-title":"Type the [{{KEY}}] key","new-key-title-tag":"New Key Introduction","new-key-body":"Type the [{{KEY}}] key using your {{FINGER}}.","new-key-move-finger-back":"Move your finger back to the home-row position right after.","new-key-great-job":"Great Job","new-key-practice":"Next we will practice typing [{{KEY1}}] and [{{KEY2}}].","new-key-take-time":"Take your time and make sure you get it right.","new-key-press-space":"Press [space] to begin.","left-index-finger":"left index finger","right-index-finger":"right index finger","left-middle-finger":"left middle finger","right-middle-finger":"right middle finger","left-ring-finger":"left ring finger","right-ring-finger":"right ring finger","left-pinky-finger":"left pinky finger","right-pinky-finger":"right pinky finger","great-work":"great work so far. we will now move on to learn about the tab and enter key, and then work on your speed.","white-space":"\tone tab\n    four spaces\n\t\ttwo tabs\n\t\t\tthree tabs\n"+"\tone tab usually takes as much\n\tspace as four spaces.\n"+"\tmany computer programmers\n\tin fact convert your tab into spaces.","basic-1":"now that you know how to type with all ten fingers, lets work on your speed and then move on to other keys.","basic-2":"if you want your typing speed to increase, you must first focus on your accuracy.","basic-3":"practice makes perfect. every time you repeat this lesson, your speed will increase.","basic-4":"remember the first and only rule of typing, never ever look at the keyboard while typing.","basic-5":"when we stare at a screen we tend to blink less. that is bad for the eyes because they can get dry.","basic-6":"make sure to look away from the computer every fifteen minutes, and take a five minute break every hour.","basic-7":"once you have finished typing this lesson, look away from the computer for a few short seconds before looking at the results.","basic-8":"because sitting at a computer is the exact opposite of exercise, you should take a more active break every hour or so.","basic-9":"one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen","basic-10":"it usually takes a few weeks of practice to build the muscle memory needed to type fast.","basic-11":"good posture helps improve our concentration, letting you work longer and harder. it also prevents sore muscles.","basic-12":"look straight ahead. make sure your eyes look directly into your monitor the same way you would look at someone across the table from you.","basic-13":"once you are more comfortable with the keyboard, you may turn off the virtual hand guides by using the settings at the top of the page.","basic-14":"as you type, your brain remembers each word as a pattern of keystrokes. this allows you to type the same words without thinking about how to type each character.","basic-15":"to see how it works lets type the next sentence five times. i am glad. i am glad. i am glad. i am glad. i am glad.","basic-16":"to make sure you do not go back to typing with two or four fingers, make sure to revisit these lessons a few times during the coming week.","basic-17":"if you learn to never look at your keyboard when typing, the computer will feel like a part of your body with your mind in full control.","basic-18":"placing your fingers on the home row will help you learn to type faster and build the correct muscle memory. now try doing it with your eyes closed or while you look at the screen.","basic-19":"from the home row all other keys are just a short distance away. as you practice, you will build speed because you hardly have to move your fingers from one key to the next.","basic-20":"while it may feel easier at first, hunting and pecking at letters makes it harder to concentrate when you type. you also type slower and build the wrong muscle memory.","basic-21":"just like a basketball player trains their muscles so they focus on the game, you can train your muscles to type without much thinking about it.","basic-22":"whenever you are unsure which finger you should use to type a certain letter, take a look down at the virtual hands. they will guide you.","basic-23":"your index fingers should always find their way back to f and j by feeling for those bumps. it takes some practice but it will help you get better.","basic-24":"fast typists forget about the keyboard and do not even realize their fingers are at work. once you practice more you will feel the same way too.","basic-25":"next, we will move on to practice tricky words and then focus on learning how to type capital characters. great work so far.","numbers-1":"44 cats 74 men 44 doors in the room 74 trees more than 47 is the number 7 is a great choice 4 is a better one 4 by 7 is you guessed right 44 more days give me 4 and a 7 then 47 then 44777","numbers-2":"88 little dogs 3 big cows 33 more likes 83 is greater 38 is not 88 cars 3 shoes 33 bags now 88 sounds good 33 not so good 3 is a little less 8 is more than that 333 and 888 now 338 and 883","numbers-3":"29 bat 92 boats 99 cents with 22 more 2 short plants and 92 stones 2 white cars travel 9 hundred miles 29 times to the zoo 2 is a number and 9 is too but 2 is the smaller one you must know","numbers-4":"1 is the only one 0 is none 11 is more and 10 is less 100 is a lot but 1000 is even more learn the numbers and you should know more 1010101 type the key 1 and next type the key 0","numbers-5":"5 cute dolphins, 6 big whales, and 55 balloons are floating in the air. 56 reversed is 65 but 56 is smaller than 65. Five pounds of sand in 6 little jars. 5 is my favorite number and 6 is yours.","numbers-6":"15cars 6bears 4ducks 9chairs 1bus 20trees 9cents 3boats 7trains 18homes 23bikes 76planes 63vans 2men","symbols-0":"2*2 is 4 & 4! is 24 & 2^3 is 8. $dollar @at gmail (open)close percent%","symbols-1":"some` symbols~ are` kind~ of` difficult~ to master`","symbols-2":'we don\'t always use "special symbols" in normal text',"symbols-3":"minus- and equal= symbols are- typed with= the -same- finger=","symbols-4":"_ and + are _more_ examples +of+ symbols_ on +the keyboard+","symbols-5":"open[ and closed] square[] brackets are [symbols] used ]in[ coding","symbols-6":"open{ and closed} curly{} brackets are {also} used frequently {in} coding","symbols-7":"some|more|examples \\of\\symbols\\ are the |pipe| and \\back\\slash symbols","symbols-8":"there are <two> more symbols >to< learn. The less<than and greater>than signs.","symbols-all-1":'{it} is -equally+ [important] to \\learn\\ "how" to\' type _all_ the symbols+ =on _your` keyboard~',"symbols-all-2":"\\Typing` {symbols~ can\" 'be] =tricky_ [so+ \\keep- =practicing| =until~ 'you{ }fully[ 'master~ \\it\\","symbols-all-3":"_at_ this+point- you\\ should- be' able| to type~ all\" the{ letters] and symbols{ on} [your] |keyboard\\"};var N=t.FINGER_LABELS=["left-index-finger","right-index-finger","left-middle-finger","right-middle-finger","left-ring-finger","right-ring-finger","left-pinky-finger","right-pinky-finger"];var S=t.NEW_KEY_LABELS=["keys","review","practice","travel","new-key-title","new-key-title-tag","new-key-body","new-key-move-finger-back","new-key-great-job","new-key-practice","new-key-take-time","new-key-press-space"];var C=t.NEW_KEY_EXTRA=["keys","review","practice","key1-and-key2"];window.PROGRAM_CONTENT={};function O(e,t){var n=PROGRAM_CONTENT[e]||x[e];var a=t||{};for(var r in a){n=n.split("{{"+r+"}}").join(a[r])}return n}},12:function(e,t,n){var a=n(8);var r=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e/5;var a=t/6e4;return parseInt(n/a+.5)}function l(e,t){if(t==0)return 100;return Math.round(100*e/t)}window.wait_preload=function(e){var t=0;var n,a,o,i;function l(){var s=o.width();var u=i.width();var c=i.height();var d=a.height();if(s!=u||c==d){t++;if(t>5){console.warn('Font defaulted back to "courier"');n.remove();(0,r.default)("#arena-text").css("font-family","courier");e()}else{setTimeout(l,500)}}else{n.remove();e()}}n=(0,r.default)("<div />").css({position:"absolute",top:-500,"font-family":"'Droid Sans Mono', 'Lucida Console', Monaco, monospace","font-size":"100px"});o=(0,r.default)("<span>i</span>");i=(0,r.default)("<span>W</span>");a=(0,r.default)("<span>W</span>").css({"font-family":"Arial"});n.append(o).append(i).append(a);(0,r.default)("body").prepend(n);l()};r.default.fn.extend({animateCss:function e(t,n){var a="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";setTimeout(function(){(0,r.default)(this).show().addClass("animated "+t).one(a,function(){(0,r.default)(this).removeClass("animated "+t);if(n)n()}.bind(this))}.bind(this),3)}});function s(e){if(e){var t=(0,r.default)("<div>").hide();(0,r.default)(e).each(function(e,n){t.append((0,r.default)("<img>").attr("src",STATIC_URL+n))});(0,r.default)("body").append(t)}}var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var c=navigator.userAgent.match(/(iPad|iPhone|iPod)/g);var d=navigator.userAgent.match(/firefox/gi);function f(){var e=[{s:"Windows",r:/Windows/},{s:"Android",r:/Android/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac",r:/Mac OS X/},{s:"Chromebook",r:/\bCrOS\b/}];var t=navigator.userAgent;var n=true;var a=false;var r=undefined;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;if(l.r.test(t))return l.s}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}return"unknown"}function p(){var e,t={},n=/\+/g,a=/([^&=]+)=?([^&]*)/g,r=function e(t){return decodeURIComponent(t.replace(n," "))},o=window.location.search.substring(1);while(e=a.exec(o)){t[r(e[1])]=r(e[2])}return t}function m(e,t,n){if(e.indexOf(t+"=")>=0){var a=e.substring(0,e.indexOf(t));var r=e.substring(e.indexOf(t));r=r.substring(r.indexOf("=")+1);r=r.indexOf("&")>=0?r.substring(r.indexOf("&")):"";e=a+t+"="+n+r}else{if(e.indexOf("?")<0)e+="?"+t+"="+n;else e+="&"+t+"="+n}return e}function h(e){return parseFloat(e.replace(/\D\./g,""))}function v(e,t){if(!e||!e.length)return;if(window.profile&&window.profile.freestar_ok&&navigator.language=="en-US")y(e,t);else _(e,t)}function g(e,t){var n=(0,r.default)("<div class='disable-ads-banner'><a>Disable Ads <i>&times;</i></a></div>");n.on("click",function(){var n=parseInt(localStorage.getItem("remove_ad_count"))||0;if(n<3){try{localStorage.setItem("remove_ad_count",n+1)}catch(e){n=3}setTimeout(function(){e.remove()},1e3)}t()});return n}function y(e,t){function n(e){if(approuter.has_freestar_ads)e();else freestar.queue.push(e)}n(freestar.deleteAdSlots);var a=true;var o=false;var i=undefined;try{var l=function e(){var a=u.value;var o=a.parent||(0,r.default)(document.body);o.attr("tabIndex","-1");var i=(0,r.default)("#"+a.id);if(i.length)i.remove();i=(0,r.default)("<div>",{id:a.id});c=(0,r.default)("<ins>",{class:"adsbygoogle",id:a.id+"-ins"});if(window.is_tp&&t){i.append(g(i,t))}i.append(c);o.append(i);i.attr("aria-hidden","true");i.attr("role","presentation");i.attr("tabindex","-1");if(!i.height()){console.warn("This ad slot requires a width and height defined in css: ",i)}o.addClass("with-ads");var l={4189766002:"typingclub_Generic_Responsive",8612645602:"typingclub_dashboard",5798780009:"typingclub_Generic_responsive_2",6077981606:"typingclub_LessonPlan1",4322046805:"typingclub_LessonPlan2",5272875204:"typingclub_new-page-res-1",6749608402:"typingclub_new-page-res-2",1180881973:"typingclub_videotyping1_responsive"};n(function(){approuter.has_freestar_ads=true;freestar.newAdSlots([{placementName:l[a.slot]||"typingclub_Generic_Responsive",slotId:a.id+"-ins"}])})};for(var s=e[Symbol.iterator](),u;!(a=(u=s.next()).done);a=true){var c;l()}}catch(e){o=true;i=e}finally{try{if(!a&&s.return){s.return()}}finally{if(o){throw i}}}}function _(e,t){if(window.adsbygoogle&&(window.adsbygoogle.loaded||window.adsbygoogle.length))return;window.adsbygoogle=[];var n=true;var a=false;var o=undefined;try{for(var i=e[Symbol.iterator](),l;!(n=(l=i.next()).done);n=true){var s=l.value;var u=s.parent||(0,r.default)(document.body);u.attr("tabIndex","-1");var c=(0,r.default)("#"+s.id);if(c.length){c.show()}else{c=(0,r.default)("<div>",{id:s.id});var d=(0,r.default)("<ins>",{class:"adsbygoogle","data-ad-client":"ca-pub-3020473740784730","data-ad-slot":s.slot});if(window.is_tp&&t){c.append(g(c,t))}c.append(d);c.attr("aria-hidden","true");c.attr("role","presentation");c.attr("tabindex","-1");u.append(c);if(!c.height()){console.warn("This ad slot requires a width and height defined in css: ",c)}u.addClass("with-ads");window.adsbygoogle.push({})}}}catch(e){a=true;o=e}finally{try{if(!n&&i.return){i.return()}}finally{if(a){throw o}}}if((0,r.default)("#google_ads_script").length==0){var f=(0,r.default)("<script>",{id:"google_ads_script",type:"text/javascript",src:"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",async:""});(0,r.default)(document.body).append(f)}}function b(e,t){var n=new Image(1,1);n.src="//www.googleadservices.com/pagead/conversion/"+e+"/?label="+t+"&script=0"}function w(){if(window.cordova)return false;if(window.adsbygoogle&&(window.adsbygoogle.loaded||window.adsbygoogle.length))return true;return false}var E=function e(t){var n=String(t);var a=n.replace(/^(-?\d+)(\d{3})/,"$1,$2");if(n==a){return a}else{return e(a)}};var k=function e(t){return!!t&&t!=t.toLocaleLowerCase()};var x=function e(t,n,a){var r=t.split(n);var o=new Set(r.filter(a));return r.filter(function(e){return!o.has(e)}).join(n)};var N=[];var S=[];var C=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var a=setTimeout(t,n);N.push(a);return a};var O=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var a=setInterval(t,n);S.push(a);return a};var T=function e(){var t=true;var n=false;var a=undefined;try{for(var r=S[Symbol.iterator](),o;!(t=(o=r.next()).done);t=true){var i=o.value;clearInterval(i)}}catch(e){n=true;a=e}finally{try{if(!t&&r.return){r.return()}}finally{if(n){throw a}}}var l=true;var s=false;var u=undefined;try{for(var c=N[Symbol.iterator](),d;!(l=(d=c.next()).done);l=true){var f=d.value;clearTimeout(f)}}catch(e){s=true;u=e}finally{try{if(!l&&c.return){c.return()}}finally{if(s){throw u}}}S=[];N=[]};var I=function e(t){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)};var P=window.speechSynthesis?true:false;function R(e){var t=speechSynthesis.getVoices();var n=true;var a=false;var r=undefined;try{for(var o=t[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;if(l.voiceURI==e)return l}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}return t&&t[0]}function L(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.join(" ")}function A(e){var t=[];for(var n in e){if(e[n]){t.push(n)}}return t.join(" ")}function M(e){var t;if(window.is_tp)t=e;else{var n=true;var a=false;var r=undefined;try{for(var o=e.teams[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;if(!t||l.weekday_start>(t.weekday_start||0)||l.typing_goal_weekly>(t.typing_goal_weekly||0))t=l}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}}if(!t)return{typing_goal_daily:15,typing_goal_weekly:60,weekday_start:0};return{typing_goal_daily:t.typing_goal_daily||15,typing_goal_weekly:t.typing_goal_weekly||60,weekday_start:t.weekday_start||0}}function j(e,t){var n=(0,r.default)("<div />").html(e);n.append((0,r.default)("<img />").attr("src",STATIC_URL+"engine/img/touch-here.png").css({paddingLeft:40,height:140,width:137}));n.css({position:"absolute",left:0,right:0,top:"30%",background:"rgba(0, 0, 0, .9)",fontSize:"50px",boxShadow:"0 0 200px #444",color:"white",textAlign:"center",padding:50,zIndex:2});function a(){if(!t){setTimeout(function(){n.remove()},100)}else{t[0].focus();n.remove()}}if(t){n.click(a)}else{var o=(0,r.default)("<input/>").css({position:"absolute",top:0,bottom:0,left:0,width:"100%",opacity:0});n.append(o);o.focus(a)}(0,r.default)("body").prepend(n);return n}var G=[["en","English","us"],["es_MX","Español - Mexico","mx"],["es_ES","Español - Spain","es"],["de_DE","Deutsch","de"],["fr_FR","Français","fr"],["it_IT","Italiano","it"],["ja_JP","日本語","jp"],["pt_PT","Português","pt"],["sk_SK","Slovenčina","sk"],["zh_CN","中文","cn"]];function Y(e){var t=G.find(function(t){return t[0]==e});if(t)return t[2];return e||G[0][2]}function H(e){var t=G.find(function(t){return t[0]==e});if(t)return t[1];return e||G[0][1]}function D(){var e={Windows:"http://disability.illinois.edu/academic-support/assistive-technology/windows-7-sticky-keys",iOS:"http://www.apple.com/accessibility/ios/#motor-skills",Mac:"https://support.apple.com/kb/PH18386?locale=en_US",Chromebook:"https://support.google.com/chromebook/answer/177893"};var t="https://en.wikipedia.org/wiki/Sticky_keys";return e[f()]||t}e.exports={speech_support:P,isIOS:c,isSafari:u,isFirefox:d,calc_wpm:i,calc_accuracy:l,preload:s,get2dict:p,add_get_param:m,px2int:h,plug_ads:v,trackAdwordsConv:b,refresh_page_on_new_url:w,intcomma:E,detect_os:f,isUpperCase:k,filterString:x,setTimeout:C,setInterval:O,flush_timeouts:T,validateEmail:I,get_voice:R,cn:L,cx:A,get_practice_time_goals:M,show_ios_focus_popup:j,LANGUAGE_CHOICES:G,get_language_country:Y,get_language_name:H,sticky_key_instruction_link:D}},123:function(e,t,n){var a=n(262);var r=g(a);var o=n(264);var i=g(o);var l=n(1);var s=g(l);var u=n(54);var c=g(u);var d=n(8);var f=g(d);var p=n(12);var m=g(p);var h=n(379);var v=g(h);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={on_token_blur:"annotate_speed",one_span_per_char:false,display_className:"normal",display_row_range:[3,5],line_transition:"scroll",progress_style:"normal",token_split_regex:/\n| |\t/,cursor:{className:"normal_cursor",speed:300,expandToMargin:true},show_live_stats:true,anchor_hand:{"right-anchor":"right","left-anchor":"left"}[e]||null,on_char_error:"overlay_fade",size:"med"};switch(e){case"story":return Object.assign(n,{on_token_blur:"",line_transition:"scroll-no-bounce",cursor:{className:"story_cursor",speed:300,expandToMargin:true}});case"boxed":return Object.assign(n,{on_token_blur:"boxed_token_blur",one_span_per_char:true,display_className:"boxed",display_rows:1,display_row_range:null,line_transition:"boxed_scroll",progress_style:"per_line",token_split_regex:/.*/,cursor:{className:"boxed_cursor",speed:350,expandToMargin:false},show_live_stats:false,on_char_error:t=="xlarge"?"overlay_fade":"red_underneath"});case"instant":return Object.assign(n,{display_className:"normal hide-bottom-line",line_transition:"fixed_position_instant",size:"small"});case"placement":return Object.assign(n,{display_className:"normal hide-bottom-line",line_transition:"scroll-no-bounce",size:"small"});case"code":return Object.assign(n,{display_className:"code",token_split_regex:/\n| |\t|\./,size:"small",display_row_range:[3,15]});case"logographic":return Object.assign(n,{logographic:true});default:return n}}function _(e,t,n){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.arena=(0,f.default)(e);this.core=n;this.render_props=t;this.replay_mode=a;this.lines=[];this.tokens=[];this.chars=[];this.events=new c.default(["cursor_move"]);this.token_opts={show_extras:true};this.tokenize();this.clean_rerender();this.check_for_font_change_interval=100;this.check_for_font_change();this.core.events.on("keydown",this.keydown.bind(this))}_.prototype.clean_rerender=function(e){this.gather_arena_facts();this.initial_dom_setup();this.linify();this.create_cursor();this.cache_char_positions();if(!this.cur_token)this.focus_token(this.tokens[0]);this.cur_char().focus(this.cursor);this.announce_cursor_position({is_rerender:true})};_.prototype.announce_cursor_position=function(e){e=e||{};var t=this.cursor.offset();this.events.fire_event("cursor_move",Object.assign(e,{position:{top:t.top,left:t.left}}))};_.prototype.keydown=function(e){if(e.deadkey)return;var t=this.chars[e.new_char_dict.index];var n=this.chars[e.old_char_dict.index];t.get_token().render();if(t.get_token()!=n.get_token()){n.get_token().render();this.focus_token(t.get_token())}if(e.chr!="<-")n.keydown(e.chr);t.focus(this.cursor);this.announce_cursor_position()};_.prototype.focus_token=function(e){if(e!=this.cur_token){if(this.cur_token)this.cur_token.blur();this.cur_token=e;e.focus()}};_.prototype.linify=function(){this.lines=[];if(!this.tokens.length)return;var e=[];var t=[];var n;switch(this.render_props.display_className){case"boxed":var a=0;var r=true;var o=false;var l=undefined;try{for(var s=this.tokens[Symbol.iterator](),u;!(r=(u=s.next()).done);r=true){var c=u.value;var d=c.dom.childNodes[1].offsetTop;if(n==undefined)n=d;if(d!=n)break;a++}}catch(e){o=true;l=e}finally{try{if(!r&&s.return){s.return()}}finally{if(o){throw l}}}var p=this.tokens.slice();var m=function e(){var t=[];var n;while(n=p.shift()){t.push(n);if(t.length==a)break;if(n.chars[0].chr==" ")break}return t};while(p.length){var h=m();if(t.length+h.length>a){e.push(t);t=[]}t=t.concat(h)}e.push(t);break;default:var v=true;var g=false;var y=undefined;try{for(var _=this.tokens[Symbol.iterator](),b;!(v=(b=_.next()).done);v=true){var w=b.value;var d=w.dom.childNodes[1].offsetTop;if(n==undefined)n=d;if(d!=n){n=d;e.push(t);t=[]}t.push(w)}}catch(e){g=true;y=e}finally{try{if(!v&&_.return){_.return()}}finally{if(g){throw y}}}if(t.length>0){e.push(t)}}var E=0;var k=true;var x=false;var N=undefined;try{for(var S=e[Symbol.iterator](),C;!(k=(C=S.next()).done);k=true){var O=C.value;var T=new i.default(this,E++);var I=true;var P=false;var R=undefined;try{for(var L=O[Symbol.iterator](),A;!(I=(A=L.next()).done);I=true){var M=A.value;T.add_token(M)}}catch(e){P=true;R=e}finally{try{if(!I&&L.return){L.return()}}finally{if(P){throw R}}}}}catch(e){x=true;N=e}finally{try{if(!k&&S.return){S.return()}}finally{if(x){throw N}}}var j=true;var G=false;var Y=undefined;try{for(var H=this.lines[Symbol.iterator](),D;!(j=(D=H.next()).done);j=true){var z=D.value;z.mount()}}catch(e){G=true;Y=e}finally{try{if(!j&&H.return){H.return()}}finally{if(G){throw Y}}}(0,f.default)(this._tokens_nd).remove()};_.prototype.cache_char_positions=function(){var e=this.tokens;for(var t=0,n=e.length;t<n;t++){e[t].set_char_positions(this.facts.offsetTop,this.facts.offsetLeft,this.facts.per_char_facts)}};_.prototype.initial_dom_setup=function(){var e=document.createElement("SPAN");e.className="line";var t=this.tokens;for(var n=0,a=t.length;n<a;n++){e.appendChild(t[n].dom);e.appendChild(document.createTextNode(" "))}if(this.replay_mode)this.arena.addClass("replay_mode");else this.arena.addClass("play_mode");if(this.core.ignore_case){this.arena.css("text-transform","uppercase")}this.arena.html("");this.arena.append(e);this._tokens_nd=e};_.prototype.get_per_char_facts=function(){var e={};var t=(0,f.default)("<div/>");t.css("position","absolute");var n=this.core.text.split("");if(!n.length)return{};var a=true;var r=false;var o=undefined;try{for(var i=n[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;if(e[s])continue;var u=(0,f.default)("<span/>");u.addClass("token_unit __no-lineheight");var c={"\t":"&nbsp;&nbsp;&nbsp;&nbsp;"," ":"&nbsp;","\n":"&nbsp;"}[s];u.html(c||s);t.append(u);e[s]=u}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}this.arena.prepend(t);var d=e[n[0]];function p(e){return m.default.px2int(d.css(e))}var h=p("padding-left")+p("padding-right")+p("border-left-width")+p("border-right-width")+p("margin-right")+p("margin-left");var v=m.default.isSafari?-1:0;for(var g in e){e[g]=e[g].width()+h+v}(0,f.default)(t).remove();return e};_.prototype.gather_arena_facts=function(){var e=this.arena;if(!this.facts)this.facts={};var t=this.facts;t.per_char_facts=this.get_per_char_facts();var n=(0,f.default)("<span />").html("A").addClass("token_unit");var a=(0,f.default)("<span />").addClass("line").append(n);e.prepend(a);function r(e){return m.default.px2int(n.css(e))}function o(e){return m.default.px2int(a.css(e))}var i=r("padding-top")+r("padding-bottom")+r("border-top-width")+r("border-bottom-width");t.chr_h_with_lh=n.height()+i;t.chr_h_allin=n.height()*(this.render_props.logographic?2:1)+i+r("margin-top")+r("margin-bottom");t.line_h_allin=t.chr_h_allin+o("margin-top")+o("margin-bottom")+o("padding-top")+o("padding-bottom");t.char_margin_top=r("margin-top");t.char_margin_bottom=r("margin-bottom");t.char_margin_left=r("margin-left");t.char_margin_right=r("margin-right");t.offsetTop=e[0]?e[0].offsetTop:0;t.offsetLeft=e[0]?e[0].offsetLeft:0;n.addClass("__no-lineheight token_unit");t.chr_h=n.height();a.remove()};function b(e,t){var n=v.default.highlight(t,e).value;var a=(new DOMParser).parseFromString("<i>"+n+"</i>","text/xml").firstElementChild;var r=[];function o(e,t){if(e.nodeType==e.TEXT_NODE){var n=e.nodeValue;if(r.length>0&&(n[0]==" "||n[0]=="\n")){r[r.length-1].text+=n[0];n=n.substr(1)}if(n.length>0)r.push({color:t,text:n})}else if(e.nodeType==e.ELEMENT_NODE){e.childNodes.forEach(function(n){return o(n,t+(e.className?" "+e.className:""))})}}o(a,"hljs");return r}_.prototype.tokenize=function(){var e=this.tokens;var t=[];var n=false;var a=0;var o=this.render_props.token_split_regex;this.token_opts.t=this.core.i18n&&this.core.i18n.t?this.core.i18n.t:function(e){e};if(this.render_props.logographic){var i=0;var l=true;var s=false;var u=undefined;try{for(var c=this.core.tokens[Symbol.iterator](),d;!(l=(d=c.next()).done);l=true){var f=d.value;var p=[];var m=true;var h=false;var v=undefined;try{for(var g=f.signs[Symbol.iterator](),y;!(m=(y=g.next()).done);m=true){var _=y.value;t=[];for(var w in _.t){var E=this.core.chars[i++];t.push(E)}p.push({g:_.g,t:t,tone:_.tone})}}catch(e){h=true;v=e}finally{try{if(!m&&g.return){g.return()}}finally{if(h){throw v}}}e.push(new r.default(p,this,a++,S,this.token_opts))}}catch(e){s=true;u=e}finally{try{if(!l&&c.return){c.return()}}finally{if(s){throw u}}}return}var k=20;var x=this.render_props.format?b(this.core.text,this.render_props.format):[{text:this.core.text,color:""}];var N=0,S="";var C=true;var O=false;var T=undefined;try{for(var I=x[Symbol.iterator](),P;!(C=(P=I.next()).done);C=true){var R=P.value;for(var L=0;L<R.text.length;L++){var E=this.core.chars[N];if(n){e.push(new r.default(t,this,a++,S,this.token_opts));n=false;t=[]}S=R.color;t.push({g:E.chr,t:[E]});n=E.chr.match(o)!=null||t.length>k;N++}n=true}}catch(e){O=true;T=e}finally{try{if(!C&&I.return){I.return()}}finally{if(O){throw T}}}if(t)e.push(new r.default(t,this,a++,S,this.token_opts))};_.prototype.cur_char=function(){return this.chars[this.core.cur_char_index]};_.prototype.did_font_change=function(){var e=parseInt((0,f.default)(this.tokens[0].dom).height());if(e!=this.facts.chr_h){this.font_change_report_count=this.font_change_report_count||0;this.font_change_report_count++}return e!=this.facts.chr_h};_.prototype.check_for_font_change=function(){if(this.did_font_change())this.update_font_change();this.check_for_font_change_interval+=600;if(this.check_for_font_change_interval<3e3)(0,p.setTimeout)(this.check_for_font_change.bind(this),this.check_for_font_change_interval)};_.prototype.update_font_change=function(){this.gather_arena_facts();this.cache_char_positions();this.cursor.css({height:this.facts.chr_h_with_lh})};_.prototype.change_font=function(e){if(!e)e="";this.arena.css("font-family",e)};_.prototype.create_cursor=function(){var e=this.cursor=(0,f.default)("<span>").addClass("cursor");var t=300;if(this.render_props&&this.render_props.cursor&&this.render_props.cursor){this.cursor.addClass(this.render_props.cursor.className)}e.css({width:22,height:this.facts.chr_h_with_lh});this.arena.prepend((0,f.default)("<div/>").append(e))};e.exports={Typable:_,get_render_props:y}},124:function(e,t,n){e.exports={escape:27,enter:13,space:32,backspace:8,tab:9,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,p:80,r:82,f5:116}},133:function(e){e.exports={name:"uix",version:"1.1.1-374",description:"typingclub student frontend code",repository:"https://github.com/EdClub/tpclub/tree/master/uix",scripts:{watch:"make watch-js",scss:"make watch-scss",eslint:"eslint .",eslintfix:"eslint --fix ."},author:"",license:"ISC",devDependencies:{"babel-core":"^6.26.3","babel-eslint":"^10.0.1","babel-loader":"^7.1.4","babel-plugin-espower":"^2.3.1","babel-plugin-transform-decorators-legacy":"^1.3.5","babel-preset-es2015":"^6.22.0","babel-preset-es2016":"^6.0.11","babel-preset-react":"^6.23.0","babel-preset-stage-0":"^6.5.0","babel-root-import":"^4.1.5",browserify:"^16.2.2",classnames:"^2.2.5","clean-webpack-plugin":"^0.1.19",easing:"^1.1.2",envify:"^4.1.0",eslint:"^5.7.0","eslint-config-airbnb":"^17.1.0","eslint-config-airbnb-base":"^13.1.0","eslint-loader":"^2.1.0","eslint-plugin-import":"^2.14.0","eslint-plugin-jsx-a11y":"^6.1.2","eslint-plugin-react":"^7.11.1",exorcist:"^1.0.1","expose-loader":"^0.7.5",gsap:"^2.0.2","i18next-scanner":"^1.7.0","immutability-helper":"^2.7.0",immutable:"^3.8.1",jquery:"^2.2.3","jquery.transit":"^0.9.12","js-cookie":"^2.1.2",jstimezonedetect:"^1.0.6",lodash:"^4.17.11",moment:"^2.22.2","moment-timezone":"^0.5.17",mousetrap:"^1.6.1","normalize.css":"^8.0.0","parse-svg-path":"^0.1.2","path-to-regexp":"^2.1.0",phaser:"^2.6.2","prop-types":"^15.6.1","raven-js":"^3.25.2",react:"^16.5.2","react-bootstrap":"^0.32.4","react-dom":"^16.5.2","react-hotkeys":"^1.1.4","react-sortable-hoc":"^0.8.3","react-tap-event-plugin":"^3.0.3","react-transition-group":"^2.5.0","svg-sprite":"^1.5.0","url-search-params":"^0.10.0",webfontloader:"^1.6.27",webpack:"^4.20.2","webpack-bundle-analyzer":"^3.0.2","webpack-cli":"^3.1.2","webpack-manifest-plugin":"^2.0.4","webpack-merge":"^4.1.4"},dependencies:{"@babel/polyfill":"^7.0.0","@vimeo/player":"github:EdClub/player.js",createjs:"^1.0.1","exports-loader":"^0.7.0",highcharts:"^6.0.4","highcharts-more":"^0.1.7",highlightjs:"^9.10.0",i18next:"^11.9.0","i18next-browser-languagedetector":"^2.2.0","i18next-xhr-backend":"^1.5.1","imports-loader":"^0.8.0",jest:"^22.4.0",npm:"^6.4.1","react-i18next":"^7.12.0","react-router":"^4.2.0","react-router-dom":"^4.2.2","react-stripe-checkout":"^2.6.3","remove-strict-webpack-plugin":"^0.1.2"}}},134:function(e,t,n){(function(t){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=n(80),i=o.Record,l=o.List,s=o.Map;var u=n(79);var c=n(135);var d=s();var f=void 0;var p="storage_";var m="_store";var h=l();var v=Object.freeze({none:-1,lifetime:2,stored:3});function g(){return(new Date).getTime()}function y(e){return Object.getOwnPropertySymbols(e).map(function(t){return t.toString()+e[t]}).join("_")}var _=i({key:null,route:null,changeHandlers:l(),initialInstrumentation:null,strategy:v.none,details:s(),is_invalid:false},"ResourceRequest");var b=i({callbacks:l(),errbacks:l(),hasData:false,data:null,hasError:false,error:null,updated:0});function w(e,n){if(!t.localStorage)return false;e=p+e;var a=JSON.stringify(n);t.localStorage.setItem(e,a);return true}function E(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t.localStorage)return n;e=p+e;var a=t.localStorage.getItem(e);if(!a)return n;var r=void 0;try{r=JSON.parse(a)}catch(e){return n}return r}function k(e){if(!t.localStorage)return;e=p+e;t.localStorage.removeItem(e)}var x=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;r(this,e);this.values={};this.storageKey=t;if(n){h=h.push(this)}}a(e,[{key:"get",value:function e(t){var n=E(this.storageKey,this.values);return n[t]}},{key:"set",value:function e(t,n){var a=E(this.storageKey,this.values);a[t]=n;w(this.storageKey,a)}},{key:"invalidate",value:function e(){k(this.storageKey)}}]);return e}();function N(){h.map(function(e){e.invalidate()})}function S(e){e.on("logout",N)}function C(){f=E(m,{})}function O(){return w(m,f)}C();function T(e,t,n){var a={key:e,strategy:t,initialInstrumentation:n||null};if(c.is_route_pattern(e)){a.route=c.compile(e)}d=d.set(e,new _(a))}function I(e,t){d=d.updateIn([e,"changeHandlers"],function(e){return e.push(t)});var n=d.get(e);if(n&&n.hasData){t(n.data)}}function P(e,t,n,a){var r=d.get(e);var o=void 0;if(!r){var i=true;var c=false;var f=undefined;try{for(var p=d.values()[Symbol.iterator](),m;!(i=(m=p.next()).done);i=true){var h=m.value;if(h.route){var v=h.route(e);if(v){e=h.key;o=y(v);r=h}}}}catch(e){c=true;f=e}finally{try{if(!i&&p.return){p.return()}}finally{if(c){throw f}}}}if(!r){t(n,a);return}var _=false;var w=r.details.get(o);if(!w){w=new b}if(w.hasData){n(w.data)}else{if(w.callbacks.isEmpty()&&w.errbacks.isEmpty())_=true;w=w.merge(s({callbacks:w.callbacks.push(n),errbacks:w.errbacks.push(a)}));d=d.set(e,r.set("details",r.details.set(o,w)))}if(_){var E=function t(n){var a=d.get(e);if(a.is_invalid){d=d.set(e,a.set("details",new s).set("is_invalid",false));return}var r={callbacks:l(),errbacks:l(),updated:g(),hasData:true,data:n};var i=a.details.get(o);u(!i.hasData,"more than one result came back for a single request");d=d.set(e,a.set("details",a.details.set(o,i.merge(s(r)))));a.changeHandlers.forEach(function(e){return e(n)});i.callbacks.forEach(function(e){return e(n)})};var k=function t(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++){a[r]=arguments[r]}var i=d.get(e);var u={callbacks:l(),errbacks:l(),updated:g(),hasError:true,error:a};var c=i.details.get(o);d=d.set(e,i.set("details",i.details.set(o,c.merge(s(u)))));c.errbacks&&c.errbacks.forEach(function(e){return e.apply(null,a)})};t(E,k)}}function R(e){var t=false;e.details.forEach(function(e){if(!e.hasData&&!e.callbacks.isEmpty())t=true});return t}function L(e){var t=d.get(e);if(t){if(R(t)){d=d.set(e,t.set("is_invalid",true))}else{d=d.set(e,t.set("details",new s))}}delete f[e];O()}e.exports={register:T,one:P,registerChangeHandler:I,Strategy:v,invalidate:L,set_in_permanent_storage:w,get_from_permanent_storage:E,delete_from_permanent_storage:k,Persistence:x,registerApprouterEventBus:S,_clear:function e(){d=s()},_print:function e(){d.forEach(function(e,t){console.log(" ",e.toJS(),t)})}};if(!t.is_prod){window.getCache=function(){return d};window.store=e.exports}}).call(this,n(14))},135:function(e,t,n){var a=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return e[0]=="{"||e.search("/{")>0}function i(e){var t=e.split("/");return t.map(function(e){if(e[0]=="{"&&e[e.length-1]=="}"){return Symbol.for(e.slice(1,e.length-1))}else{return e}})}function l(e){var t=[];e.split("&").forEach(function(e){if(!e)return;e=e.split("+").join(" ");var n=e.indexOf("=");var a=n>-1?e.substr(0,n):e;var r=n>-1?decodeURIComponent(e.substr(n+1)):"";t.push([decodeURIComponent(a),r])});return t}function s(e){var t=i(e);var n=[];var o=[];var s=[];function u(){if(n.length>0){var e=n.join("/");o.push(r(e));n=[]}}t.forEach(function(e){if((typeof e==="undefined"?"undefined":a(e))=="symbol"){s.push(e);u();o.push("([^/?]+)")}else{n.push(e)}});u();var c=new RegExp("^"+o.join("/")+"($|\\?.*)");return function(e){var t=c.exec(e);var n={};if(t){var a=t[s.length+1].slice(1);if(a){l(a).forEach(function(e){n[Symbol.for(e[0])]=e[1]})}s.forEach(function(e,a){n[e]=t[a+1]});return n}else{return null}}}e.exports={compile:s,is_route_pattern:o}},138:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(1);var o=s(r);var i=n(8);var l=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(e){d(t,e);function t(){var e;var n,a,r;u(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),c(a,r)}a(t,[{key:"componentDidMount",value:function e(){var t=(0,l.default)(this.refs.card);t.css({opacity:0,top:200,marginLeft:-1*this.props.width/2,width:this.props.width,transform:"scale(.8)"});setTimeout(function(){return t.css({opacity:1,transform:"scale(1)"})})}},{key:"render",value:function e(){return o.default.createElement("div",{className:"ed-card",ref:"card"},this.props.children)}}]);return t}(o.default.Component);t.default=f},150:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.EntryPage=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r,o,i,l;var s=n(17);var u=C(s);var c=n(77);var d=C(c);var f=n(1);var p=C(f);var m=n(8);var h=C(m);var v=n(20);var g=n(151);var y=C(g);var _=n(179);var b=C(_);var w=n(21);var E=C(w);var k=n(12);var x=C(k);var N=n(18);var S=C(N);function C(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function T(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function I(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var P=t.EntryPage=(r=(0,v.translate)(["common"],{wait:true}),r(o=function(e){I(t,e);function t(e){O(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};u.default.getSchoolAccount("www",function(e){return n.setState({oauths:e.oauths})});y.default.load({google:{families:["Indie+Flower","Roboto:100,300,400,700"]}});return n}a(t,[{key:"showAccountSelection",value:function e(t){this.setState({credentials:t})}},{key:"render",value:function e(){var t=this;var n=this.props,a=n.t,r=n.is_signup;var o=this.state,i=o.oauths,l=o.credentials,s=o.loading;var u=null,c=null,d=null;var f;var m;if(r){m=p.default.createElement("p",null,a("You are about to sign up for TypingClub's Individual Edition. If you are an instructor and wish to create a school account"),", ",p.default.createElement("a",{href:settings.tpc_domain+"/schools/signup.html"},a("use this form instead.")))}else if(window.cordova){m=p.default.createElement("div",null," ")}else{m=p.default.createElement("p",{role:"heading"},a("For school accounts, please go to your school login page.")," ",p.default.createElement("a",{href:(window.settings?settings.tpc_domain:"https://s.typingclub.com")+"/find-school-code.html"},a("Use this form to look up your school code.")))}var h=function e(n){return t.setState({loading:n})};if(l){f=p.default.createElement(A,{t:a,credentials:l})}else if(this.state.forgotPassword){f=p.default.createElement(L,{t:a,goBack:function e(){return t.setState({forgotPassword:false})}})}else if(this.state.classSignupCode){f=p.default.createElement(R,{t:a,goBack:function e(){return t.setState({classSignupCode:false})}})}else{if(!i)f=p.default.createElement("div",{className:"boxLoading"});else f=p.default.createElement("div",{className:"container"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},p.default.createElement("img",{src:STATIC_URL+"corp2/img/typingclub_logo.png"})),p.default.createElement("div",{className:"ed-tpc-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},"Individual Edition")),m),p.default.createElement("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},s?p.default.createElement("div",{className:"ed-sign",style:{position:"relative"}},p.default.createElement("h3",{style:{textAlign:"center",padding:"100px 0 250px"}},"Checking profile..."),p.default.createElement("div",{className:"boxLoading boxLoading-dark"}),p.default.createElement("a",{onClick:function e(){return h(false)}},"« ",a("Back to "+(r?"Sign Up":"Log-in")+" Page"))):r?p.default.createElement(H,{t:a,handler:this,oauths:i,toggleLoading:h,classSignupCode:function e(){return t.setState({classSignupCode:true})}}):p.default.createElement(Y,{t:a,handler:this,oauths:i,toggleLoading:h,forgotPassword:function e(){return t.setState({forgotPassword:true})}}),!s&&p.default.createElement("div",{className:"ed-account"},r?p.default.createElement("div",null,a("Already have an account?")," ",p.default.createElement("a",{onClick:E.default.login_page},a("Log-in"))):p.default.createElement("div",null,a("Don't have an account?")," ",p.default.createElement("a",{id:"signup-link",onClick:E.default.signup_page},a("Sign up")))))))}return p.default.createElement("div",null,p.default.createElement("div",{className:"ed-log-in-container"},f),p.default.createElement("div",{className:"ed-footer-nav container"},p.default.createElement("a",{href:"https://www.typingclub.com"},"TypingClub"),p.default.createElement("a",{href:"https://www.typingclub.com/privacy.html"},a("Privacy Policy")),p.default.createElement("a",{href:"https://www.typingclub.com/terms.html"},a("Terms of Service"))))}}]);return t}(p.default.Component))||o);var R=function(e){I(t,e);function t(){var e;var n,a,r;O(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),T(a,r)}a(t,[{key:"componentDidMount",value:function e(){this.refs.classCode.focus()}},{key:"checkClassCode",value:function e(t){var n=this;this.setState({error:null});if(!t)return;u.default.checkClassCode("",t,function(e){if(e)window.location=settings.tpc_domain+"/signup/"+t;else n.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})})}},{key:"render",value:function e(){var t=this;var n=this.props.t;var a=this.state.error;return p.default.createElement("div",{className:"container"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},p.default.createElement("img",{src:STATIC_URL+"corp2/img/typingclub_logo.png"})),p.default.createElement("div",{className:"ed-tpc-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},"Individual Edition")),p.default.createElement("p",{style:{textAlign:"center"}},n("Use this page to sign up with a class code."))),p.default.createElement("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},p.default.createElement("div",{className:"ed-sign"},p.default.createElement("p",null,n("Enter your class code here:")),p.default.createElement("div",{className:"form-group"},p.default.createElement("input",{ref:"classCode",className:"inpt ed-input-log-in",placeholder:"Your class code",onKeyPress:function e(n){return n.charCode===13&&t.checkClassCode(t.refs.classCode.value)}})),p.default.createElement("div",{className:"errorlist",role:"alert"},a&&p.default.createElement("div",{id:"error-container",className:"error"},a)),p.default.createElement("button",{className:"btn log-in-with",style:{textAlign:"center"},onClick:function e(){return t.checkClassCode(t.refs.classCode.value)}},n("Sign Up")),p.default.createElement("br",null),p.default.createElement("br",null),p.default.createElement("a",{onClick:this.props.goBack},"« ",n("Back to Sign Up Page"))))))}}]);return t}(p.default.Component);var L=function(e){I(t,e);function t(){var e;var n,a,r;O(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),T(a,r)}a(t,[{key:"render",value:function e(){var t=this;var n=this.props,a=n.t,r=n.goBack;var o=this.state,i=o.email_sent,l=o.email_not_found;return p.default.createElement("div",{className:"container"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},p.default.createElement("img",{src:STATIC_URL+"corp2/img/typingclub_logo.png"})),p.default.createElement("div",{className:"ed-tpc-logo"},p.default.createElement("a",{href:"https://www.typingclub.com"},"Individual Edition")),p.default.createElement("p",{style:{textAlign:"center"}},a("Use this page to reset your password."))),p.default.createElement("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},p.default.createElement("div",{className:"ed-sign"},i?p.default.createElement("div",null,p.default.createElement("b",{style:{fontSize:18}},a("Email Sent"),"!"),p.default.createElement("br",null),p.default.createElement("br",null),p.default.createElement("p",null,a("Please check your email for further instructions to reset your password."))):p.default.createElement("div",null,p.default.createElement("div",{className:"errorlist",role:"alert"},l&&p.default.createElement("div",{id:"error-container",className:"error"},p.default.createElement("p",null,a("The email address ({{email}}) did not match any records. Please make sure that it is typed correctly.",{email:this.state.email}),"If you believe that this is an error please ",p.default.createElement("em",null,p.default.createElement("a",{href:"mailto:support@typingclub.com"},"contact support."))))),p.default.createElement("p",null,a("Please provide your email address:")),p.default.createElement("div",{className:"form-group"},p.default.createElement("input",{className:"inpt ed-input-log-in",type:"text",ref:"email","aria-label":"Email",placeholder:"Your email address"})),p.default.createElement("button",{className:"btn log-in-with",onClick:function e(){var n=t.refs.email.value;t.setState({email_sent:false,email_not_found:false,email:n});if(!n)return;u.default.forgotPassword("www",n,function(e){return t.setState(e)})}},a("Reset Password"))),p.default.createElement("br",null),p.default.createElement("a",{onClick:r},"« ",a("Back to Login Page"))))))}}]);return t}(p.default.Component);var A=function e(t){var n=t.t,a=t.credentials;return p.default.createElement("div",{className:"container"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 ed-log-in-logo"},p.default.createElement("a",{href:"https://www.typingclub.com",className:"tpc-logo-center"},p.default.createElement("img",{src:STATIC_URL+"pub/images/tpc-logo.svg"})),p.default.createElement("a",{className:"ed-tpc-logo-center",href:"https://www.typingclub.com"},"TypingClub"),p.default.createElement("div",{className:"ed-sign ed-sign-center"},p.default.createElement("h4",null,"Choose Your Account:"),p.default.createElement("p",null,"You seem to have more than one account with TypingClub."),a.user&&p.default.createElement("div",null,p.default.createElement("div",{className:"ed-gray-line"}),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},p.default.createElement("h5",null,"Individual Edition"),p.default.createElement("h6",null,a.user.student_name),p.default.createElement("h6",{style:{color:"gray",textAlign:"left"}},p.default.createElement("b",null,"www"),".typingclub.com")),p.default.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},p.default.createElement("button",{onClick:function e(){return u.default.getUserToken(a.user.domain,null,null,function(e){b.default.signUserIn(e.api_token);E.default.apply_env(E.default.current_app)},null,a.user.sign)},className:"btn log-in-with"},"Sign in")))),p.default.createElement("div",null,a.tpc_users.map(function(e){return p.default.createElement("div",{key:e.domain},p.default.createElement("div",{className:"ed-gray-line"}),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},p.default.createElement("h5",null,"School Edition"),p.default.createElement("h6",null,e.name),p.default.createElement("h6",{style:{color:"gray",textAlign:"left"}},p.default.createElement("b",null,e.domain),".typingclub.com")),p.default.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},p.default.createElement("button",{onClick:function t(){window.location="//"+e.domain+".typingclub.com?sign="+encodeURIComponent(e.sign)},className:"btn log-in-with"},"Sign in"))))}),p.default.createElement("div",{className:"ed-gray-line"}))))))};var M={google:{name:"Google",icon:"google-icon",background:"white"},office365:{name:"Office 365",icon:"office-365-white"},facebook:{name:"Facebook",icon:"facebook-icon-white"},clever:{name:"Clever",icon:"clever-icon-white"}};var j=function e(t,n,a,r,o){return p.default.createElement("div",null,Object.keys(M).map(function(e){return t[e]&&p.default.createElement("a",{key:e,className:"btn log-in-with",onClick:function i(){if(e=="clever"){var l=t.clever;var s=Object.assign({response_type:"code",redirect_uri:t.BASE_DOMAIN+"/cleverOauth"},l.PARAMS);window.location=l.AUTHORIZE_URL+"?"+h.default.param(s)}else b.default.oauthWithPopup(e,n,t,o).then(a).catch(r)},"aria-label":(n?"Login":"Signup")+" with your "+M[e].name+" account"},p.default.createElement("img",{style:{background:M[e].background||"inherit"},src:STATIC_URL+"pub/images/"+M[e].icon+".svg"}),"Sign ",n?"up":"in"," with ",M[e].name)}))};function G(){var e=x.default.get2dict().next;if(e)E.default.goto_window_url(e);else E.default.dashboard()}var Y=function e(t){var n=t.t,a=t.handler,r=t.oauths,o=t.forgotPassword,i=t.toggleLoading;return p.default.createElement("div",{className:"ed-sign"},j(r,false,function(e){if(e)a.showAccountSelection(e);else G()},function(e){var t;if(e)t=e.responseJSON;else t=n("You do not have an account with us yet.")+' <a onclick="'+"document.getElementById('signup-link').click()"+'">'+n("Do you want to create an account now?")+"</a>";setTimeout(function(){return(0,h.default)("#error-container").html(t)})},i),p.default.createElement("div",{className:"ed-blue-line-left"}),p.default.createElement("div",{className:"ed-or"},n("OR")),p.default.createElement("div",{className:"ed-blue-line-right"}),p.default.createElement("div",{className:"form-group"},p.default.createElement("input",{className:"inpt ed-input-log-in",type:"text",id:"username","aria-label":"Username or email",autoFocus:true,placeholder:n("Username or Email"),onKeyPress:function e(t){if(t.charCode===13){var n=(0,h.default)("#password");if(n.val())(0,h.default)("#login-with-password").click();else n.focus()}}}),p.default.createElement("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:n("Password"),onKeyPress:function e(t){return t.charCode===13&&(0,h.default)("#login-with-password").click()}})),p.default.createElement("div",{className:"errorlist",role:"alert"},p.default.createElement("div",{id:"error-container",className:"error"})),p.default.createElement("div",{style:{marginTop:25}},p.default.createElement("button",{id:"login-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:function e(){var t=(0,h.default)("#username").val();var a=(0,h.default)("#password").val();if(!t||!a){(0,h.default)("#error-container").html(n("Please enter both username and password"));return}(0,h.default)("#error-container").html("");i&&i(true);u.default.getUserToken("www",t,a,function(e){b.default.signUserIn(e.api_token);G()},function(e){i&&i(false);(0,h.default)("#password").val("");if(e.status==500)(0,h.default)("#error-container").html(V(n).ServerError);else(0,h.default)("#error-container").html(n("The username and password you entered did not match our records. Please double-check and try again."))})}},n("Sign in"))),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-md-6"}),p.default.createElement("div",{className:"col-md-6"},p.default.createElement("div",{className:"ed-forget-password"},p.default.createElement("a",{onClick:o},n("Forgot your password?"))))))};var H=function e(t){var n=t.t,a=t.handler,r=t.oauths,o=t.classSignupCode,i=t.toggleLoading;return p.default.createElement("div",{className:"ed-sign"},p.default.createElement("p",{style:{textAlign:"right",fontSize:18,marginBottom:15}},p.default.createElement("a",{onClick:o},n("I have a class signup code"))),j(r,true,function(e){return G()},function(){return(0,h.default)("#error-container").html("You already have an account with us. Do you want to signin instead?")},i),p.default.createElement("div",{className:"ed-blue-line-left"}),p.default.createElement("div",{className:"ed-or"},n("OR")),p.default.createElement("div",{className:"ed-blue-line-right"}),p.default.createElement("div",{className:"form-group"},p.default.createElement("input",{className:"inpt ed-input-log-in",type:"text",id:"fname","aria-label":"First Name",autoFocus:true,placeholder:n("First Name"),onKeyPress:function e(t){return t.charCode===13&&(0,h.default)("#lname").focus()}}),p.default.createElement("input",{className:"inpt ed-input-log-in",type:"text",id:"lname","aria-label":"Last Name",placeholder:n("Last Name"),onKeyPress:function e(t){return t.charCode===13&&(0,h.default)("#username").focus()}}),p.default.createElement("input",{className:"inpt ed-input-log-in",type:"text",id:"username_or_email","aria-label":"Username or email",placeholder:n("Username or Email"),onKeyPress:function e(t){return t.charCode===13&&(0,h.default)("#password").focus()}}),p.default.createElement("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:n("Password"),onKeyPress:function e(t){return t.charCode===13&&(0,h.default)("#sign-up-with-password").click()}})),p.default.createElement("div",{className:"errorlist",role:"alert"},p.default.createElement("div",{id:"error-container",className:"error"})),p.default.createElement("div",{style:{marginTop:25}},p.default.createElement("button",{id:"sign-up-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:function e(){var t=(0,h.default)("#fname").val();var a=(0,h.default)("#lname").val();var r=(0,h.default)("#password").val();var o=(0,h.default)("#username_or_email").val();if(!t){(0,h.default)("#error-container").html(n("Please enter your first name"));return}if(!o||!r){(0,h.default)("#error-container").html(n("Please enter both username and password"));return}var l={fname:t,lname:a,password:r};if(x.default.validateEmail(o))l.email=o;else l.username=o;(0,h.default)("#error-container").html("");i&&i(true);u.default.updateProfile(l,function(){return G()},function(e){i&&i(false);setTimeout(function(){(0,h.default)("#fname").val(t);(0,h.default)("#lname").val(a);var r=e.responseJSON;if(r&&r.student){if(r.student.email)(0,h.default)("#error-container").html(n('Email "{{email}}" is already taken',{email:o}));else(0,h.default)("#error-container").html(n('Username "{{username}}" is already taken',{username:o}))}else{(0,h.default)("#error-container").html(n("Some unexpected error occured. Please try again later."))}})})}},n("Sign Up"))))};function D(e){return p.default.createElement(d.default,{style:"ENTRY",cloudBody:true,header:null},p.default.createElement("img",{src:"/m/pub/images/tpc-clouds-background.svg",className:"tpc-cloud"}),p.default.createElement(P,{is_signup:e}))}function z(e,t){if(t&&!t.is_anonymous)E.default.dashboard();else return D(false)}function B(e,t){if(t&&!t.is_anonymous)E.default.dashboard();else return D(true)}var U={google:{name:"Google",icon:"google-icon",background:"white"},clever:{name:"Clever",icon:"clever-icon-white"},classlink:{name:"Classlink",icon:"classlink-icon-white"},office365:{name:"Office 365",icon:"office-365-white"},facebook:{name:"Facebook",icon:"facebook-icon-white"}};var V=function e(t){return{InactiveUser:t("Your account is no longer active. Please speak to your instructor to have your account reactivated."),TeacherLoginNotSupported:t("Teachers, please sign in using a browser."),UserPass:t("Username and/or Password is wrong."),UserNotFound:t("User not found."),SchoolCode:t("School code does not exist."),BlockedIP:t("Your IP address has been blocked due to too many requests."),ServerError:t("There was an error during the login. Please wait a bit and try again.")}};var F=(i=(0,v.translate)(["common"],{wait:true}),i(l=function(e){I(t,e);a(t,[{key:"getErrorText",value:function e(t){return V(this.props.t)[t]||t}}]);function t(e){O(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={tab:"change-domain"};n.url_domain=!window.cordova&&location.hostname.split(".")[0];var a=window.cordova?localStorage.getItem("domain-key"):n.url_domain;if(a&&a!="s")n.domain=a;var r=x.default.get2dict().sign;if(r){u.default.clearProfile();n.state.tab="checking-profile";u.default.getUserToken(a,null,null,function(e){if(e.instructor)window.location="/portal";else{b.default.signUserIn(e.api_token);E.default.dashboard()}},function(){return n.setState({tab:"change-domain"})},r)}else if(u.default.getToken()){n.state.tab="checking-profile";Q();E.default.dashboard()}else if(n.domain){n.state.tab="login";n.setSchool(a,function(e){return n.setState({tab:"change-domain",error:e})})}return n}a(t,[{key:"setSchool",value:function e(t,n){var a=this;u.default.getSchoolAccount(t,function(e){if(a.url_domain&&t!=a.url_domain){window.location="//"+t+location.host.substr(a.url_domain.length)+location.search;return}if(window.cordova)localStorage.setItem("domain-key",t);if(e.oauths&&e.oauths.google&&e.oauths.google.force_google_logout)localStorage.setItem("force_google_logout",true);a.setState({tab:"login",acc:e})},function(e){return n(a.getErrorText(e.responseJSON))})}},{key:"render",value:function e(){var t=this;var n=this.state,a=n.tab,r=n.acc;if(a=="checking-profile")return p.default.createElement(q,null);var o="";if(a=="change-domain")o=p.default.createElement(K,{domain:!r&&this.domain,goBack:r&&function(){return t.setState({tab:"login"})},setSchool:this.setSchool.bind(this)});else{if(!r)return null;if(a=="signup")o=p.default.createElement(X,{acc:r});else if(a=="reset-password")o=p.default.createElement(J,{acc:r})}var i=window.cordova?p.default.createElement("p",null):p.default.createElement("a",{href:"https://s.typingclub.com/find-school-code.html"},"Find Your School Code");if(o)return p.default.createElement("div",{className:"page",style:a=="signup"?{width:450}:{}},p.default.createElement("div",{style:{position:"relative"}},p.default.createElement("div",{className:"logo"}),p.default.createElement("div",{className:"school-name"},"School Edition"),o,r?p.default.createElement("a",{onClick:function e(){t.setState({tab:"login"})}},p.default.createElement("i",{className:"edicon-arrow-down"})," Back to Login Page"):i,!window.cordova&&p.default.createElement("a",{style:{float:"right"},href:"https://s.typingclub.com/schools/signup.html"},"Sign Up New Account")));return p.default.createElement(W,{changeDomain:function e(){return t.setState({tab:"change-domain"})},resetPassword:function e(){return t.setState({tab:"reset-password"})},signup:function e(){return t.setState({tab:"signup"})},acc:r,schoolOauths:U,getErrorText:this.getErrorText.bind(this)})}}]);return t}(p.default.Component))||l);var q=function e(){return p.default.createElement("div",{className:"page"},p.default.createElement("div",{style:{position:"relative"}},p.default.createElement("div",{className:"logo"}),p.default.createElement("h3",{style:{padding:"20px 0 140px",textAlign:"center"}},"Checking profile..."),p.default.createElement("div",{className:"boxLoading boxLoading-dark"})),p.default.createElement("a",{id:"change-school",className:"change-btn",onClick:function e(){return location.reload()}},"×"))};var W=function(e){I(t,e);function t(){var e;var n,a,r;O(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),T(a,r)}a(t,[{key:"componentDidMount",value:function e(){if(this.state.acc&&this.state.acc.is_email_password_login_enabled)this.refs.username.focus()}},{key:"render",value:function e(){var t=this;if(this.state.loading)return p.default.createElement(q,null);var n=this.props,a=n.acc,r=n.getErrorText,o=n.schoolOauths;var i=Object.keys(o).filter(function(e){return e in a.oauths});var l=a.is_email_password_login_enabled||this.state.show_username_password;var s=i.length>2&&l;var c=p.default.createElement("div",{className:"oauth-buttons"},i.map(function(e){return p.default.createElement("button",{key:e,onClick:function n(){return b.default.oauthWithPopup(e,false,a.oauths,function(e){return t.setState({loading:e})}).then(function(){Q();E.default.dashboard()}).catch(function(e){return t.setState({error:r(e&&e.responseJSON||"UserNotFound")})})}},p.default.createElement("img",{style:{background:o[e].background||"inherit"},src:STATIC_URL+"tpc-login/"+o[e].icon+".svg"}),!s&&"Sign in with "," ",o[e].name)}));return p.default.createElement("div",{className:"page",style:s?{width:650,paddingLeft:290}:{}},p.default.createElement("a",{id:"change-school",className:"change-btn",onClick:this.props.changeDomain},"×"),s&&p.default.createElement("div",{className:"left-side-page",style:{paddingTop:i.length<5?110:50}},p.default.createElement("h4",null,"Sign In with:"),c,p.default.createElement("div",{className:"or",style:{position:"absolute",top:"51%",right:-20}},"OR")),p.default.createElement("div",{style:{position:"relative"}},p.default.createElement("div",{className:"logo"}),p.default.createElement("div",{className:"school-name"},a.name),i.length>0&&!s&&p.default.createElement("div",null,c,l&&p.default.createElement("div",{className:"or-cnt"},p.default.createElement("span",{className:"line line-l"}," "),p.default.createElement("span",{className:"or"},"OR"),p.default.createElement("span",{className:"line line-r"}," "))),p.default.createElement("div",{className:"errors",style:s?{height:0,margin:0,whiteSpace:"pre-wrap"}:{}},this.state.error||" "),l&&p.default.createElement("div",null,p.default.createElement("div",{style:{marginTop:s?70:10}},p.default.createElement("input",{type:"text",placeholder:"Username or Email",id:"username",ref:"username",autoCapitalize:"off",onKeyPress:function e(n){return n.charCode===13&&t.refs.login_button.click()},autoCorrect:"off",autoComplete:"off",autoFocus:"autofocus"}),p.default.createElement("input",{type:"password",placeholder:"Password",id:"password",ref:"password",autoCapitalize:"off",onKeyPress:function e(n){return n.charCode===13&&t.refs.login_button.click()},autoCorrect:"off",autoComplete:"off"})),p.default.createElement("div",{style:{textAlign:"right",fontSize:16}},p.default.createElement("button",{ref:"login_button",onClick:function e(){var n=t.refs.username.value;var o=t.refs.password.value;if(!n)return t.setState({error:"Need a valid username/email."});t.setState({error:null,loading:true});u.default.getUserToken(a.domain,n,o,function(e){b.default.signUserIn(e.api_token);E.default.dashboard()},function(e){t.setState({loading:false,error:r(e.responseJSON||"ServerError")})})},id:"login-btn",className:"login-btn"},"Login"))),p.default.createElement("div",{style:{marginTop:5,height:30}},l?p.default.createElement("a",{onClick:this.props.resetPassword},"Forgot your password?"):p.default.createElement("a",{onClick:function e(){return t.setState({show_username_password:true})}},"Login with password"),a.joinable&&p.default.createElement("a",{onClick:this.props.signup,style:{float:"right"}},"Enter a Class Code"))))}}]);return t}(p.default.Component);var K=function(e){I(t,e);function t(e){O(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};return n}a(t,[{key:"getSchool",value:function e(t){var n=this;this.props.setSchool(t,function(e){return n.setState({error:e})})}},{key:"componentDidMount",value:function e(){this.refs.domain.focus()}},{key:"render",value:function e(){var t=this;return p.default.createElement("div",null,p.default.createElement("h3",null,"Enter Your School Code"),"Your school code is the first part of your TypingClub School Edition’s portal URL.",window.cordova?" Please ask your teacher or instructor if you don't know what your school code is.":" For example, if your account’s login URL is: https://yourschool.typingclub.com your school code would be yourschool.",p.default.createElement("input",{type:"text",ref:"domain",autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",placeholder:"Your School Code",onKeyPress:function e(n){return n.charCode===13&&t.getSchool(t.refs.domain.value)}}),this.state.error&&p.default.createElement("div",{className:"errors"},this.state.error),p.default.createElement("div",{style:{margin:"15px 0"}},p.default.createElement("button",{onClick:function e(){return t.getSchool(t.refs.domain.value)}},"Set School")))}}]);return t}(p.default.Component);var J=function(e){I(t,e);function t(){var e;var n,a,r;O(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),T(a,r)}a(t,[{key:"componentDidMount",value:function e(){this.refs.resetEmail.focus()}},{key:"resetPassword",value:function e(t){var n=this;this.setState({email_not_found:false,email:t});if(!t)return;u.default.forgotPassword(this.props.acc.domain,t,function(e){return n.setState(e)})}},{key:"render",value:function e(){var t=this;var n=this.state.email_not_found;return this.state.email_sent?p.default.createElement("div",{style:{marginBottom:15}},p.default.createElement("h3",null,"Email Sent!"),"Please check your email for further instructions to reset your password."):p.default.createElement("div",null,p.default.createElement("h3",null,"Students:"),"Please ask your teacher for help if you've forgotten your password or are having trouble logging in.",p.default.createElement("h3",null,"Instructors"),"Please enter your email address below:",p.default.createElement("input",{ref:"resetEmail",type:"email",style:{fontWeight:"normal",marginTop:15},placeholder:"Your email address",onKeyPress:function e(n){return n.charCode===13&&t.resetPassword(t.refs.resetEmail.value)}}),n&&p.default.createElement("div",{className:"errors"},"The email address (",this.state.email,") did not match any records. Please make sure that it is typed correctly. If you believe that this is an error, please ",p.default.createElement("em",null,p.default.createElement("a",{href:"mailto: support@typingclub.com"},"contact support"))),p.default.createElement("button",{style:{margin:"15px 0"},onClick:function e(){return t.resetPassword(t.refs.resetEmail.value)}},"Reset Password"))}}]);return t}(p.default.Component);var X=function(e){I(t,e);function t(){var e;var n,a,r;O(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),T(a,r)}a(t,[{key:"componentDidMount",value:function e(){this.refs.classCode.focus()}},{key:"checkClassCode",value:function e(t){var n=this;this.setState({error:null});if(!t)return;u.default.checkClassCode(this.props.acc.domain,t,function(e){if(e)E.default.goto_url_name("signup_page",{class_code:t});else n.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})})}},{key:"render",value:function e(){var t=this;var n=this.props.acc;return p.default.createElement("div",null,"Enter your class code below. If you don't have one, ask your instructor.",p.default.createElement("input",{ref:"classCode",style:{fontWeight:"normal",marginTop:15},placeholder:"Your class code",onKeyPress:function e(n){return n.charCode===13&&t.checkClassCode(t.refs.classCode.value)}}),this.state.error&&p.default.createElement("div",{className:"errors"},this.state.error),p.default.createElement("button",{style:{margin:"15px 0"},onClick:function e(){return t.checkClassCode(t.refs.classCode.value)}},"Sign Up"))}}]);return t}(p.default.Component);var $=function(e){I(t,e);function t(e){O(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={lock_button:false};u.default.checkClassCode("",e.code,function(t){if(t)n.setState(t);else n.setState({error:p.default.createElement("h4",null,"Class code ",p.default.createElement("b",null,e.code)," is no longer valid. Please ask your teacher for the new class code.")})});return n}a(t,[{key:"componentDidUpdate",value:function e(){if(this.state.password_enabled&&!this.state.loading)this.refs.fname.focus()}},{key:"oauthSignup",value:function e(t){var n=this;u.default.signup2Class({code:this.props.code,sign:t.sign},function(e){b.default.signUserIn(e.api_token);E.default.dashboard()},function(e){return n.setState({signup_error:e.responseJSON})})}},{key:"render",value:function e(){var t=this;var n=this.state,a=n.school_name,r=n.class_name,o=n.password_enabled,i=n.oauths,l=n.error,s=n.loading;if(!l&&!a)return null;if(this.state.loading)return p.default.createElement(q,null);var c=[];if(i)c=i?Object.keys(U).filter(function(e){return e in i}):[];var d=c.length>0&&o;var f=p.default.createElement("div",{className:"oauth-buttons"},c.map(function(e){return p.default.createElement("button",{key:e,onClick:function n(a){var r=a.target;r.disabled=true;b.default.oauthWithPopup(e,true,i,function(e){r.disabled=e;t.setState({loading:e})}).then(t.oauthSignup.bind(t)).catch(function(e){return t.setState({signup_error:e.responseJSON})})}},p.default.createElement("img",{style:{background:U[e].background||"inherit"},src:STATIC_URL+"tpc-login/"+U[e].icon+".svg"}),!d&&"Sign up with "," ",U[e].name)}));return p.default.createElement("div",{className:"page",style:d?{width:650,paddingLeft:290}:{}},p.default.createElement("a",{id:"change-school",className:"change-btn",onClick:function e(){return E.default.goto_url_name("login_page")}},"×"),d&&p.default.createElement("div",{className:"left-side-page",style:{paddingTop:120}},p.default.createElement("h4",null,"Sign up with:"),f,p.default.createElement("div",{className:"or",style:{position:"absolute",top:"45%",right:-20}},"OR")),p.default.createElement("div",{style:{position:"relative"}},p.default.createElement("div",{className:"logo"}),p.default.createElement("div",{className:"school-name"},p.default.createElement("div",null,a),r&&p.default.createElement("div",{style:{fontSize:16,marginTop:5}},r)),l&&p.default.createElement("div",{className:"errors"},l),c.length>0&&!d&&p.default.createElement("div",null,f,o&&p.default.createElement("div",{className:"or-cnt"},p.default.createElement("span",{className:"line line-l"}," "),p.default.createElement("span",{className:"or"},"Or"),p.default.createElement("span",{className:"line line-r"}," "))),o&&p.default.createElement("div",null,p.default.createElement("input",{ref:"fname",placeholder:"First Name",onKeyPress:function e(n){return n.charCode===13&&t.refs.lname.focus()}}),p.default.createElement("input",{ref:"lname",placeholder:"Last Name (optional)",onKeyPress:function e(n){return n.charCode===13&&t.refs.username.focus()}}),p.default.createElement("input",{ref:"username",placeholder:"Username or Email",onKeyPress:function e(n){return n.charCode===13&&t.refs.password.focus()}}),p.default.createElement("input",{ref:"password",placeholder:"Password",onKeyPress:function e(n){return n.charCode===13&&t.refs.login_button.click()}}),this.state.signup_error&&p.default.createElement("div",{className:"errors"},this.state.signup_error),p.default.createElement("button",{ref:"login_button",disabled:!this.state.value&&this.state.lock_button,onClick:function e(){var n=t.refs.username.value.trim(),a=t.refs.password.value,r=a,o=t.refs.fname.value,i=t.refs.lname.value;if(!n||!a)return t.setState({signup_error:"Need a valid username/email and password."});if(a!=r)return t.setState({signup_error:"Confirm Password does not match Password."});var l={fname:o,lname:i,username:n,password:a,code:t.props.code};t.setState({signup_error:null,lock_button:true});u.default.signup2Class(l,function(e){b.default.signUserIn(e.api_token);E.default.dashboard()},function(e){return t.setState({signup_error:e.responseJSON,lock_button:false})})},id:"login-btn",className:"login-btn"},"Sign Up")),p.default.createElement("a",{onClick:function e(){return E.default.goto_url_name("login_page")}},p.default.createElement("i",{className:"edicon-arrow-down"})," Back to Login Page")))}}]);return t}(p.default.Component);function Q(){if(window.cordova)x.default.show_ios_focus_popup("Welcome. Tap here to start.")}var Z=p.default.createElement("div",{className:"footer-links"},p.default.createElement("a",{href:"https://www.typingclub.com"},"About TypingClub"),p.default.createElement("a",{href:"/schools.html"},"Schools"),p.default.createElement("a",{href:"https://www.typingclub.com/privacy.html"},"Privacy"),p.default.createElement("a",{href:"https://www.typingclub.com/terms.html"},"Terms"),p.default.createElement("a",{href:"/help.html"},"Help"));function ee(e){return p.default.createElement(d.default,{style:"SCHOOL-ENTRY",header:null,skyBody:true},p.default.createElement(F,null),!window.cordova&&Z)}ee.authorization=function(e){return true};function te(e){return p.default.createElement(d.default,{style:"SCHOOL-ENTRY",header:null,skyBody:true},p.default.createElement($,{code:e.class_code}),!window.cordova&&Z)}te.authorization=function(e){return true};e.exports={login_app:z,signup_app:B,listInOauthOptions:j,school_login_app:ee,school_signup_app:te}},17:function(e,t,n){(function(t){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(91);var o=T(r);var i=n(1);var l=T(i);var s=n(18);var u=T(s);var c=n(133);var d=n(8);var f=T(d);var p=n(12);var m=T(p);var h=n(42);var v=T(h);n(362);var g=n(363);var y=T(g);var _=n(364);var b=T(_);var w=n(134);var E=T(w);var k=n(79);var x=T(k);var N=n(27);var S=T(N);var C=n(135);var O=T(C);function T(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var R=Object.freeze({BadRequest:400,Unauthorized:401,NotFound:404,InternalServerError:500,ServiceUnavailable:503,Offline:0});var L={is_production:true};function A(){var e=c.version.match(/(\d+)\.(\d+)\.\d+(?:-\d+)?/);var t=e[1],n=e[2];return t+"."+n}function M(){$("/api/v"+j+"/settings/").then(function(e){if(!t.cordova&&e.full_version!==c.version){Y(e.full_version);return}Object.assign(L,e);window.settings_loaded=true;Raven.captureBreadcrumb({category:"log",level:"info",message:"Settings Loaded"});t.settings=L;t.is_prod=L.is_production;t.is_tp=L.is_individual_edition;t.hide_ads=L.is_global_hide_ads;t.is_lp_authoring=L.is_lp_authoring})}var j=A();var G=false;var Y=function e(){};var H=function e(){if(localStorage.getItem("login_method")=="google"&&localStorage.getItem("force_google_logout")=="true"){if(window.cordova){SafariViewController.show({url:"https://accounts.google.com/logout"},function(e){if(e.event==="loaded"){SafariViewController.hide();approuter.goto_app("shared.school_login_app");z()}})}else{z();document.location="/logout/?login_method=google"}}else{z();if(window.cordova)approuter.goto_app("shared.school_login_app");else document.location="/logout/"}z()};function D(e){if(window.cordova)localStorage.setItem("token",e);else o.default.set("api_token",e)}function z(){if(window.cordova)localStorage.removeItem("token");else o.default.remove("api_token")}function B(){var e=void 0;if(window.cordova)e=localStorage.getItem("token");else e=o.default.get("api_token");if(!e&&window.is_tp)e="default";return e}function U(){return{Authorization:"Token "+B(),cordova:window.cordova?"true":"false"}}M();function V(){H(true)}function F(){if(typeof window.API_BASE_DOMAIN=="undefined")return"";return window.API_BASE_DOMAIN}function q(e,n,a){switch(e.status){case R.BadRequest:if(!L.is_production)return;var r=f.default.parseJSON(e.responseText);if(r.api_upgrade_required){Ee(r.api_upgrade_required)}break;case R.InternalServerError:try{W(JSON.parse(e.responseText).traceback);console.error(JSON.parse(e.responseText).traceback)}catch(e){}break;case R.ServiceUnavailable:approuter.show_modal(l.default.createElement(u.default,{id:"err503",width:450,show_x:false,close_outside:false,esc_close:false},l.default.createElement("h3",null,"Service Temporarily Unavailable"),l.default.createElement("hr",null),l.default.createElement("p",null,"TypingClub is currently unavailable. Please try again in a few seconds, or try refreshing the page. We apologize for the inconvenience.")));break;case R.NotFound:approuter.not_found();break;case R.Offline:if(t.cordova)alert("Internet connection is not available.");break}}function W(e){var t=(0,f.default)("<div />").css({margin:20,border:"1px solid #bbb",borderRadius:10});(0,f.default)("body").append(t);var n=true;var a=false;var r=undefined;try{for(var o=e.split("\n\n")[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;var s=(0,f.default)("<pre />").html(l).css({borderRadius:0});s.css({border:0,margin:0});if(l.search(/\/tpclub\//)>-1)s.css({background:"#ddd",color:"darkred"});t.append(s)}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}t.find("pre").last().css({background:"darkred",color:"white"})}E.default.register("/api/{version}/badge/",E.default.Strategy.lifetime);var K=O.default.compile("/api/{version}/{resource}/{id}/");function J(e){function t(){var e="/api/v"+j+"/badge/";return $(e).then(function(e){var t={};e.objects.forEach(function(e){t[e.resource_uri]=e});return t})}function n(e,t){e.games.forEach(function(e){e.badges=e.badges.map(function(e){return t[e]})})}function a(e,t){e.badges=e.badges.map(function(e){return t[e]});return e}var r=K(e.resource_uri);if(r){var o=r[Symbol.for("resource")];switch(o){case"scoreboard":return t().then(function(t){n(e,t);return e});case"user":case"student":return te.wrapCopy(e);case"attempt":e.speed=2.2;if(typeof e.lesson=="string"){return $(e.lesson).then(function(n){e.lesson=n;return t().then(function(t){a(e,t);return e})})}}}return e}function X(e){var t=document.createElement("a");t.href=e;var n=new b.default(t.search);n.append("token",B());n.append("format","json");return window.location.origin+t.pathname+"?"+n.toString()}function $(e,t,n){if(G){return}var a=new Promise(function(t,n){E.default.one(e,function t(n,a){if(!L.is_production){console.log("get",e);console.log(X(e))}f.default.ajax({headers:U(),url:F()+e,dataType:"json",success:function t(a){if(!L.is_production){console.log("<- get",e,a)}n(a)},error:a,statusCode:P({},R.Unauthorized,function(){z();oe();approuter.login_page({next_api_url:e})})})},t,function(e,t,a){n(e)})});a=a.then(J);if(t)a=a.then(t);if(n)a.catch(n);else a.catch(q);return a}function Q(e,t,n,a){if(!L.is_production)console.log("patch",e,t);if(G){return}var r=new Promise(function(n,a){f.default.ajax({headers:Object.assign({"X-HTTP-Method-Override":"PATCH"},U()),type:"POST",contentType:"application/json",url:F()+e,data:JSON.stringify(t),dataType:"json",success:function t(a){if(!L.is_production){console.log("<- patch",e,a)}n(a)},error:function e(t,r,o){if(t.status==202){n(t.responseText)}else a(t)}})});if(n)r=r.then(n);if(a)r.catch(a);else r.catch(q);return r}function Z(e,t,n,a){if(!L.is_production){console.log("post",e,t)}if(G){return}var r=new Promise(function(n,a){f.default.ajax({headers:U(),type:"POST",contentType:"application/json",url:F()+e,data:JSON.stringify(t),dataType:"json",success:function t(a){if(!L.is_production){console.log("<- post",e,a)}n(a)},error:function e(t,n,r){a(t)}})});if(n)r=r.then(n);if(a)r.catch(a);else r.catch(q);return r}function ee(e,t,n,a){if(!L.is_production){console.log("delete",e,t)}if(G){return}if(e.startsWith("/api/")&&!e.startsWith("/api/v"+j+"/")){Ee();return}var r=new Promise(function(n,a){f.default.ajax({headers:U(),type:"DELETE",contentType:"application/json",url:F()+e,data:JSON.stringify(t),dataType:"json",success:function t(a){if(!L.is_production){console.log("<- delete",e,a)}n(a)},error:function e(t,n,r){a(t)}})});if(n)r=r.then(n);if(a)r.catch(a);else r.catch(q);return r}var te=function(){function e(){I(this,e);this.language="en";this.type="blank";this.init()}a(e,[{key:"init",value:function e(){var n=this;var a=this.language.split("_")[0];if(a=="zh")a="zh-cn";v.default.locale(a);this.i18n=(0,S.default)(this.language);this.t=this.i18n.t.bind(this.i18n);t.profile=this;t.is_basic=this.is_basic;if(this.i18n.isInitialized){return this}else{return new Promise(function(e){n.i18n.on("initialized",function(){return e(n)})})}}},{key:"getDefaultTeam",value:function e(){return this.teams[0]}},{key:"getSubjects",value:function e(){var t={};var n=true;var a=false;var r=undefined;try{for(var o=this.programs[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;t[l.subject.id]=l.subject.name}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}return t}},{key:"clone",value:function e(){return Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this))}},{key:"getDerivedProfile",value:function e(){var t=this.clone();var n=approuter.get_team();t.disable_backspace=n.disable_backspace;var a=n.settings;if(a.lock_keyboard_guide)t.show_keyboard=a.keyboard_guide;if(a.lock_hands_guide)t.show_hand=a.hands_guide;if(a.lock_keyboard)t.keyboard=a.keyboard;if(a.lock_use_hand)t.use_hand=a.use_hand;if(a.lock_keyboard_sfx)t.keyboard_sfx=a.keyboard_sfx;if(a.lock_voicefx)t.voicefx=a.voicefx;if(a.lock_block_on_errors)t.block_on_errors=a.block_on_errors;var r={font_face:"Primary Penmanship",font_size:"med",keyboard:"en,us",keyboard_layout:11,typing_theme:"bees",show_hand:true,show_keyboard:true,show_live_stats:false,use_hand:null};if(approuter.program&&approuter.program.is_junior){for(var o in r){t[o]=r[o]}}return t}},{key:"teamsForProgram",value:function e(t){var n=this.teamprograms.filter(function(e){return t.resource_uri==e.program});(0,x.default)(n.length!=0);var a=n.map(function(e){return e.team});var r=this.teams.filter(function(e){return a.indexOf(e.resource_uri)!=-1});return r}},{key:"lessonplans",value:function e(){return this.programs.filter(function(e){if(e.program_type=="test")return false;var t=this.teamprograms.find(function(t){return t.program==e.resource_uri});if(!t.requires)return true;var n=this.teamprograms.find(function(e){return e.resource_uri==t.requires});var a=this.programs.find(function(e){return e.resource_uri==n.program});return a.is_complete}.bind(this))}},{key:"materialize",value:function e(){var n={timezone:y.default.determine().name()};return Z("/api/v"+j+"/student/materialize_template_user/",n).then(function(e){D(e.api_token);oe();return re().then(function(e){if(t.is_tp){var n=document.createElement("img");n.src="https://s.typingclub.com/marketing/convert?env=tp&user_id="+e.id;n.width=0;n.height=0;document.body.appendChild(n)}return e})})}}],[{key:"wrapCopy",value:function t(n){return Object.setPrototypeOf(Object.assign({},n),e.prototype).init()}}]);return e}();var ne="/api/{version}/student/me/";E.default.register(ne,E.default.Strategy.lifetime,J);function ae(){if(window.freestar)return;window.freestar={hitTime:Date.now(),queue:[],config:{},debug:window.location.search.indexOf("fsdebug")===-1?false:true};freestar.config.enabled_slots=[];var e=document.getElementsByTagName("script")[0];var t=document.createElement("script");t.async=true;t.src="https://a.pub.network/typingclub2-com"+(freestar.debug?"/qa/pubfig.min.js":"/pubfig.min.js");e.parentNode.insertBefore(t,e)}function re(e,t){if(!B()){var n=Promise.resolve(new te);if(e)n.then(e);return n}var a=$("/api/v"+j+"/student/me/").then(function(e){if(e.is_basic&&e.freestar_ok&&navigator.language=="en-US"){ae()}if(t&&e.is_template){return e.materialize()}else{return e}});if(e)a=a.then(e);return a}function oe(){E.default.invalidate(ne)}function ie(e){E.default.registerChangeHandler(ne,e)}function le(e,t){var n="/api/v"+j+("/student/"+t+"/");return $(n,e)}function se(e,t){$("/api/v"+j+"/knol/"+t+"/",e)}function ue(e,n){var a="?is_tp="+(t.is_tp?"true":"false");if(n)a+="&query="+n;return $("/api/v"+j+"/knol/"+a,e)}function ce(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=arguments[3];e.team_id=approuter.get_team().id;re(function(r){Z(a||approuter.current_app.push_result_url,e,t,function(r,o,i){if(r.status==400&&r.responseJSON.code=="team_deleted"){approuter.dashboard();return}if(n>5){window.location.replace(window.location.href)}else{setTimeout(function(){ce(e,t,n+1,a)},2500)}})},true)}function de(e,t,n){re(function(a){Z("/api/v"+j+"/attempt/postVideoResults/",{stats:JSON.stringify(e),lesson_id:t.id,team_id:approuter.get_team().id},n)},true)}function fe(e,t){re(function(n){Z("/api/v"+j+"/lessonfeedback/",e,t)},true)}function pe(e,t){var n=e+"stats/";if(n){$(n,t)}}function me(e){ee("/api/v"+j+"/student/",{password:e},function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"success",text:"Your account was succesfully deleted. We are sorry to see you go."}))}catch(e){}V()},function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"warning",text:"Your request could not be completed at this time. For security reasons you have been logged out of your account."}))}catch(e){}V()})}function he(e,t){re(function(n){var a="/api/v"+j+"/student/join_program/";Z(a,{mprogram_id:e},function(e){oe();re(function(n){t(e)})})},true)}function ve(e){var t="/api/v"+j+"/student/join_team/";return Z(t,{team_id:e.id},function(){oe()})}function ge(e,t,n){re(function(a){Q(a.resource_uri,{password:e},function(e){oe();t(e)},function(e){n(e.responseJSON)})},true)}function ye(e,t,n,a){Z("/api/v"+j+"/student/forgot_password/",{domain:e,email:t},n,a)}function _e(e,t,n,a){f.default.get(L.tpc_domain+"/api/v"+j+"/student/check_class_code/?domain="+e+"&code="+t,n,a)}function be(e,t,n){Z("/api/v"+j+"/student/signup2class/",e,t,n)}function we(e,t,n){re(function(a){Q(a.resource_uri,e,function(e){oe();if(t)t(e)},n)},true)}function Ee(e){}function ke(e){Y=e}function xe(e){H=e}function Ne(e,t,n,a,r){Z("/api/v"+j+"/student/resolve_oauth_token/",{issuer:e,domain:t,code:n},a,r)}function Se(e,t,n){var a="/api/v"+j+"/student/get_account/";Z(a,{domain:e},t,n)}function Ce(e,t,n,a,r,o){var i="/api/v"+j+"/student/get_token/";var l={domain:e,username:t,password:n};if(o)l.sign=o;Z(i,l,a,r)}function Oe(e,t,n){if(!t){re(function(t){return Oe(e,t,n)});return}var a=t.resource_uri+"stats/subject_stats/";if(n)a+="?subject_id="+n;$(a,e)}function Te(e,t){if(!t){re(function(t){return Te(e,t)});return}var n=t.resource_uri+"recent_activity/";$(n,e)}function Ie(e,t){if(!t){re(function(t){return Ie(e,t)});return}var n=t.resource_uri+"badges/";$(n,e)}function Pe(e,t,n,a,r){var o={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:r.grade,school_id:r.school_id,subject:t,period:n,timezone:r.timezone};var i=r.resource_uri+"stats/typing_student_kpi_comparison/";Z(i,o,a)}function Re(e,t,n,a,r){var o={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:r.grade,subject:t};if(n>0){o.begin_time=(0,v.default)().subtract(n,"days").format("YYYY-MM-DD");o.end_time=(0,v.default)().format("YYYY-MM-DD")}var i=r.resource_uri+"stats/typing_student_kpi_comparison/";Z(i,o,a)}function Le(e,t,n){var a={team_id:e.team_id,grade:e.grade};if(e.program_id)a.program_id=e.program_id;if(t>0){a.begin_time=(0,v.default)().subtract(t,"days").format("YYYY-MM-DD");a.end_time=(0,v.default)().format("YYYY-MM-DD")}var r="/api/v"+j+"/team/"+e.team_id+"/stats/typing_kpi_comparison/";Z(r,a,n)}function Ae(e,t,n,a){var r={subject_id:t};if(n>0){r.begin_time=(0,v.default)().subtract(n,"days").format("YYYY-MM-DD");r.end_time=(0,v.default)().format("YYYY-MM-DD")}var o="/api/v"+j+"/school/"+e+"/stats/typing_kpi_comparison/";Z(o,r,a)}function Me(e,t,n,a,r){var o={period:e,subject:r};if(a)o.begin_time=(0,v.default)().subtract(a-1,"days").format("YYYY-MM-DD");var i=n.resource_uri+"stats/typing_student_overview/";Z(i,o,t)}function je(e,t,n,a){var r={period:e,limit:a||0};if(n.program_id)r.program_id=n.program_id;var o="/api/v"+j+"/team/"+n.team_id+"/stats/typing_overview/";Z(o,r,t)}function Ge(e,t,n,a,r){var o={period:e,limit:r||0,subject_id:a};var i="/api/v"+j+"/school/"+n+"/stats/typing_overview/";Z(i,o,t)}function Ye(e,t,n,a){var r={period:t,team_id:e.team_id,program_id:e.program_id};var o=a.resource_uri+"stats/typing_student_progress/";Z(o,r,n)}function He(e,t,n){var a={period:t,program_id:e.program_id};var r="/api/v"+j+"/team/"+e.team_id+"/stats/typing_progress/";Z(r,a,n)}function De(e,t,n,a){var r={metric:t,team_id:e.team_id,program_id:e.program_id};var o=a.resource_uri+"stats/typing_student_histogram/";Z(o,r,n)}function ze(e,t,n){var a={metric:t,program_id:e.program_id};var r="/api/v"+j+"/team/"+e.team_id+"/stats/typing_histogram/";Z(r,a,n)}function Be(e,t,n,a){var r={metric:n,subject_id:t};var o="/api/v"+j+"/school/"+e+"/stats/typing_histogram/";Z(o,r,a)}function Ue(e,t,n){var a={};if(e.length){a.begin_time=(0,v.default)().subtract(e,"months").format("YYYY-MM-DD");a.end_time=(0,v.default)().format("YYYY-MM-DD")}var r=n.resource_uri+"stats/typing_student_weekday_practice/";Z(r,a,t)}function Ve(e,t,n){var a={};if(e.length){a.begin_time=(0,v.default)().subtract(e,"months").format("YYYY-MM-DD");a.end_time=(0,v.default)().format("YYYY-MM-DD")}if(n.program_id)a.program_id=n.program_id;var r="/api/v"+j+"/team/"+n.team_id+"/stats/typing_weekday_practice/";Z(r,a,t)}function Fe(e,t,n,a){var r={subject_id:a};if(e.length){r.begin_time=(0,v.default)().subtract(e,"months").format("YYYY-MM-DD");r.end_time=(0,v.default)().format("YYYY-MM-DD")}var o="/api/v"+j+"/school/"+n+"/stats/typing_weekday_practice/";Z(o,r,t)}function qe(e,t,n){var a={team_id:e.team_id,program_id:e.program_id,weeks:4};var r=n.resource_uri+"stats/typing_student_weekly_kpi/";Z(r,a,t)}function We(e,t,n){Z(t.resource_uri+"stats/typing_student_current_stats/",{timezone:t.timezone,weekday_start:n},e)}function Ke(e,t,n,a){Z(t.resource_uri+"stats/typing_student_quick_stats/",{subject_id:n,weekday_start:a,timezone:t.timezone},e)}function Je(e,t,n){Z("/api/v"+j+"/usersubscription/subscribe_plan/",e,t,function(e){e.status==400?alert(e.responseJSON.error):null;if(n)n(e)})}function Xe(e,t,n){Z("/api/v"+j+"/usersubscription/activate_license_card/",e,t,n)}function $e(e,t){Z("/api/v"+j+"/usersubscription/reactivate/",e,t)}function Qe(e,t){Z("/api/v"+j+"/usersubscription/cancel_subscription/",e,t)}function Ze(e,t){Z("/api/v"+j+"/usersubscription/update-payment/",e,t)}function et(e){$("/api/v"+j+"/usersubscription/",function(t){if(t.objects.length!=0){e(t.objects[0])}else{e(null)}})}E.default.register("/api/{version}/lesson/{id}/",E.default.Strategy.lifetime);E.default.register("/api/{version}/program/{id}/",E.default.Strategy.lifetime);E.default.register("/api/{version}/attempt/{id}/",E.default.Strategy.lifetime);function tt(e,t,n,a){$("/api/v"+j+"/lesson/"+e+"/"+(t?"team_id="+t:""),function(e){if(typeof e.program=="string")$(e.program,function(t){e.program=t;n(e)});else n(e)},a)}function nt(e,t,n){$("/api/v"+j+"/attempt/"+e+"/",t,n)}function at(e,t,n){$(e,t,n)}function rt(e){$("/lessonplans.json",e)}function ot(){var e="/api/v"+j+"/team/?joinable=true";return $(e)}function it(e,t){re(function(n){var a="/api/v"+j+"/student/reset_progress/";Z(a,{program_id:e},function(){oe();approuter.refresh();t()})},true)}function lt(e,t){re(function(n){var a="/api/v"+j+"/student/remove_from_dashboard/";Z(a,{program_id:e},function(){oe();approuter.refresh();t()})},true)}function st(){var e="/api/v"+j+"/subscriptionplan/";return $(e)}E.default.register("/api/{version}/video/{id}/",E.default.Strategy.lifetime);function ut(e){var t="/api/v"+j+"/video/"+e+"/";return $(t)}e.exports={StatusCode:R,settings:L,logout:V,setToken:D,clearToken:z,getToken:B,get:$,patch:Q,getProfile:re,getStudentProfile:le,postTypingResults:ce,postVideoResults:de,postLessonFeedback:fe,getTypingResultsStats:pe,changePassword:ge,forgotPassword:ye,checkClassCode:_e,signup2Class:be,registerUpgradeHandler:ke,registerLogoutHandler:xe,registerProfileChangeHandler:ie,updateProfile:we,clearProfile:oe,deleteAccount:me,getSubjectStats:Oe,getStudentBadges:Ie,joinProgram:he,joinTeam:ve,version:j,getRecentActivity:Te,getStudentKPIComparison:Pe,getStudentOverallStats:Re,getTeamprogramOverallStats:Le,getSchoolOverallStats:Ae,getStudentProgressStats:Me,getTeamprogramProgressStats:je,getSchoolProgressStats:Ge,getStudentProgressInClasStats:Ye,getTeamprogramProgressInClassStats:He,getStudentClassHistogramStats:De,getTeamprogramHistogramStats:ze,getSchoolHistogramStats:Be,getStudentPunchCardStats:Ue,getTeamPunchCardStats:Ve,getSchoolPunchCardStats:Fe,getStudentGradeLevelStats:qe,getStudentCurrentStats:We,getStudentQuickStats:Ke,reactivateUserSubscription:$e,updatePaymentUserSubscription:Ze,createUserSubscription:Je,cancelUserSubscription:Qe,getUserSubscription:et,resolveOAauthToken:Ne,getSchoolAccount:Se,getUserToken:Ce,getLessonPlanManifest:rt,getLesson:tt,getAttempt:nt,getGame:at,resetLessonPlan:it,removeFromDashboard:lt,getKnols:ue,getKnol:se,Profile:te,createCardLicenseSubscription:Xe,getJoinableTeams:ot,getTpPlans:st,getVideo:ut};window.api=e.exports}).call(this,n(14))},176:function(e,t,n){(function(t){var a=function(){function e(e,t){var n=[];var a=true;var r=false;var o=undefined;try{for(var i=e[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){n.push(l.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!a&&i["return"])i["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var r=n(8);var o=x(r);var i=n(177);var l=n(115);var s=k(l);var u=n(148);var c=x(u);var d=n(371);var f=x(d);var p=n(93);var m=x(p);var h=n(78);var v=x(h);var g=n(101);var y=x(g);var _=n(65);var b=x(_);var w=n(375);var E=x(w);function k(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}function x(e){return e&&e.__esModule?e:{default:e}}function N(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var S=20;var C=20;var O=".!?";var T="abcdefghijklmnopqrstuvwxyz",I="ABCDEFGHIJKLMNOPQRSTUVWXYZ",P="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",R="0123456789";var L=(0,c.default)(T,I);var A={english:["wiki/en.txt","andersen-books"],arabic:["wiki/ar.txt"],bulgarian:["wiki/bg.txt"],greek:["wiki/el.txt"],farsi:["wiki/fa.txt"],french:["wiki/fr.txt"],hebrew:["wiki/he.txt"],italian:["wiki/it.txt"],korean:["wiki/ko.txt"],dutch:["wiki/nl.txt"],polish:["wiki/pl.txt"],portuguese:["wiki/pt.txt"],romanian:["wiki/ro.txt"],russian:["wiki/ru.txt"],slovak:["wiki/sk.txt"],swedish:["wiki/sv.txt"],turkish:["wiki/tr.txt"],ukrainian:["wiki/uk.txt"],vietnamese:["wiki/vi.txt"],german:["wiki/de.txt"],spanish:["manual-de-economia-politica"]};var M={en:"wiki/en-duals.json"};function j(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:200;var n=arguments[2];var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"";if(!n||!n.length)n=(0,c.default)(L,R,P).join("");n=new Set(n);var o={};var i=(0,f.default)(new Array(C),0);var l={};var s=true;var u=false;var d=undefined;try{for(var p=n[Symbol.iterator](),h;!(s=(h=p.next()).done);s=true){var g=h.value;l[g]=0}}catch(e){u=true;d=e}finally{try{if(!s&&p.return){p.return()}}finally{if(u){throw d}}}var y="",_=true,b=0,w="",E=0;for(var k in e){var g=e[k];if(g==w){if(E==3)continue;E++}else{w=g;E=0}if(/\s/.test(g)){if(!_){if(b<C)i[b]++}if(y){var x=_||O.indexOf(g)>=0;var N=y.length>Math.min(t,80)||U(y,r)<.15;if(y>t/5&&x||N){V(o,y,r);y=""}}_=true;b=0;continue}if(a.indexOf(g)>=0)continue;if(g in l)l[g]++;if(y||_)y=F(o,y,g,l,_,r);_=false;b++}o=(0,m.default)(o);i=(0,m.default)(i);var T=[];for(var g in l){T.push([g,Math.log(l[g])])}l=T;var I=Math.min(1,o.length/S);var A=[],M=-1,j;while(M<t){if(Math.random()<I){j=q(o);if(r){var G=r[Math.floor(Math.random()*r.length)];for(var Y=0;Y<100;Y++){if(j.indexOf(G)>=0)break;j=q(o)}}}else{j="";var H=Math.min(q(i),7);for(var k in(0,v.default)(H)){j+=q(l)}}A.push(j);M+=j.length+1}return A.join(" ")}function G(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function Y(e,t){t=Array.from(new Set(t)).join("");var n=t.replace(/[^a-z]/g,"");var a=t.replace(/[^A-Z]/g,"");var r=true;var o=false;var i=undefined;try{for(var l=n[Symbol.iterator](),s;!(r=(s=l.next()).done);r=true){var u=s.value;var c=u.toUpperCase();if(a.indexOf(c)==-1)e=e.replace(new RegExp(c,"g"),u)}}catch(e){o=true;i=e}finally{try{if(!r&&l.return){l.return()}}finally{if(o){throw i}}}t=G(t);return e.replace(new RegExp("[^"+t+"\\s]","g"),"")}function H(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:200;var a=arguments[3];var r=arguments[4];var o=arguments[5];var i=arguments.length>6&&arguments[6]!==undefined?arguments[6]:true;var l=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;if(r)e=Y(e,r);var s=new RegExp(t,"g"+(i?"":"i"));var u,c;var d=new Set;while(u=s.exec(e)){c=u[0].length;if(o&&(o[0]>c||o[1]<c))continue;if(c<l){if(/\s/.test(e.substr(s.lastIndex,l-c)))continue}var f=n-Math.max(c,l);var p=s.lastIndex-c;if(f>10){var m=-1;while(p>=0&&f>0&&e[p]!="\n"){if(e[p]==" "&&m!=p+1)m=p;p--;f--}if(f==0)p=m+1;else if(e[p]=="\n")p++}var h=Math.max(n,c);if(/\s/.test(e.substr(p,h))&&/\S/.test(e[p+h]))while(h>c&&/\S/.test(e[p+h])){h--}var v=e.substr(p,h).split(/\s/).join(" ").trim();if(l<=v.length)d.add(v)}var g=Array.from(d);var y=[];while(y.length<a&&g.length>0){var _=Math.floor(Math.random()*g.length);y.push(g[_]);g.splice(_,1)}return y}function D(e,t,n){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:6;var o=[];while(o.length<n){var i=Math.floor(Math.random()*e.length)-100;while(i<e.length&&e[i]!=" "){i++}i++;while(i<e.length){var l=i;var s=true;while(e[l]!=" "){if(t.indexOf(e[l])<0)s=false;l++}var u=l-i;if(s&&a<=u&&u<=r){o.push(e.substr(i,u));break}i=l+1}}return o}window.gen_words=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}if(W!=window.corpusName){K=(0,o.default)("<div/>");K.load(STATIC_URL+"lpeditor/corpora/"+window.corpusName,function(){return console.log(H.apply(undefined,[K.text()].concat(t)))});window.corpusName=W}else return H.apply(undefined,[K.text()].concat(t))};window.gen_text=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}if(W!=window.corpusName){K=(0,o.default)("<div/>");K.load(STATIC_URL+"lpeditor/corpora/"+window.corpusName,function(){return console.log(j.apply(undefined,[K.text()].concat(t)))});window.corpusName=W}else return j.apply(undefined,[K.text()].concat(t))};function z(e,t){var n="\\b\\S*"+e+"\\S*\\b";return H(K.text(),n,0,6,t,[e.length*1.1,e.length*2.5])}function B(e,t){var n="\\b"+e+"\\b";return H(K.text(),n,30,2,t)}function U(e,t){if(!t)return 1;var n=0,a=e.length;for(var r in t){var o=t[r];n+=e.split(o).length-1}return n/t.length}function V(e,t,n){if(!t.length)return;if(n){var a=U(t,n);if(a)e[t]=a*t.length}else{e[t]=Math.log(t.length)}}function F(e,t,n,a,r,o){if(n in a){if(r&&t.length)t+=" ";t+=n}else{while(t.length&&!/\s/.test(n)&&P.indexOf(n)<0){n=t[t.length-1];t=t.substr(0,t.length-1)}t=t.trim();if(t.length>0){V(e,t,o);t=""}}return t}function q(e){var t=0;for(var n in e){t+=e[n][1]}var a=Math.random()*t;var r=0;for(n in e){var o=e[n][1];if(r+o>=a)return e[n][0];r+=o}throw"Should't get here"}var W;var K;function J(e){var t=window.corpusName;function n(){W=t;e()}if(W!=t){K=(0,o.default)("<div/>");K.load(STATIC_URL+"lpeditor/corpora/"+t,n)}else setTimeout(e,0)}function X(e,t){J(function(){var n=[];var a=e.learned?e.learned.left.concat(e.learned.right):[];n=(0,i.get_section_templates)(e);var r=[];var o=[];var l=true;var u=false;var c=undefined;try{for(var d=n[Symbol.iterator](),f;!(l=(f=d.next()).done);l=true){var p=f.value;if(p.meta&&p.meta.type=="keys"){a=a.concat(p.meta.keys)}var m=o.slice(Math.max(0,o.length-4),o.length).join(" ");var h=ae(p,a,false,m);if(h.typing&&h.typing.render_engine==s.TYPING_TEXT&&h.meta.type!="travel")o.push(h.typing.text1);r.push(h)}}catch(e){u=true;c=e}finally{try{if(!l&&d.return){d.return()}}finally{if(u){throw c}}}t(r)})}function $(e,t){var n={left:e.learned_before.left.slice(),right:e.learned_before.right.slice()};for(var a=0;a<t;a++){var r=e.lessons[a];if(r.meta.type=="keys"){n.left.push(r.meta.keys[0]);n.right.push(r.meta.keys[1])}}return n}function Q(e,t,n){if(!e.typing)return[];if(e.meta.type=="keys"||e.meta.type=="review")return e.meta.keys;var a=[];var r=e.typing.render_engine;if(r==s.TYPING_LEFT_ANCHOR)a=t.learned_before.right.slice();else if(r==s.TYPING_RIGHT_ANCHOR)a=t.learned_before.left.slice();else a=t.learned_before.left.concat(t.learned_before.right);for(var o=0;o<n;o++){var i=t.lessons[o];if(i.meta.type=="keys"){if(r==s.TYPING_LEFT_ANCHOR)a.push(i.meta.keys[1]);else if(r==s.TYPING_RIGHT_ANCHOR)a.push(i.meta.keys[0]);else a=a.concat(i.meta.keys)}}return a}function Z(e,t,n,a){J(function(){n(ae(e,t,true,a).typing.text1)})}function ee(e){if(!e)return 0;var t=e.split("|"),n=a(t,2),r=n[0],o=n[1];return parseInt(r)+parseFloat(o)*50}function te(e,t){var n=0;var a=0;for(var r=0;r<t.length-1;r++){if(e[t[r]]&&e[t[r]][t[r+1]]){n+=ee(e[t[r]][t[r+1]]);a++}}return n/a}function ne(e,n,a){var r=function e(t){return t[Math.floor(Math.random()*t.length)]};o.default.getJSON(STATIC_URL+"lpeditor/corpora/"+M[n.language||"en"],function(o){api.getSubjectStats(function(t){var n=e.typing.text5;var i=n.type||"progressive";var l=o[n.glossary||"lowercase"];var s=l.duals,u=l.words;var c;if(t.length){c=t[0].duals}else{c={};var d=Object.keys(s);var f=new Set;while(f.size<=10){f.add(d[Math.floor(Math.random()*d.length)])}var p=true;var m=false;var h=undefined;try{for(var v=f[Symbol.iterator](),g;!(p=(g=v.next()).done);p=true){var y=g.value;if(!c[y[1]])c[y[1]]=[];c[y[1]][y[0]]="20|1"}}catch(e){m=true;h=e}finally{try{if(!p&&v.return){v.return()}}finally{if(m){throw h}}}}var _=Object.values(s).map(function(e){return e.length});var b=Math.max.apply(Math,N(_)),w=Math.min.apply(Math,N(_));var E={};for(var k in s){var x=(b-s[k].length)/(b-w)*.2+1;var S=0;if(c[k[1]]&&c[k[1]][k[0]])S=ee(c[k[1]][k[0]])/x;if(S)E[k]=S}var C=Object.keys(E).sort(function(e,t){return E[e]<E[t]?-1:1});var O=new Set;if(C.length>10){C=C.slice(0,10);while(O.size<4){O.add(r(C))}}else O=new Set(Object.keys(s).slice(0,5));var T=["ass","cum","dic","fag","fat","fuc","fuk","jap","jiz","pus","wop"];var I="";var P=true;var R=false;var L=undefined;try{for(var A=O[Symbol.iterator](),M;!(P=(M=A.next()).done);P=true){var j=M.value;var G=[];var Y=s[j].map(function(e){return u[e]});Y=Y.sort(function(e,t){return te(c,e.toLowerCase())<te(c,t.toLowerCase())?-1:1});Y=Y.splice(0,6);if(i=="duals"){for(var H=0;H<3;H++){G.push(j)}for(var D=0;D<3;D++){G.push(r(Y))}}else if(i=="words"){for(var z=0;z<4;z++){G.push(r(Y))}}else{G.push(j+" "+j);var B=[];for(var U=0;U<3;U++){B.push(r(Y))}var V=new Set;var F=true;var q=false;var W=undefined;try{for(var K=B[Symbol.iterator](),J;!(F=(J=K.next()).done);F=true){var X=J.value;var $=X.toLowerCase();var Q=$.indexOf(j);if(Q>0){var Z=$.substr(Q-1,3);if(!~T.indexOf(Z))V.add(Z)}}}catch(e){q=true;W=e}finally{try{if(!F&&K.return){K.return()}}finally{if(q){throw W}}}if(V.size<2){var ne=true;var ae=false;var re=undefined;try{for(var oe=B.reverse()[Symbol.iterator](),ie;!(ne=(ie=oe.next()).done);ne=true){var le=ie.value;var se=le.toLowerCase();var ue=se.indexOf(j);if(ue<se.length-2){var ce=se.substr(ue,3);if(!~T.indexOf(ce))V.add(ce)}}}catch(e){ae=true;re=e}finally{try{if(!ne&&oe.return){oe.return()}}finally{if(ae){throw re}}}}var de=Array.from(V).slice(0,2);if(de&&de.length<2)de.push(de[0]);var fe=true;var pe=false;var me=undefined;try{for(var he=de[Symbol.iterator](),ve;!(fe=(ve=he.next()).done);fe=true){var ge=ve.value;G.push(ge)}}catch(e){pe=true;me=e}finally{try{if(!fe&&he.return){he.return()}}finally{if(pe){throw me}}}var ye=true;var _e=false;var be=undefined;try{for(var we=B[Symbol.iterator](),Ee;!(ye=(Ee=we.next()).done);ye=true){var ke=Ee.value;G.push(ke)}}catch(e){_e=true;be=e}finally{try{if(!ye&&we.return){we.return()}}finally{if(_e){throw be}}}}I+=G.join(" ")+"\n"}}catch(e){R=true;L=e}finally{try{if(!P&&A.return){A.return()}}finally{if(R){throw L}}}e.typing.text=I;e.typing.dynamic_text_generated=true;a()},t.profile,n.subject_id)})}function ae(e,t,n,a){var r={description:"",lesson_type:e.lesson_type||s.LESSON_TYPING,meta:e.meta,video:null,videotyping:null,key:e.icon||"e-cmn cmn-practice",objective_completion:true,slug:null,name:e.name||"",instruction:null,score:null,typing:null};if(r.lesson_type==s.LESSON_VIDEO){r.score=1e3;r.video={video_catalog_vimeo_uri:e.video_uri,start_muted:false,show_subtitles:false,can_skip:false,auto_start:true}}else if(r.lesson_type==s.LESSON_TYPING){r.objective_completion=false;r.score=e.score||2e3;r.typing={disable_backspace:false,min_wpm:e.min_wpm||3,show_live_stats:true,render_engine:e.meta.engine||s.TYPING_TEXT,goal_wpm:e.goal_wpm||10,max_secs:600,text2:"",text3:"",text4:"",text5:"",on_error:1,font_size:2,show_live_extras:true,min_accuracy:80}}var o=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var a=arguments[2];var r=Array.from({length:t*8},function(){return Math.floor(Math.random()*n)}).join("");var o=true;while(o){var i=r.replace("11111",["111","11"][Math.floor(Math.random()*2)]).replace("00000",["000","00"][Math.floor(Math.random()*2)]).replace("101010","1010").replace("010101","0101");if(i.length==r.length)o=false;r=i}if(a>1){o=true;while(o){var l=r.replace(Array(a).fill(1).join(""),Array(a-1).fill(1).join(""));l=l.replace(Array(a).fill(0).join(""),Array(a-1).fill(0).join(""));if(l.length==r.length)o=false;r=l}}return r.substr(0,t).split("")};var i=r.typing;var l=e.meta||{};var u;var c;var d;(function(){switch(l.type){case"keys":i.render_engine=s.TYPING_BOXES;i.disable_backspace=true;i.on_error=2;r.objective_completion=true;r.score=1e3;c=!n&&l.pattern||"";if(!c)c=o(l.size||32,l.keys.length);else c=c.split("");i.text1=c.map(function(e){return l.keys[e]}).join("");if(!l.fingers)break;r.instruction={inst:[{title:s.map_content("new-key-title",{KEY:l.keys[0]}),title_tag:s.map_content("new-key-title-tag"),body:s.map_content("new-key-body",{KEY:l.keys[0],FINGER:l.fingers[0]})+(l.finger_instruction?" "+l.finger_instruction[0]:""),chr:l.keys[0],id:"slide-0",image_url:""},{title:s.map_content("new-key-title",{KEY:l.keys[1]}),title_tag:s.map_content("new-key-title-tag"),body:s.map_content("new-key-body",{KEY:l.keys[1],FINGER:l.fingers[1]})+(l.finger_instruction?" "+l.finger_instruction[1]:""),chr:l.keys[1],id:"slide-1",image_url:""},{title:s.map_content("new-key-great-job"),title_tag:s.map_content("new-key-title-tag"),body:s.map_content("new-key-practice",{KEY1:l.keys[0],KEY2:l.keys[1]})+"\n"+s.map_content("new-key-take-time")+"\n\n"+s.map_content("new-key-press-space"),chr:"",id:"slide-2",image_url:""}]};break;case"space":r.objective_completion=true;i.render_engine=s.TYPING_BOXES;i.disable_backspace=true;i.on_error=2;r.score=1e3;case"review":if(!n&&l.pattern)i.text1=l.pattern.split("").map(function(e){return e==" "?e:l.keys[e]}).join("");else i.text1=j(K.text(),l.size,l.keys);break;case"practice":r.key=e.icon||"e-cmn cmn-practice";i.text1=l.text||j(K.text(),l.size,l.needed||t,"",l.focus);break;case"shift-review":var f=function e(t){var n=H(K.text(),"\\s"+G(t),6,100,null,null,false,5);var a=0;if(!n.length){n=H(K.text(),"\\s."+G(t),6,100,null,null,false,5);a=1}var r={};var o=true;var i=false;var l=undefined;try{for(var s=n[Symbol.iterator](),u;!(o=(u=s.next()).done);o=true){var c=u.value;var d=a?c[0]+c[1].toUpperCase()+c[2]:c[0].toUpperCase()+c.slice(1,3);if(!d)return;if(d in r)r[d]+=1;else r[d]=1}}catch(e){i=true;l=e}finally{try{if(!o&&s.return){s.return()}}finally{if(i){throw l}}}return Object.keys(r).sort(function(e,t){return r[e]<r[t]?1:-1})};var p=f(l.keys[0]);var m=f(l.keys[1]);var h=o(12,2);i.text1=[o(6,2).map(function(e){return p[e]}).join(" "),o(6,2).map(function(e){return m[e]}).join(" "),o(6,10).map(function(e,t){return h[t]=="0"?p[e]:m[e]}).join(" "),o(6,10).map(function(e,t){return h[t]=="0"?p[e]:m[e]}).join(" ")].join("\n");break;case"numbered-review":var v=function e(t,n){return t.map(function(e){return n[e]})};var g=v(l.indexes,l.home_row);var y="";var _=false;var b=function e(){if(y.length)y+=" ";var t=Math.floor(Math.random()*2+.5)+3;var n=0+_;y+=o(t,2,3).map(function(e){return[l.chars[n],g[n]][e]}).join("");_=!_};while(y.length<l.size){b()}i.text1=y;break;case"symbol-practice":u=D(K.text(),t,20);u=u.map(function(e){return(Math.random()<.33?l.chars[0]:"")+e+(Math.random()>.33?l.chars[1]:"")});i.text1=u.join(" ");break;case"shift-practice":u=H(K.text(),"\\s["+G(l.capitals)+"]",8,50,t,null,false,4);u=u.map(function(e){return l.capitals.indexOf(e[0].toUpperCase())>=0?e[0].toUpperCase()+e.slice(1).toLowerCase():e});var w=H(K.text(),"\\s["+G(l.focus_caps)+"]",8,50,t,null,false,4);w=w.map(function(e){return l.capitals.indexOf(e[0].toUpperCase())>=0?e[0].toUpperCase()+e.slice(1).toLowerCase():e});if(u.length){var E=0,k=1;i.text1=u[0];while(i.text1.length<(l.size||165)&&k<u.length){var x=Math.random()<.8?w[k++]:u[k++];if(x)i.text1+=" "+x}}else{i.text1=j(K.text(),l.size,l.needed||t,"",l.focus)}break;case"game1":case"game2":case"game3":case"game4":case"game5":var N={game1:{engine:s.TYPING_GAME_BALLOON_VALLEY,noSpace:true},game2:{engine:s.TYPING_GAME_MONSTER_ATTACK,icon:"G3"},game3:{engine:s.TYPING_GAME_TEMPLE_BASH,noSpace:true},game4:{engine:s.TYPING_GAME_FLOATING_BUBBLES},game5:{engine:s.TYPING_GAME_APPLE_THIEVES}};var S=N[l.type];r.key="e-cmn cmn-"+(S.icon||l.type);i.min_wpm=1;i.render_engine=S.engine;d=l.size+(S.noSpace?Math.floor(l.size/5):0);if(l.use_prev){var C=0;var O=a.split(/\s/).filter(function(e){return e.length>5});var T=[];while(C<d){var I=O[Math.floor(Math.random()*O.length)];T.push(I);C+=I.length+(S.noSpace?0:1)}i.text1=T.join(" ")}else i.text1=l.text||j(K.text(),d,l.needed||t,"",l.focus);if(S.noSpace)i.text1=i.text1.replace(/ /g,"");break;case"travel":r.key=e.icon||"e-cmn cmn-travel1";var P=[];var R=true;var L=false;var A=undefined;try{for(var M=l.travel_index[Symbol.iterator](),Y;!(R=(Y=M.next()).done);R=true){var U=Y.value;P.push(l.top_row[U]+l.home_row[U]+l.bottom_row[U])}}catch(e){L=true;A=e}finally{try{if(!R&&M.return){M.return()}}finally{if(L){throw A}}}var V="";var F=["012","021","102","120","201","210"];var q="";var W=function e(){var t=F[Math.floor(Math.random()*6)];var n=Math.random();if(n>.5){var a=t.split(Math.floor(Math.random()*3));t=a[0]+F[Math.floor(Math.random()*6)]+a[1];if(n>.75)t=t.substr(0,4)}var r=Math.floor(Math.random()*P.length);while(q.indexOf(r)>=0){r=Math.floor(Math.random()*P.length)}if(P.length>1){q=r+q.substr(0,P.length-2)}var o=P[r];if(V.length)V+=" ";V+=t.split("").map(function(e){return!l.learned||l.learned.indexOf(o[e])>=0?o[e]+(l.travel_extra?l.travel_extra[r]:""):""}).join("")};while(V.length<l.size){W()}i.text1=V;break;case"tricky":u=l.words.split(" ",3);var J=[];var X=[];var $=true;var Q=false;var Z=undefined;try{for(var ee=u[Symbol.iterator](),te;!($=(te=ee.next()).done);$=true){var ne=te.value;var ae=B(ne,t);J.push(Array(5).fill(ne).join(" "));J.push(ae[0]);X.push(ae[1])}}catch(e){Q=true;Z=e}finally{try{if(!$&&ee.return){ee.return()}}finally{if(Q){throw Z}}}J.push(Array(u.length==2?3:2).fill(u.join(" ")).join(" "));J.push(X.join(" "));i.text1=J.join("\n");break;case"drum":var re=l.drum;var oe=z(re,t);i.text1=[Array(6).fill(re).join(" "),Array(3).fill(oe[0]+" "+oe[1]).join(" "),Array(6).fill(re).join(" "),Array(3).fill(oe[2]+" "+oe[3]).join(" "),Array(6).fill(re).join(" "),Array(3).fill(oe[4]+" "+oe[5]).join(" ")].join("\n");break}})();return r}function re(){var e=(0,o.default)("#substrings").val().split(/\s+/);if(e[0].length<2)return;var t="corpora/"+(0,o.default)("#corpora").val();function n(){W=t;var n=K.text().toLowerCase();var a=n.split(/[.?!,;\s+*\(\'\"\)\-]/);var r=(0,y.default)(a,function(t){var n=(0,y.default)(e,function(e){return t.indexOf(e)>-1});return n.length>0});var i=(0,E.default)(r);var l=(0,b.default)(i,function(e,t){return{word:t,count:e}});var s=l.sort(function(e,t){return t.count-e.count});var u=[];s.forEach(function(e){u.push(e.word+"<span style='float: right'>"+e.count+"</span>")});(0,o.default)("#result").html("<ul><li>"+u.join("<li></li>")+"</li></ul>")}if(W!=t){K=(0,o.default)("<div/>");K.load(t,n)}else n()}e.exports={corpora:A,generate_lessons:X,compute_needed_keys:Q,compute_learned_keys:$,regenerate_lesson_text:Z,generate_dynamic_lesson:ne}}).call(this,n(14))},177:function(e,t,n){var a=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function(){function e(e,t){var n=[];var a=true;var r=false;var o=undefined;try{for(var i=e[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){n.push(l.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!a&&i["return"])i["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var o=n(115);var i=c(o);var l=n(369);var s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}var d=function e(t,n){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var r="";while(r.length<t){if(r.length)r+=" ";var o=Math.floor(Math.random()*2+.5)+3;r+=Array(o).fill(0).map(function(){var e=a.length&&Math.random()>.5?a:n;return e[Math.floor(Math.random()*e.length)]}).join("")}return r};var f={"home-row":[],"top-row":["home-row"],"bottom-row":["top-row"],"basic-level-1":["bottom-row"],"tricky-words":["bottom-row"],"common-patterns":["bottom-row"],"shift-key":["bottom-row"],numbers:["bottom-row"],"numbered-symbols":["shift-key","numbers"],"more-symbols":["numbered-symbols"],"basic-level-2":["basic-level-1","shift-key"],"basic-level-3":["basic-level-2","shift-key","numbers"],"advanced-levels":["basic-level-3","numbered-symbols"]};function p(e,t){if(!e)return f;if(!t)return Object.keys(e).filter(function(t){return e[t].length==0});var n={};for(var a in e){if(a==t)continue;var r=e[a].slice();var o=r.indexOf(t);if(o>=0)r.splice(r.indexOf(t),1);n[a]=r}return n}function m(e){var t;var n,o,l,u,c,f,p,m,h,v;var g,y,_,b,w,E,k,x,N,S;var C,O,T,I,P,R,L,A,M,j;var G;var Y,H;var G;var D,z;var B=function(){switch(e.type){case"home-row":var a=r(e.keys,10);n=a[0];o=a[1];l=a[2];u=a[3];c=a[4];f=a[5];p=a[6];m=a[7];h=a[8];v=a[9];return{v:[{name:"Home Row",lesson_type:i.LESSON_HEADER,meta:{section:e.type}},{name:"Introduction to Typing",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/196638853",icon:"e-cmn cmn-intro"},{name:i.map_content("keys")+" "+u+" & "+p,icon:"e-qwerty qwerty-"+u+p,meta:{type:"keys",keys:[u,p],fingers:[i.map_content("left-index-finger"),i.map_content("right-index-finger")],pattern:"00001111000011110011001101011010"}},{name:"Space Bar",icon:"e-qwerty qwerty-"+u+p,meta:{type:"space",keys:[u,p],pattern:"0 0 1 1 00 00 11 11 01 10 00 11"}},{name:i.map_content("review")+": "+u+" & "+p,icon:"e-qwerty qwerty-R-"+u+p,meta:{type:"review",keys:[u,p],size:84}},{name:i.map_content("keys")+" "+l+" & "+m,icon:"e-qwerty qwerty-R-"+l+m,meta:{type:"keys",keys:[l,m],fingers:[i.map_content("left-middle-finger"),i.map_content("right-middle-finger")],pattern:"00001111000011110011001101011010"}},{name:i.map_content("review")+": "+l+" & "+m,icon:"e-qwerty qwerty-"+l+m,meta:{type:"review",keys:[l,m],size:78}},{name:i.map_content("practice")+": "+l+" & "+m,meta:{type:"practice",size:118}},{name:"Play: "+u+p+m+l,meta:{type:"game1",size:40}},{name:i.map_content("keys")+" "+o+" & "+h,icon:"e-qwerty qwerty-"+o+h,meta:{type:"keys",keys:[o,h],fingers:[i.map_content("left-ring-finger"),i.map_content("right-ring-finger")],pattern:"00001111000011110011001101011010"}},{name:i.map_content("review")+": "+o+" & "+h,icon:"e-qwerty qwerty-R-"+o+h,meta:{type:"review",keys:[o,h],size:82}},{name:i.map_content("practice")+": "+o+" & "+h,meta:{type:"practice",size:83}},{name:i.map_content("keys")+" "+n+" & "+v,icon:"e-qwerty qwerty-"+n,meta:{type:"keys",keys:[n,v],fingers:[i.map_content("left-pinky-finger"),i.map_content("right-pinky-finger")],pattern:"00001111000011110011001101011010"}},{name:i.map_content("review")+": "+n+" & "+v,icon:"e-qwerty qwerty-R-"+n,meta:{type:"review",keys:[n,v],size:72}},{name:"First 8 Keys",meta:{type:"practice",size:101}},{name:"Play: First 8 Keys",score:3e3,meta:{type:"game1",size:60}},{name:"Home, Sweet Home!",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/162132766",icon:"e-cmn cmn-home2"},{name:"Home Row: L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,size:78,needed:n+o+l+u}},{name:"Home Row: R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,size:116,needed:p+m+h+v}},{name:i.map_content("keys")+" "+c+" & "+f,icon:"e-qwerty qwerty-"+c+f,meta:{type:"keys",keys:[c,f],fingers:[i.map_content("left-index-finger"),i.map_content("right-index-finger")],finger_instruction:["",i.map_content("new-key-move-finger-back")],pattern:"00001111000011110011001101011010"}},{name:i.map_content("review")+": "+c+" & "+f,icon:"e-qwerty qwerty-R-"+c+f,meta:{type:"review",keys:[c,f,u,p],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+c+" & "+f,meta:{type:"practice",size:78}},{name:"Home Row Review",score:3e3,meta:{type:"practice",size:102}},{name:"Play Home Row",meta:{type:"game3",size:56}}]};case"top-row":var B=r(e.keys,10);g=B[0];y=B[1];_=B[2];b=B[3];w=B[4];E=B[5];k=B[6];x=B[7];N=B[8];S=B[9];return{v:[{name:"Top Row",lesson_type:i.LESSON_HEADER,meta:{section:e.type}},{name:i.map_content("keys")+" "+b+" & "+k,icon:"e-qwerty qwerty-"+b+k,meta:{type:"keys",keys:[b,k],fingers:[i.map_content("left-index-finger"),i.map_content("right-index-finger")],finger_instruction:["",i.map_content("new-key-move-finger-back")],pattern:"0001101111011001011000010111011"}},{name:i.map_content("review")+": "+b+" & "+k,icon:"e-qwerty qwerty-R-"+b+k,meta:{type:"review",keys:[b,k,e.home_keys[3],e.home_keys[6]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+b+" & "+k,meta:{type:"practice",size:95,focus:b+k}},{name:i.map_content("keys")+" "+_+" & "+x,icon:"e-qwerty qwerty-"+_+x,meta:{type:"keys",keys:[_,x],fingers:[i.map_content("left-middle-finger"),i.map_content("right-middle-finger")],pattern:"01110000110100110101110011010100"}},{name:i.map_content("review")+": "+_+" & "+x,icon:"e-qwerty qwerty-R-"+_+x,meta:{type:"review",keys:[_,x,e.home_keys[2],e.home_keys[7]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+_+" & "+x,meta:{type:"practice",size:142,focus:_+x}},{name:"Sit Straight, Be Healthy!",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/162132769",icon:"e-cmn cmn-sit-straight2"},{name:"Review: Home + ruei",meta:{type:"practice",size:156}},{name:"Top Row: L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,size:121,needed:e.learned.left.join("")+_+b}},{name:"Top Row: R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,size:96,needed:e.learned.right.join("")+k+x}},{name:"Play: ruei",meta:{type:"game2",size:169}},{name:i.map_content("keys")+" "+y+" & "+N,icon:"e-qwerty qwerty-"+y+N,meta:{type:"keys",keys:[y,N],fingers:[i.map_content("left-ring-finger"),i.map_content("right-ring-finger")],pattern:"00110011001110011000110010110001"}},{name:i.map_content("review")+": "+y+" & "+N,icon:"e-qwerty qwerty-R-"+y+N,meta:{type:"review",keys:[y,N,e.home_keys[1],e.home_keys[8]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+y+" & "+N,meta:{type:"practice",size:132,focus:y+N}},{name:"Play: Top 6 Keys",meta:{type:"game1",size:53}},{name:i.map_content("keys")+" "+g+" & "+E,icon:"e-qwerty qwerty-"+g+E,meta:{type:"keys",keys:[g,E],fingers:[i.map_content("left-pinky-finger"),i.map_content("right-index-finger")],pattern:"01101110100011101011011100011010"}},{name:i.map_content("review")+": "+g+" & "+E,icon:"e-qwerty qwerty-R-"+g+E,meta:{type:"review",keys:[g,E,e.home_keys[0],e.home_keys[5]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+g+" & "+E,meta:{type:"practice",size:131,focus:g+E}},{name:i.map_content("keys")+" "+S+" & "+w,icon:"e-qwerty qwerty-"+w+S,meta:{type:"keys",keys:[w,S],fingers:[i.map_content("left-index-finger"),i.map_content("right-pinky-finger")],pattern:"11010100110001011010111010010110"}},{name:i.map_content("review")+": "+S+" & "+w,icon:"e-qwerty qwerty-R-"+w+S,meta:{type:"review",keys:[w,S,e.home_keys[4],e.home_keys[9]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+S+" & "+w,meta:{type:"practice",size:127,focus:S+w}},{name:"Play: Top Row",meta:{type:"game1",size:60}},{name:"Think Ideas, Not Fingers!",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/162132763",icon:"e-cmn cmn-think-ideas2"},{name:"Review: Home + Top",meta:{type:"practice",size:142}},{name:"Top Row: L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,size:133,needed:e.learned.left.join("")+g+y+_+b+w}},{name:"Top Row: R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,size:105,needed:e.learned.right.join("")+E+k+x+N+S}},{name:"Play: Top Row",score:3e3,meta:{type:"game3",size:42,needed:e.keys}},{name:"Play: Top Row",meta:{type:"game2",size:144}}]};case"bottom-row":var U=r(e.keys,10);C=U[0];O=U[1];T=U[2];I=U[3];P=U[4];R=U[5];L=U[6];A=U[7];M=U[8];j=U[9];return{v:[{name:"Bottom Row",lesson_type:i.LESSON_HEADER,meta:{section:e.type}},{name:i.map_content("keys")+" "+I+" & "+L,icon:"e-qwerty qwerty-"+I+L,meta:{type:"keys",keys:[I,L],fingers:[i.map_content("left-index-finger"),i.map_content("right-index-finger")],pattern:"1010010001111010101001010011100"}},{name:i.map_content("review")+": "+I+" & "+L,icon:"e-qwerty qwerty-R-"+I+L,score:2500,meta:{type:"review",keys:[I,L,e.home_keys[3],e.home_keys[6]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+I+" & "+L,score:2500,meta:{type:"practice",size:103,focus:I+L}},{name:i.map_content("travel")+" R Index",score:2500,meta:{type:"travel",size:55,travel_index:[6],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("travel")+" L Index",score:2500,meta:{type:"travel",size:55,travel_index:[3],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("keys")+" "+T+" & "+A,icon:"e-qwerty qwerty-"+T,meta:{type:"keys",keys:[T,A],fingers:[i.map_content("left-middle-finger"),i.map_content("right-middle-finger")],pattern:"01010011010000101110101000101010"}},{name:i.map_content("review")+": "+T+" & "+A,icon:"e-qwerty qwerty-R-"+T,score:2500,meta:{type:"review",keys:[T,A,e.home_keys[2],e.home_keys[7]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+T+" & "+A,score:2500,meta:{type:"practice",size:135,focus:T+A}},{name:i.map_content("travel")+" R Middle",score:2500,meta:{type:"travel",size:55,travel_index:[7],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("travel")+" L Middle",score:2500,meta:{type:"travel",size:55,travel_index:[2],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:"Play: "+I+L+T+A,score:2500,meta:{type:"game1",size:59,focus:[I,L,T,A]}},{name:"History of QWERTY",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/154452279",icon:"e-cmn cmn-qwerty-history"},{name:i.map_content("keys")+" "+O+" & "+M,icon:"e-qwerty qwerty-"+O,meta:{type:"keys",keys:[O,M],fingers:[i.map_content("left-ring-finger"),i.map_content("right-ring-finger")],pattern:"01010011010000101110101000101010"}},{name:i.map_content("review")+": "+O+" & "+M,icon:"e-qwerty qwerty-R-"+O,score:2500,meta:{type:"review",keys:[O,M,e.home_keys[1],e.home_keys[8]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+O+" & "+M,score:2500,meta:{type:"practice",size:133,focus:O+M}},{name:i.map_content("travel")+" R Ring",score:2500,meta:{type:"travel",size:55,travel_index:[8],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("travel")+" L Ring",score:2500,meta:{type:"travel",size:55,travel_index:[1],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("keys")+" "+C+" & "+j,icon:"e-dvorak dvorak-"+C,meta:{type:"keys",keys:[C,j],fingers:[i.map_content("left-pinky-finger"),i.map_content("right-pinky-finger")],pattern:"01010011010000101110101000101010"}},{name:i.map_content("review")+": "+C+" & "+j,icon:"e-qwerty qwerty-R-"+C,score:2500,meta:{type:"review",keys:[C,j,e.home_keys[0],e.home_keys[9]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+C+" & "+j,score:2500,meta:{type:"practice",size:153,focus:C+j}},{name:i.map_content("travel")+" R Pinky",score:2500,meta:{type:"travel",size:55,travel_index:[9],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("travel")+" L Pinky",score:2500,meta:{type:"travel",size:55,travel_index:[0],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:"Play: Bottom Row",score:2500,meta:{type:"game1",size:44,needed:C+O+T+I+L+A+M+j}},{name:i.map_content("keys")+" "+P+" & "+R,icon:"e-qwerty qwerty-"+P+R,meta:{type:"keys",keys:[P,R],fingers:[i.map_content("left-index-finger"),i.map_content("right-index-finger")],pattern:"01010011000111011101101010101011"}},{name:i.map_content("review")+": "+P+" & "+R,icon:"e-qwerty qwerty-R-"+P+R,score:2500,meta:{type:"review",keys:[P,R,e.home_keys[4],e.home_keys[5]],pattern:"02 002 02 002 13 113 13 113 0202 1313 0002 1113 2013 202 313 20202 31313 002 113 0011 0101 0123 002 113",size:104}},{name:i.map_content("practice")+": "+P+" & "+R,score:2500,meta:{type:"practice",size:122,focus:P+R}},{name:"Take a Brek Get Active",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/190581249",icon:"e-cmn cmn-take-break"},{name:"Bottom Row: L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,size:126,needed:e.learned.left.join("")+C+O+T+I+P}},{name:"Bottom Row: R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,size:131,needed:e.learned.right.join("")+R+L+A+M+j}},{name:"Practice Bottom Row",score:2500,meta:{type:"practice",text:i.map_content("great-work")}},{name:"Play: Bottom Row",score:2500,meta:{type:"game3",size:52,needed:e.keys}},{name:"Play: Bottom Row",score:2500,meta:{type:"game2",size:183}},{name:i.map_content("travel")+" R All",score:2500,meta:{type:"travel",size:63,travel_index:[5,6,7,8,9],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:i.map_content("travel")+" L All",score:2500,meta:{type:"travel",size:63,travel_index:[0,1,2,3,4],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.keys}},{name:"One Small Space, One Giant Tab",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/154451199",icon:"e-cmn cmn-space-tab3"},{name:"Practice: Tab",score:2500,meta:{type:"practice",text:i.map_content("white-space")}}]};case"basic-level-1":return{v:[{name:"Basic Level 1",lesson_type:i.LESSON_HEADER,meta:{section:e.type}},{name:"Using Ten Fingers",icon:"e-cmn cmn-speed1",score:3e3,meta:{type:"practice",text:i.map_content("basic-1")}},{name:"Increase Speed",icon:"e-cmn cmn-speed1",score:3e3,meta:{type:"practice",text:i.map_content("basic-2")}},{name:"Practice",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:4,goal_wpm:11,meta:{type:"practice",text:i.map_content("basic-3")}},{name:"Don't Look Down",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:4,goal_wpm:11,meta:{type:"practice",text:i.map_content("basic-4")}},{name:"Practice R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,min_wpm:4,goal_wpm:11,meta:{type:"practice",size:46,engine:i.TYPING_LEFT_ANCHOR,needed:e.learned.right.join("")}},{name:"Play: Words",score:3e3,goal_wpm:11,meta:{type:"game2",from_prev:true,size:73}},{name:"Staring at Screen",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:4,goal_wpm:12,meta:{type:"practice",text:i.map_content("basic-5")}},{name:"Take Breaks",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:4,goal_wpm:12,meta:{type:"practice",text:i.map_content("basic-6")}},{name:"Look Away",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:5,goal_wpm:13,meta:{type:"practice",text:i.map_content("basic-7")}},{name:"Active Breaks",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:5,goal_wpm:13,meta:{type:"practice",text:i.map_content("basic-8")}},{name:"Practice L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,min_wpm:5,goal_wpm:13,meta:{type:"practice",size:58,engine:i.TYPING_RIGHT_ANCHOR,needed:e.learned.left.join("")}},{name:"Play: Numbers",score:3e3,goal_wpm:13,meta:{type:"game2",text:i.map_content("basic-9")}},{name:"Muscle Memory",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:6,goal_wpm:14,meta:{type:"practice",text:i.map_content("basic-10")}},{name:"Good Posture",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:6,goal_wpm:14,meta:{type:"practice",text:i.map_content("basic-11")}},{name:"Adjust Your Screen",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:7,goal_wpm:15,meta:{type:"practice",text:i.map_content("basic-12")}},{name:"Trust Yourself",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:7,goal_wpm:15,meta:{type:"practice",text:i.map_content("basic-13")}},{name:"Practice R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,min_wpm:7,goal_wpm:15,meta:{type:"practice",size:48,engine:i.TYPING_LEFT_ANCHOR,needed:e.learned.right.join("")}},{name:"Play: Words",score:3e3,goal_wpm:15,meta:{type:"game4",from_prev:true,size:109}},{name:"Brain Power",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:8,goal_wpm:16,meta:{type:"practice",text:i.map_content("basic-14")}},{name:"Repeat Lessons",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:8,goal_wpm:16,meta:{type:"practice",text:i.map_content("basic-15")}},{name:"Never Stop",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:9,goal_wpm:17,meta:{type:"practice",text:i.map_content("basic-16")}},{name:"No Peeking",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:9,goal_wpm:17,meta:{type:"practice",text:i.map_content("basic-17")}},{name:"Practice L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,min_wpm:9,goal_wpm:17,meta:{type:"practice",size:48,engine:i.TYPING_RIGHT_ANCHOR,needed:e.learned.left.join("")}},{name:"Play: Words",score:3e3,goal_wpm:15,meta:{type:"game2",from_prev:true,size:116}},{name:"Home Row",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:10,goal_wpm:18,meta:{type:"practice",text:i.map_content("basic-18")}},{name:"Moving Forward",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:10,goal_wpm:18,meta:{type:"practice",text:i.map_content("basic-19")}},{name:"Type Correctly",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:11,goal_wpm:19,meta:{type:"practice",text:i.map_content("basic-20")}},{name:"Train Your Muscles",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:11,goal_wpm:19,meta:{type:"practice",text:i.map_content("basic-21")}},{name:"Practice R Hand",icon:"e-cmn cmn-Hand-r2",score:3e3,min_wpm:11,goal_wpm:19,meta:{type:"practice",size:51,engine:i.TYPING_LEFT_ANCHOR,needed:e.learned.right.join("")}},{name:"Play: Words",score:3e3,goal_wpm:15,meta:{type:"game2",from_prev:true,size:95}},{name:"Virtual Guide",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:12,goal_wpm:20,meta:{type:"practice",text:i.map_content("basic-22")}},{name:"Bumps on J & F",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:12,goal_wpm:20,meta:{type:"practice",text:i.map_content("basic-23")}},{name:"Become a Pro",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:13,goal_wpm:21,meta:{type:"practice",text:i.map_content("basic-24")}},{name:"The Shift Key",icon:"e-cmn cmn-speed1",score:3e3,min_wpm:13,goal_wpm:21,meta:{type:"practice",text:i.map_content("basic-25")}},{name:"Practice L Hand",icon:"e-cmn cmn-Hand-l2",score:3e3,min_wpm:13,goal_wpm:21,meta:{type:"practice",size:60,engine:i.TYPING_RIGHT_ANCHOR,needed:e.learned.left.join("")}},{name:"Play: Words",score:3e3,goal_wpm:15,meta:{type:"game4",from_prev:true,size:139}},{name:"Fastest Typist in the World!",lesson_type:i.LESSON_VIDEO,video_uri:"/videos/162132768",icon:"e-cmn cmn-fastest-typist4"}]};case"tricky-words":t=[{name:"Tricky Words",lesson_type:i.LESSON_HEADER}];for(var V in e.words){var F=e.words[V];if(!F.trim().length&&F.split(" ").length<2)continue;t.push({name:F.split(" ").map(function(e){return(0,s.default)(e)}).join("/"),goal_wpm:e.goal_wpm,min_wpm:e.min_wpm,icon:"e-cmn cmn-"+e.icons[V],score:1500,meta:{type:"tricky",words:F}})}return{v:t};case"common-patterns":t=[{name:"Common Patterns",lesson_type:i.LESSON_HEADER}];for(var q in e.drums){var W=e.drums[q];t.push({name:W,goal_wpm:e.goal_wpm,min_wpm:e.min_wpm,icon:"e-cmn cmn-drum",score:1500,meta:{type:"drum",drum:W}})}return{v:t};case"shift-key":t=[{name:"Shift Key",lesson_type:i.LESSON_HEADER,meta:{section:e.type}}];var K=[null,"game1",null,"game3",null,"game1",null,"game3",null,"game1","index","game1",null];var J=function t(n,a,r){var o,i;if(n=="home"){var l=[e.home_row,e.shift_home_row];i=l[0];o=l[1]}if(n=="top"){var s=[e.top_row,e.shift_top_row];i=s[0];o=s[1]}if(n=="bottom"){var u=[e.bottom_row,e.shift_bottom_row];i=u[0];o=u[1]}return[o[a],o[r],i[a],i[r]].join("")};var X=[J("home",3,6),J("home",2,7),J("home",1,8),J("home",0,9),J("home",4,5),J("top",4,5),J("top",3,6),J("top",2,7),J("top",1,8),J("top",0,9),J("bottom",3,6),J("bottom",2,7),J("bottom",1,8),J("bottom",0,9),J("bottom",4,5)];var $="";for(var Q in X){var Z=X[Q];$+=Z[0]+Z[1];t.push({name:"Capital "+Z[0]+" & "+Z[1],icon:"e-qwerty qwerty-C-"+Z[0]+(Z[1].toLowerCase()!=Z[1]?Z[1]:""),score:1e3,meta:{type:"keys",keys:Z.split("")}});t.push({name:i.map_content("review")+": "+Z[0]+" & "+Z[1],icon:"e-qwerty qwerty-R-caps",score:2e3,meta:{type:"shift-review",keys:Z.split("")}});t.push({name:i.map_content("practice")+": "+Z[0]+" & "+Z[1],icon:"e-cmn cmn-practice",score:2500,meta:{type:"shift-practice",capitals:$,focus_caps:Z[0]+Z[1],size:165}});if(K[Q]=="game1"||K[Q]=="game3")t.push({name:"Play: ",score:2500,meta:{type:K[Q],size:60,use_prev:true}});else if(K[Q]=="index"){t.push({name:i.map_content("travel")+" Index",score:2e3,meta:{type:"travel",size:32,travel_index:[3,6],home_row:e.shift_home_row,top_row:e.shift_top_row,bottom_row:e.shift_bottom_row}})}}t.push({name:i.map_content("travel")+" Middle",score:2e3,meta:{type:"travel",size:32,travel_index:[2,7],home_row:e.shift_home_row,top_row:e.shift_top_row,bottom_row:e.shift_bottom_row,learned:e.shift_home_row+e.shift_top_row+e.shift_bottom_row[2]}});t.push({name:i.map_content("travel")+" Ring",score:2e3,meta:{type:"travel",size:32,travel_index:[1,8],home_row:e.shift_home_row,top_row:e.shift_top_row,bottom_row:e.shift_bottom_row,learned:e.shift_home_row+e.shift_top_row+e.shift_bottom_row[1]}});t.push({name:i.map_content("travel")+" Pinky",score:2e3,meta:{type:"travel",size:32,travel_index:[0,9],home_row:e.shift_home_row,top_row:e.shift_top_row,bottom_row:e.shift_bottom_row}});t.push({name:"Play: ZXBN",score:2500,meta:{type:"game3",size:60,use_prev:true}});return{v:t};case"basic-level-2":case"basic-level-3":var ee=e.type=="basic-level-3"?1:0;t=[{name:"Basic Level "+(2+ee),lesson_type:i.LESSON_HEADER,meta:{section:e.type}}];var te=11+ee*10,ne=21+ee*10,ae=10/25;for(var re=0;re<24;re++){var oe="Practice";var ie={type:"practice",size:160};if(e.lessons[re]&&e.lessons[re].length){var le=e.lessons[re].split("\n");oe=le[0].trim();le.shift();ie.text=le.join("\n").trim()}t.push({name:oe,icon:"e-cmn cmn-speed2",score:3500,min_wpm:te+Math.round(ae*re),goal_wpm:ne+Math.round(ae*re),meta:ie});if((re+1)%4==0){var se={game2:"G3"};if(ee){G=(re+1)%12==0?"game5":(re+1)%12==4?"game2":"game4"}else{G=(re+1)%8==0?"game4":"game2"}t.push({name:"Play: Words",goal_wpm:20,score:3500,icon:"e-cmn cmn-"+(se[G]||G),meta:{type:G,size:100,use_prev:true}})}}return{v:t};case"advanced-levels":var ue=[[26,41,4500,"speed4"],[31,46,5e3,"speed5"],[36,51,5500,"speed7"],[41,56,6e3,"speed8"],[41,61,6500,"speed9"],[44,64,7e3,"speed10"],[47,67,7500,"speed11"],[50,70,8e3,"speed12"],[50,74,8500,"speed14"]];var ce=e.level;var de=r(ue[ce-1],4);te=de[0];ne=de[1];H=de[2];Y=de[3];var fe=ue[ce];if(!fe)fe=[te,te+3];var pe=fe[0]-te;var me=fe[1]-ne;var he=ce>3?30:24;t=[{name:"Advanced Level "+ce,lesson_type:i.LESSON_HEADER,meta:{advanced:ce}}];for(var ve=0;ve<he;ve++){var ge="Practice";var ye={type:"practice",size:320};if(e.lessons[ve]&&e.lessons[ve].length){var _e=e.lessons[ve].split("\n");ge=_e[0].trim();_e.shift();ye.text=_e.join("\n").trim()}var be=ne+Math.round(me/he*ve);t.push({name:ge,icon:"e-cmn cmn-"+(Y=="speed12"&&be>71?"speed13":Y),score:H,min_wpm:te+Math.round(pe/he*ve),goal_wpm:be,meta:ye});var we={game2:"G3"};G=null;if(ce<=3){if((ve+1)%4==0){G=(ve+1)%12==0?"game5":(ve+1)%12==4?"game2":"game4"}}else{if(ce<=6){if(ve==14)G="game4";else if(ve==29)G="game5"}}if(G){t.push({name:"Play: Words",goal_wpm:ce==1?25:ce==2?30:35,score:H,icon:"e-cmn cmn-"+(we[G]||G),meta:{type:G,size:120,use_prev:true}})}}return{v:t};case"numbers":t=[{name:"Numbers",lesson_type:i.LESSON_HEADER,meta:{section:e.type}}];var Ee=1;var ke=[9,0,1,2,3,4,5,6,7,8];var xe=[[4,7],[3,8],[2,9],[1,0],[5,6]];for(var Ne=0;Ne<xe.length;Ne++){var Se=r(xe[Ne],2),Ce=Se[0],Oe=Se[1];t.push({name:i.map_content("keys")+" "+i.map_content("key1-and-key2",{KEY1:Ce,KEY2:Oe}),icon:"e-qwerty qwerty-numbers",meta:{type:"keys",keys:[Ce+"",Oe+""],size:20}});t.push({name:i.map_content("review")+": "+i.map_content("key1-and-key2",{KEY1:Ce,KEY2:Oe}),icon:"e-qwerty qwerty-R-numbers",score:2e3,meta:{type:"numbered-review",indexes:[ke[Ce],ke[Oe]],chars:[Ce+"",Oe+""],home_row:e.home_keys,size:75}});t.push({name:i.map_content("practice")+": "+i.map_content("key1-and-key2",{KEY1:Ce,KEY2:Oe}),score:2500,min_wpm:15,goal_wpm:25,meta:{type:"practice",text:i.map_content("numbers-"+Ee)}});Ee++}t.push({name:"Play: All Numbers",score:3e3,goal_wpm:10,meta:{type:"game1",text:Array(40).fill(0).map(function(e){return Math.floor(Math.random()*10)}).join("")}});var Te=[[4,5],[3,2],[1,5],[6,7],[8,9],[0,6]];for(var Ie=0;Ie<Te.length;Ie++){var Pe=r(Te[Ie],2),Re=Pe[0],Oe=Pe[1];t.push({name:i.map_content("travel")+" "+Re+" and "+Oe,score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[ke[Re],ke[Oe]],travel_extra:[Re,Oe],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.bottom_keys,size:75}})};t.push({name:"Keys 1 to 5",icon:"e-cmn cmn-Hand-l2",score:3e3,goal_wpm:10,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,text:d(75,"12345")}});t.push({name:"Keys 6 to 0",icon:"e-cmn cmn-Hand-r2",score:3e3,goal_wpm:10,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,text:d(75,"67890")}});t.push({name:i.map_content("travel")+" Left",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[0,1,2,3,4],travel_extra:[1,2,3,4,5],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.bottom_keys,size:75}});t.push({name:i.map_content("travel")+" Right",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[5,6,7,8,9],travel_extra:[6,7,8,9,0],home_row:e.home_keys,top_row:e.top_keys,bottom_row:e.bottom_keys,size:75}});var Le=[e.home_keys,e.top_keys,e.bottom_keys].join("");t.push({name:"Left Hand Numbers",icon:"e-cmn cmn-Hand-l2",score:3e3,goal_wpm:10,meta:{type:"practice",engine:i.TYPING_RIGHT_ANCHOR,text:d(75,"12345",e.learned.left.filter(function(e){return Le.indexOf(e)>=0}))}});t.push({name:"Right Hand Numbers",icon:"e-cmn cmn-Hand-r2",score:3e3,goal_wpm:10,meta:{type:"practice",engine:i.TYPING_LEFT_ANCHOR,text:d(75,"67890",e.learned.right.filter(function(e){return Le.indexOf(e)>=0}))}});t.push({name:"Play: Numbers",score:3e3,min_wpm:1,goal_wpm:20,meta:{type:"game2",text:i.map_content("numbers-6")}});return{v:t};case"numbered-symbols":t=[{name:"Symbols",lesson_type:i.LESSON_HEADER,meta:{section:e.type}}];var Ae=[[3,6],[2,7],[1,8],[0,9],[4,5]];for(var Me=0;Me<Ae.length;Me++){var je=r(Ae[Me],2),Ge=je[0],Oe=je[1];var Ye=[e.symbols[Ge],e.symbols[Oe]],He=Ye[0],De=Ye[1];t.push({name:i.map_content("keys")+" "+i.map_content("key1-and-key2",{KEY1:He,KEY2:De}),icon:"e-cmn cmn-symbols",meta:{type:"keys",keys:[He,De],size:20}});t.push({name:i.map_content("review")+": "+i.map_content("key1-and-key2",{KEY1:He,KEY2:De}),icon:"e-qwerty qwerty-r-symbols",score:2e3,meta:{type:"numbered-review",indexes:[Ge,Oe],chars:[He,De],home_row:e.home_keys,size:75}});t.push({name:i.map_content("practice")+": "+i.map_content("key1-and-key2",{KEY1:He,KEY2:De}),score:2500,min_wpm:15,goal_wpm:25,meta:{type:"symbol-practice",chars:[He,De]}})}t.push({name:"Play: All Symbols",score:3e3,goal_wpm:10,meta:{type:"game1",text:Array(40).fill(0).map(function(t){return e.symbols[Math.floor(Math.random()*10)]}).join("")}});var ze=[3,2,1,0,4,6,7,8,9,5];for(var Be=0;Be<ze.length;Be++){var Ue=ze[Be];var He=e.symbols[Ue];t.push({name:i.map_content("travel")+" "+He,score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[Ue],travel_extra:[He],learned:e.learned.left.concat(e.learned.right),home_row:e.shift_home_keys,top_row:e.shift_top_keys,bottom_row:e.shift_bottom_keys,size:60}})}t.push({name:i.map_content("travel")+" Left",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[0,1,2,3,4],travel_extra:e.symbols.substring(0,5),learned:e.learned.left.concat(e.learned.right),home_row:e.shift_home_keys,top_row:e.shift_top_keys,bottom_row:e.shift_bottom_keys,size:75}});t.push({name:i.map_content("travel")+" Right",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"travel",travel_index:[5,6,7,8,9],travel_extra:e.symbols.substring(5,10),learned:e.learned.left.concat(e.learned.right),home_row:e.shift_home_keys,top_row:e.shift_top_keys,bottom_row:e.shift_bottom_keys,size:75}});t.push({name:"Review: Symbols",icon:"e-qwerty qwerty-r-symbols",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"practice",text:d(60,e.symbols,e.home_keys+e.top_keys+e.bottom_keys)}});t.push({name:"Practice: Symbols",score:3e3,min_wpm:10,goal_wpm:20,meta:{type:"practice",text:i.map_content("symbols-0")}});return{v:t};case"other-symbols":t=[{name:"More Symbols",lesson_type:i.LESSON_HEADER}];var Ve=e.home_keys+e.top_keys+e.bottom_keys;var Fe=function e(t,n){var a=Math.random()<5;return(a?t:n)+Ve[Math.floor(Math.random()*Ve.length)]+(a?n:t)+Ve[Math.floor(Math.random()*Ve.length)]};var qe=function n(a){var r=[e.symbols[a],e.symbols[a+1]],o=r[0],l=r[1];t.push({name:i.map_content("keys")+" "+i.map_content("key1-and-key2",{KEY1:o,KEY2:l}),icon:"e-cmn cmn-symbols2",meta:{type:"keys",keys:[o,l],size:20}});t.push({name:i.map_content("review")+": "+i.map_content("key1-and-key2",{KEY1:o,KEY2:l}),icon:"e-qwerty qwerty-R-symbols2",score:2e3,min_wpm:3,goal_wpm:10,meta:{type:"practice",text:Array(6).fill("").map(function(e){return Fe(o,l)}).join(" ")}});t.push({name:i.map_content("practice")+": "+i.map_content("key1-and-key2",{KEY1:o,KEY2:l}),score:2500,min_wpm:10,goal_wpm:20,meta:{type:"practice",text:i.map_content("symbols-"+(Math.floor(a/2)+1))}})};for(var We=0;We<e.symbols.length;We+=2){qe(We)}t.push({name:"Play: Symbols",score:2e3,goal_wpm:10,meta:{type:"game1",text:Array(40).fill(0).map(function(t){return e.symbols[Math.floor(Math.random()*16)]}).join("")}});t.push({name:"Review: no shift",icon:"e-qwerty qwerty-R-symbols3",score:2500,min_wpm:5,goal_wpm:15,meta:{type:"practice",text:d(46,e.symbols.split("").filter(function(t){return e.shift_symbols.indexOf(t)<0}))}});t.push({name:"Review: with shift",icon:"e-qwerty qwerty-R-symbols2",score:2500,min_wpm:5,goal_wpm:15,meta:{type:"practice",text:d(46,e.symbols.split("").filter(function(t){return e.shift_symbols.indexOf(t)>=0}))}});var Ke=[1,2,3];for(var Je=0;Je<Ke.length;Je++){var Xe=Ke[Je];t.push({name:"Practice: Symbols "+Xe,score:3e3,min_wpm:5,goal_wpm:15,meta:{type:"practice",text:i.map_content("symbols-all-"+Xe)}})}return{v:t};case"new-key-pair":var $e=r(e.keys,2);D=$e[0];z=$e[1];return{v:[{name:i.map_content("keys")+" "+D+" & "+z,icon:"e-qwerty qwerty-"+D+z,meta:{type:"keys",keys:[D,z],fingers:e.fingers,size:32}},{name:i.map_content("review")+": "+D+" & "+z,icon:"e-qwerty qwerty-R-"+D+z,score:2e3,meta:{type:"review",keys:[D,z],size:81}},{name:i.map_content("practice")+": "+D+" & "+z,score:2500,meta:{type:"practice",size:125,focus:D+z}}]}}}();if((typeof B==="undefined"?"undefined":a(B))==="object")return B.v}e.exports={get_section_templates:m,get_available_sections:p}},179:function(e,t,n){var a=n(8);var r=d(a);var o=n(17);var i=d(o);var l=n(91);var s=d(l);var u=n(12);var c=d(u);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a,o){var l=n[e];localStorage.setItem("login_method",e);a&&a(true);return new Promise(function(s,u){var c=Object.assign({response_type:"code",redirect_uri:n.BASE_DOMAIN+n.OAUTH_CALLBACK},l.PARAMS);var d=window.is_tp?"www":window.cordova?localStorage.getItem("domain-key"):window.location.host.split(".")[0];var f=l.AUTHORIZE_URL+"?"+r.default.param(c);var m=false;function h(n){n=decodeURIComponent(n);function r(){if(a)a(false);u.apply(undefined,arguments)}if(n.indexOf("error")>0){console.log("got oauth error",n);r();return}var l=n.split("code=")[1].split("&")[0];if(o)s(l);else i.default.resolveOAauthToken(e,d,l,function(e){return p(e,t,s,r)},r)}if(window.cordova){window.handleOpenURL=function(e){window.handleOpenURL=null;SafariViewController.hide();h(e)};SafariViewController.show({url:f})}else{var v=function e(t){m=true;if(~t.origin.split("?")[0].indexOf(n.BASE_DOMAIN)&&~t.data.indexOf("code=")){window.removeEventListener("message",e);h(t.data)}};window.addEventListener("message",v);var g=window.open(f,"_blank","location=no,toolbar=yes");var y=setInterval(function(){if(g.closed&&!m){clearInterval(y);a&&a(false)}},1e3)}})}function p(e,t,n,a){var r=e.user,o=e.tpc_users;if(t&&!window.is_tp)return n(e);if(!r&&o.length==1){return window.location="//"+o[0].domain+".typingclub.com?sign="+encodeURIComponent(o[0].sign)}if(o.length)n(e);else if(r){i.default.getUserToken(r.domain,null,null,function(e){if(e.is_instructor){window.location=c.default.get2dict().next||"/portal/";return}else{m(e.api_token);n()}},a,r.sign)}else if(t){i.default.getProfile(function(t){if(!t.is_anonymous)n();else{var a=e.auth_user;var r={};var o=["email","fname","lname","sis_id"];for(var l=0;l<o.length;l++){var s=o[l];if(a[s])r[s]=a[s]}i.default.updateProfile(r,function(){return n()},function(e,t){return raise(e)})}},true)}else a()}function m(e){approuter.team=null;approuter.program=null;approuter.lesson=null;i.default.clearProfile();i.default.setToken(e)}e.exports={oauthWithPopup:f,signUserIn:m}},18:function(e,t,n){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(1);var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){u(t,e);function t(){var e;var n,a,r;l(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++){i[u]=arguments[u]}return r=(n=(a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.close=function(){if(a.props.close_outside){approuter.hide_modal(a.props.id)}},n),s(a,r)}a(t,[{key:"componentDidMount",value:function e(){var t=this;setTimeout(function(){return t.modal_div&&t.modal_div.focus()},10)}},{key:"render",value:function e(){var t=this;var n=Object.assign({},this.props.style,{width:this.props.width,padding:this.props.padding==null?30:this.props.padding});if(this.props.height)n.height=this.props.height;return o.default.createElement("div",{onClick:this.close,className:"edmodal"},o.default.createElement("div",{ref:function e(n){t.modal_div=n},role:"dialog",tabIndex:"0","aria-label":"dialog",style:n,onClick:function e(t){return t.stopPropagation()},className:"edmodal-box "+(this.props.className||"")},this.props.show_x==true?o.default.createElement("div",{onClick:this.close.bind(this),className:"edmodal-x"},"×"):"",this.props.children))}}]);return t}(o.default.Component);c.defaultProps={show_x:true,close_outside:true,esc_close:true};e.exports=c},180:function(e,t,n){function a(){var e="-";var t=navigator.appVersion;var n=navigator.userAgent;var a=navigator.appName;var r=""+parseFloat(navigator.appVersion);var o=parseInt(navigator.appVersion,10);var i,l,s;if((l=n.indexOf("Opera"))!=-1){a="Opera";r=n.substring(l+6);if((l=n.indexOf("Version"))!=-1){r=n.substring(l+8)}}if((l=n.indexOf("OPR"))!=-1){a="Opera";r=n.substring(l+4)}else if((l=n.indexOf("Edge"))!=-1){a="Edge";r=n.substring(l+5)}else if((l=n.indexOf("MSIE"))!=-1){a="IE";r=n.substring(l+5)}else if((l=n.indexOf("Chrome"))!=-1){a="Chrome";r=n.substring(l+7)}else if((l=n.indexOf("Safari"))!=-1){a="Safari";r=n.substring(l+7);if((l=n.indexOf("Version"))!=-1){r=n.substring(l+8)}}else if((l=n.indexOf("Firefox"))!=-1){a="Firefox";r=n.substring(l+8)}else if(n.indexOf("Trident/")!=-1){a="IE";r=n.substring(n.indexOf("rv:")+3)}else if((i=n.lastIndexOf(" ")+1)<(l=n.lastIndexOf("/"))){a=n.substring(i,l);r=n.substring(l+1);if(a.toLowerCase()==a.toUpperCase()){a=navigator.appName}}if((s=r.indexOf(";"))!=-1)r=r.substring(0,s);if((s=r.indexOf(" "))!=-1)r=r.substring(0,s);if((s=r.indexOf(")"))!=-1)r=r.substring(0,s);o=parseInt(""+r,10);if(isNaN(o)){r=""+parseFloat(navigator.appVersion);o=parseInt(navigator.appVersion,10)}var u=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(t);return{browser:a,browserVersion:r,majorVersion:o,mobile:u}}function r(){function e(){document.body.innerHTML=""}function t(){document.body.innerHTML=""+"<div style='border:1px solid #bbb;width:600px;margin:auto;margin-top:100px;' class='well'>"+"    <h3>Please upgrade your browser</h3>"+"    <p style='font-size:1.3em;'>TypingClub no longer supports your browser. For the best experience we recommend"+"       upgrading your browser to <a href='https://www.google.com/chrome/browser/desktop/' target='_blank'>Google Chrome</a>"+"       or the latest version of the browser of your choice.</p>"+"       -- EdClub Team"+"</div>"}setInterval(function(){e();t()},500)}e.exports=function(e){var t=a();e.binfo=t;if(t.browser=="IE"&&t.majorVersion<10||t.browser=="Safari"&&t.majorVersion<7||t.browser=="Firefox"&&t.majorVersion<25||t.browser=="Chrome"&&t.majorVersion<30){r();return false}return true}},183:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(1);var o=l(r);var i=n(45);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(e){c(t,e);function t(e){s(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.lesson_key.split(".");var r;var o=true;var i=false;var l=undefined;try{for(var c=e.lessons[Symbol.iterator](),d;!(o=(d=c.next()).done);o=true){var f=d.value;var p=f.getIn(a);if(p!=r){if(r==null)r=p;else{r=null;break}}}}catch(e){i=true;l=e}finally{try{if(!o&&c.return){c.return()}}finally{if(i){throw l}}}n.state={hasInitialValue:r!=null,value:r,adjustValue:0};return n}a(t,[{key:"setValue",value:function e(t,n){var a=this.props,r=a.lesson_key,o=a.validators,i=a.labels,l=a.onChange,s=a.lesson_type;t=t&&parseInt(t);l(r,t,s,o,n);this.setState({value:n?null:t,adjustValue:n?t:0})}},{key:"render",value:function e(){var t=this;var n=this.props,a=n.lessons,r=n.errors,l=n.lesson_key,s=n.validators,u=n.labels,c=n.onChange;var d=this.state,f=d.hasInitialValue,p=d.value,m=d.adjustValue;return o.default.createElement("div",{className:(0,i.getValidStyle)(r,l,"preview-field")},o.default.createElement("span",{className:"lbl"},u[0],":"),f?o.default.createElement("span",{className:"field-num"},o.default.createElement("input",{type:"text",value:p||"",onChange:function e(n){return t.setValue(n.target.value,false)}})," ",u[1]):o.default.createElement("span",null,o.default.createElement("span",{className:"lbl sublbl"},"Change by"),o.default.createElement("span",{className:"field-num"},o.default.createElement("span",{className:"btn-group btn-group-xs"},o.default.createElement("button",{className:"btn btn-default",onClick:function e(n){return m>-10&&t.setValue(m-1,true)}},"-"),o.default.createElement("button",{className:"btn btn-default",onClick:function e(n){return t.setValue(0,true)},style:{width:40}},m>0?"+":"",m),o.default.createElement("button",{className:"btn btn-default",onClick:function e(n){return m<10&&t.setValue(m+1,true)}},"+"))," ",u[1]),o.default.createElement("span",{className:"lbl sublbl"},o.default.createElement("b",{style:{fontWeight:500}},"OR ")," Set to"),o.default.createElement("span",{className:"field-num"},o.default.createElement("input",{type:"text",value:p||"",onChange:function e(n){return t.setValue(n.target.value,false)}})," ",u[1])),(0,i.isValid)(r,l))}}]);return t}(o.default.Component);t.default=d},184:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default={dynamicLessonText:"The text of this lesson is dynamically generated based on student's weaknesses. The lesson's content will reflect the student’s progress each time.",objective:"Do you want your students to pass without meeting any criteria (best for learning new keys) or meet goals and earn stars/points for this lesson (best for improving skills)?",voiceOverWords:"Does this lesson contain normal words that can be spoken by a voice narrator?",placementTest:"Placement tests can be taken to advance someone over lessons designed for lower skills.",hideLesson:"If you hide this lesson, it will not show up as part of the main lesson plan view, but will continue to work if it is set as a placement test.",onError:"What to do when the student types an invalid character?",backspace:"Would you like to allow students to use backspace?",timeLimit:"This is the maximum amount of time a student can spend on this lesson. The student will be cut off and will be awarded with lesson results when this time limit is reached.\n\nSet the time-limit to 0 minutes in order to disable this feature.",scoreTyping:"This is the maximum possible score students may receive, if they were to type twice as fast as the Goal WPM defined above and 100% accuracy. Their score will be calculated based on this parameter. We advise against changing this value for a lesson once your students have started practicing it.\n\nMake sure to distribute this value fairly for more difficult lessons to offer more points.",scoreVideo:"How many points will the student receive upon watching this video.",minAccuracy:"Students must meet this minimum accuracy score, in order to pass the level and get one or more stars.",minSpeed:"Students must have an average WPM speed specified here in order to pass this level and get one or more stars.",speedGoal:"This value determines the difficulty level of this lesson. Only if the student meets this speed with 100% accuracy, will he or she receive all 5 stars along with the full score.\n\nIf the students do not meet 100% accuracy, they need to type even faster to compensate for the lost accuracy points and achieve all points & stars."}},185:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.InputGroup=undefined;var a=n(1);var r=i(a);var o=n(45);function i(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var n=t.label,a=t.help,i=t.name,l=t.value,s=t.errors,u=t.onChange,c=t.units;return r.default.createElement("div",{className:(0,o.getValidStyle)(s,i,"edit-field")},r.default.createElement("div",{className:"lbl"},r.default.createElement("span",{className:"with-hint"},n,a&&r.default.createElement("span",{className:"helpful-hint"},r.default.createElement("div",null,a)))),r.default.createElement("div",{className:"input-group"},r.default.createElement("input",{type:"text",className:"form-control --field-num --lrg",name:i,value:l,onChange:u,"aria-describedby":"input-group-addon-"+i}),r.default.createElement("span",{className:"input-group-addon",id:"input-group-addon-"+i},c)),(0,o.isValid)(s,i))};t.InputGroup=l},21:function(e,t,n){(function(t){var a=function(){var e=A(regeneratorRuntime.mark(function e(n){var a,r,o,i,l,s;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:if(!(!n.data||!n.data.type)){u.next=2;break}return u.abrupt("return");case 2:if(!(n.data.type!=B.APPLY_ENV)){u.next=4;break}return u.abrupt("return");case 4:a=n.data,r=a.env,o=a.profile,i=a.team,l=a.program;if(!o){u.next=12;break}u.next=8;return _.default.Profile.wrapCopy(o);case 8:s=u.sent;s.teamsForProgram=function(){return[i]};t.profile=s;M.profile=s;case 12:if(i){M.team=i}if(l){M.program=l}_.default.postVideoResults=function(){};_.default.postTypingResults=function(){};M.apply_env(r,false,true);case 17:case"end":return u.stop()}}},e,this)}));return function t(n){return e.apply(this,arguments)}}();var r=n(109);var o=L(r);var i=n(111);var l=L(i);var s=n(147);var u=L(s);var c=n(79);var d=L(c);var f=n(8);var p=L(f);var m=n(5);var h=L(m);var v=n(54);var g=L(v);var y=n(17);var _=L(y);var b=n(12);var w=L(b);var E=n(253);var k=n(124);var x=L(k);var N=n(368);var S=L(N);var C=n(256);var O=L(C);var T=n(176);var I=n(27);var P=L(I);var R=n(134);function L(e){return e&&e.__esModule?e:{default:e}}function A(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o);var l=i.value}catch(e){n(e);return}if(i.done){e(l)}else{return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)})}}return a("next")})}}var M={events:new g.default(["unload","transition","show_modal","hide_modal","logout"]),app_routes:null,url_routes:null,root:null,current_app:null,profile:null,team:null,team_for_program:new R.Persistence("team_for_program"),program:null,lesson:null,last_lesson:null,lesson_activity:0,current_app_index:1,modals:[],is_lesson_to_plan_transition:false,has_freestar_ads:false};(0,R.registerApprouterEventBus)(M.events);function j(){var e=document.createElement("STYLE");e.innerHTML=".success_check_text {"+"position: absolute;"+"color: #fff;"+"font-family: helvetica, arial;"+"font-size: 45px;"+"font-weight: 600;"+"width: 300px; "+"text-align: center;"+"background: #88D103; "+"border-radius: 20px;"+"padding: 20px;"+"font-weight: 400;"+"box-shadow: 0 0 43px lightgreen;"+"margin-left: -30px; }"+".success_check {"+"z-index: 10000; "+"position: fixed; "+"top: 50%; "+"left: 50%; "+"margin-left: -150px; "+"margin-top: -250px; "+"height: 300px; "+"width: 300px; "+"padding: 40px 40px 30px 30px; "+"background: #88D103; "+"border-radius: 100%; "+"display: none; "+"box-shadow: 0 0 43px lightgreen; }";(0,p.default)("body").append(e)}function G(e){var t=(0,P.default)(profile.language);if(M.program&&M.program.is_junior){Y(e);return}j();var n=(0,p.default)("<div />").addClass("success_check");n.html('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path fill="#FFFFFF" d="M96.988,23.089l-9.791-9.791c-1.353-1.349-3.539-1.349-4.892,0.004L34.57,61.033L17.694,44.16   c-1.353-1.353-3.539-1.353-4.892-0.003l-9.791,9.791c-1.35,1.353-1.35,3.542,0.003,4.896l27.862,27.861   c1.001,1.002,2.298,2.318,3.623,2.318s2.763-1.316,3.764-2.318l58.722-58.721C98.338,26.632,98.338,24.441,96.988,23.089z"/></svg>');var a=(0,p.default)('<div tabindex="2000" aria-label="'+t.t("Lesson finished! Great work")+'">'+t.t("Great Work!")+"</div>").addClass("success_check_text").css("outline","none");n.append(a);(0,p.default)("body").prepend(n);(0,p.default)("#night").css("background","steelblue").fadeTo(800,.9);n.animateCss("bounceIn",function(){a.focus();setTimeout(function(){n.animateCss("bounceOut",function(){(0,p.default)(".success_check").hide()})},1300)});setTimeout(e,2600)}function Y(e){M.apply_env({app:"junior.result_page",callback:e})}function H(e){document.location=e}M.refresh=function(){if(M.current_app.canonical_url&&w.default.refresh_page_on_new_url()){H(M.current_app.canonical_url);return}M.apply_env(M.current_app)};M.unload_current_app=function(){w.default.flush_timeouts();M.events.fire_event("unload");M.events.flush("unload");M.events.flush("transition");(0,p.default)(window).unbind("resize")};function D(e){var t=[];if(e.instruction&&e.instruction.instruction.length)t.push(e.instruction);if(e.video)t.push(e.video);if(e.typing)t.push(e.typing);if(e.videotyping)t.push(e.videotyping);return t}function z(e,t){var n=t.start_lock_index;var a=t.lock_index||0;var r=!(n==null||a===-1||a===0);return r&&(e.lesson_index<n||e.lesson_index>a)}M.apply_env=function(){var e=A(regeneratorRuntime.mark(function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var r,i,l,s,u,c,f,m;return regeneratorRuntime.wrap(function e(v){while(1){switch(v.prev=v.next){case 0:l=function e(t){return t.type!="blank"&&!t.is_instructor};i=function e(){var t=M.team_for_program.get(M.program.resource_uri);if(t)M.team=M.profile.teams.find(function(e){return e.resource_uri==t});var n=M.profile.teamsForProgram(M.program);if(M.team){var a=n.find(function(e){return e.resource_uri==M.team.resource_uri});if(!a)M.team=null}if(!M.team){M.team=n[0];if(n.length==1){M.team_for_program.set(M.program.resource_uri,M.team.resource_uri)}else{M.select_team(n)}}};M.modals=[];Raven.captureBreadcrumb({category:"log",level:"info",message:"apply_env: "+t.app});if(!n){M.unload_current_app()}if(M.current_app_index==1){(0,p.default)(".initial-loader").remove()}M.current_app_index++;if(M.root==null){M.root=(0,p.default)("div#main");(0,d.default)(M.root.length>0,"missing div id=main")}if(!(a&&!M.profile||!a)){v.next=18;break}v.prev=9;v.next=12;return _.default.getProfile();case 12:M.profile=v.sent;v.next=18;break;case 15:v.prev=15;v.t0=v["catch"](9);return v.abrupt("return");case 18:r=t.app;(0,d.default)(r,"missing app name");s=l;v.next=23;return M.resolveAppRoute(r);case 23:u=v.sent;if(u&&u.authorization){s=u.authorization}if(s(M.profile)){v.next=28;break}M.login_page({next_app:t});return v.abrupt("return");case 28:M.is_lesson_to_plan_transition=false;c=document.location.search;v.t1=t.app;v.next=v.t1==="student.placementtest_app"?33:v.t1==="lesson"?46:v.t1==="student.testplan"?75:v.t1==="student.lessonplan"?75:v.t1==="student.dashboard_app"?86:99;break;case 33:if(!(!M.program||t.id!=M.program.id)){v.next=43;break}v.prev=34;v.next=37;return _.default.get(t.program_uri);case 37:M.program=v.sent;v.next=43;break;case 40:v.prev=40;v.t2=v["catch"](34);return v.abrupt("return");case 43:M.placementtest=t;i();return v.abrupt("break",99);case 46:if(!(!M.lesson||t.id!=M.lesson.id)){v.next=60;break}if(!(!M.program||t.program!=M.program.resource_uri)){v.next=57;break}v.prev=48;v.next=51;return _.default.get(t.program);case 51:M.program=v.sent;v.next=57;break;case 54:v.prev=54;v.t3=v["catch"](48);return v.abrupt("return");case 57:M.last_lesson=t;M.lesson=t;M.lesson_activity=0;case 60:v.prev=60;r=D(M.lesson)[M.lesson_activity].app;if(!(M.lesson.typing&&M.lesson.typing.is_dynamic&&!M.lesson.typing.dynamic_text_generated)){v.next=65;break}v.next=65;return new Promise(function(e){(0,T.generate_dynamic_lesson)(M.lesson,M.program,e)});case 65:v.next=71;break;case 67:v.prev=67;v.t4=v["catch"](60);Raven.captureException(v.t4,{extra:{same_app_lesson:M.lesson==M.current_app,lesson_activity:M.lesson_activity,lesson:JSON.stringify(M.lesson)}});throw v.t4;case 71:i();if(!a&&z(t,M.get_teamprogram())){r="student.lesson_locked"}if(window.is_lp_authoring)window.AUTHORING_LESSON_ID=t.id;return v.abrupt("break",99);case 75:M.lesson=null;M.lesson_activity=0;M.program=t;i();if(!M.current_app){v.next=85;break}v.t5=M.current_app.app;v.next=v.t5==="lesson"?83:85;break;case 83:M.is_lesson_to_plan_transition=true;return v.abrupt("break",85);case 85:return v.abrupt("break",99);case 86:if(!(!M.current_app||M.current_app.app!="approuter.dashboard"&&M.current_app.app!="shared.school_login_app")){v.next=97;break}_.default.clearProfile();v.prev=88;v.next=91;return _.default.getProfile();case 91:M.profile=v.sent;v.next=97;break;case 94:v.prev=94;v.t6=v["catch"](88);return v.abrupt("return");case 97:c="";return v.abrupt("break",99);case 99:if(!window.cordova&&t.canonical_url){if(M.current_app){if(document.location.pathname+document.location.search!=t.canonical_url+c){history.pushState(t,t.title,t.canonical_url+c);ga("send","pageview",t.canonical_url)}}else{history.replaceState(t,t.title,t.canonical_url+c)}}v.next=102;return M.resolveAppRoute(r);case 102:f=v.sent;(0,d.default)(f,r);(0,d.default)((0,o.default)(f),r);v.next=107;return f(t,M.profile);case 107:m=v.sent;if(m){v.next=110;break}return v.abrupt("return");case 110:M.current_app=t;return v.abrupt("return",new Promise(function(e){h.default.unmountComponentAtNode(M.root.get(0));h.default.render(m,M.root.get(0),function(){(0,p.default)('[tabindex="1"]').focus();e(m)})}));case 112:case"end":return v.stop()}}},e,this,[[9,15],[34,40],[48,54],[60,67],[88,94]])}));return function(t){return e.apply(this,arguments)}}();M.goto_url=(0,E.log_catch_promise)("goto_url",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!_.default.settings.is_production){console.log("goto_url",e,t,n)}if(t&&w.default.refresh_page_on_new_url()){H(t);return}Raven.captureBreadcrumb({category:"log",level:"info",message:"goto_url: "+JSON.stringify(e)});if(!((0,l.default)(e)&&e.search(/lesson/)>=0&&M.current_app&&M.current_app.app=="student.lessonplan")){M.events.fire_event("transition")}M.unload_current_app();if(!(0,l.default)(e)){var a=e["url"];var r=e["transition"];if(r){switch(r){case"animate_completion":return new Promise(G).then(function(){return M.goto_url(a)});case"none":return M.goto_url(a);default:(0,d.default)(false,"unknown completion")}}else if(e.redirect){H(e.redirect);return}else if(e.app){return M.apply_env(e,true)}else{return M.goto_url(a)}}return _.default.get(e,function(e){Object.assign(e,n);return M.apply_env(e,true)})});M.goto_app=(0,E.log_catch_promise)("goto_app",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!_.default.settings.is_production){console.log("goto_app",e,t,n)}if(t&&w.default.refresh_page_on_new_url()){H(t);return}Object.assign(n,{canonical_url:t,app:e});return M.apply_env(n)});M.goto_window_url=(0,E.log_catch_promise)("goto_window_url",function(e){e=e||window.document.location.pathname;if(!_.default.settings.is_production){console.log("goto_window_url",e)}var t={name:"404",path:e,app:"shared.not_found_app"};var n={};var a=true;var r=false;var o=undefined;try{for(var i=M.url_routes[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;var u=s.compiled.exec(e);if(u){t=s;u.shift();for(var c=0;c<u.length;c++){n[t.keys[c].name]=u[c]}break}}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}if(t.app)return M.goto_app(t.app,e,n);else{n["version"]=_.default.version;var d=S.default.compile(t.api)(n);return M.goto_url(d)}});M.goto_url_name=(0,E.log_catch_promise)("goto_url_name",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!_.default.settings.is_production){console.log("goto_url_name",e,t,n)}var a=null;var r=true;var o=false;var i=undefined;try{for(var l=M.url_routes[Symbol.iterator](),s;!(r=(s=l.next()).done);r=true){var u=s.value;if(u.name==e){a=u;break}}}catch(e){o=true;i=e}finally{try{if(!r&&l.return){l.return()}}finally{if(o){throw i}}}(0,d.default)(a,"goto_url_name invalid name "+e);t["version"]=_.default.version;if(a.app){var c=Object.assign({},t,n);return M.goto_app(a.app,S.default.compile(a.path)(c),c)}else{var f=Object.assign({},t,n);var p=S.default.compile(a.api)(f);return M.goto_url(p,null,f)}});var B=Object.freeze({APPLY_ENV:1});M.apply_env_message=function(e,t,n){e.postMessage({type:B.APPLY_ENV,team:{settings:{}},profile:n.profile,program:n.program,env:t},"*")};window.addEventListener("message",a,false);M.next=function(){switch(M.current_app.app){case"lesson":M.lesson_activity++;M.refresh()}};M.set_resolveAppRoute=function(e){M.resolveAppRoute=e};M.set_url_routes=function(e){var t=true;var n=false;var a=undefined;try{for(var r=e[Symbol.iterator](),o;!(t=(o=r.next()).done);t=true){var i=o.value;i.keys=[];i.compiled=(0,S.default)(i.path,i.keys)}}catch(e){n=true;a=e}finally{try{if(!t&&r.return){r.return()}}finally{if(n){throw a}}}M.url_routes=e};M.next_lesson=function(){var e=M.current_app.next_lesson_url;if(e)M.goto_url(e);else M.lesson_plan()};M.redo_lesson=function(){M.goto_url(M.lesson.resource_uri,M.lesson.canonical_url)};M.exit_lesson=function(){if(!M.lesson)return M.dashboard();M.goto_url(M.lesson.program,M.lesson.lesson_plan_url)};function U(e){return function(t){if(t&&t.target)t=null;M.goto_url_name(e,{},t)}}M.edit_profile=U("profile");M.license_key_app=U("license");M.student_billing=U("billing");M.edit_password=U("edit_password");M.student_plans=U("student_plans");M.student_billing=U("student_billing");M.delete_account=U("delete_account");M.badges_page=U("badges_page");M.stats_page=U("stats_page");M.catalog_page=U("catalog_page");M.more_tests=U("more_tests");M.login_page=U("login_page");M.signup_page=U("signup_page");M.dashboard=function(){if(window.IS_LP_AUTHORING){H("/sportal/lpeditor/");return}if(M.profile.is_instructor){_.default.clearToken();_.default.clearProfile();window.location=w.default.get2dict().next||"/portal/";return}M.goto_url_name("dashboard")};M.not_found=function(){return M.goto_app("shared.not_found_app")};M.lesson_plan=function(){if(M.program)M.apply_env(M.program)};M.scoreboard=function(){if(M.current_app.app=="student.scoreboard"){M.refresh()}else if(M.program){M.goto_url(M.program.scoreboard)}};M.help_page=function(e){var t="/sportal/help.html";if(e&&e.article_id){t="/sportal/help/"+e.slug+".html"}if(e&&e.query)t+="?search="+e.query;M.goto_app("student.help_app",t,e)};M.logout=function(){M.events.fire_event("logout");_.default.logout()};M.has_scoreboard=function(){if(M.profile.block_share_grades)return false;return M.program&&M.get_teamprogram()&&M.get_teamprogram().scoreboard||M.current_app.app=="student.scoreboard"};M.is_leaderboard=function(){if(M.current_app.app=="student.scoreboard"){return M.current_app.share_grades=="top"}else return M.program&&M.get_teamprogram().share_grades=="top"};M.scoreboard=function(){if(M.current_app.app=="student.scoreboard"){M.refresh()}else if(M.program){M.goto_url(M.get_teamprogram().scoreboard)}};M.select_team=function(e){e=e||M.profile.teamsForProgram(M.program);(0,O.default)(e,function(e){M.team_for_program.set(M.program.resource_uri,e.resource_uri);if(!M.team||e.resource_uri!=M.team.resource_uri){M.team=e;M.refresh()}})};M.get_team=function(){return M.team};M.get_teamprogram=function(){return M.profile.teamprograms.find(function(e){return e.team==M.team.resource_uri&&e.program==M.program.resource_uri})};M.get_teamsettings=function(){return M.get_team().settings};M.show_modal=function(e){M.modals.push(e);M.events.fire_event("show_modal",e)};M.hide_modal=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=(0,u.default)(M.modals,function(t){return t.props.id==e})[0];if(!t&&n&&n.props.onClose){n.props.onClose()}M.events.fire_event("hide_modal",e)};window.addEventListener("keydown",function(e){switch(e.keyCode){case x.default.escape:if(M.modals.length){var t=M.modals[M.modals.length-1];if(t.props.esc_close)M.hide_modal(t.props.id)}break}}.bind(undefined));window.addEventListener("popstate",function(e){var t=e.state;if(t&&t.app)M.apply_env(t)});window.approuter=M;e.exports=M}).call(this,n(14))},210:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r,o;var i=n(1);var l=p(i);var s=n(21);var u=p(s);var c=n(2);var d=p(c);var f=n(20);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=(r=(0,f.translate)(["common"],{wait:true}),r(o=function(e){v(t,e);function t(){m(this,t);return h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}a(t,[{key:"render",value:function e(){var t=this.props,n=t.profile,a=t.t;var r=l.default.createElement("div",null);if(!n.is_anonymous){r=l.default.createElement("div",{className:"htext profile-name"},n.fname)}var o=(0,d.default)({hdrlt:true,compact:this.props.compact,game:this.props.display=="game",video:this.props.display=="video",videotyping:this.props.display=="videotyping"});return l.default.createElement("div",{className:o,style:this.props.style},l.default.createElement("div",{className:"pull-left",style:{whiteSpace:"nowrap"}},l.default.createElement("div",{tabIndex:"1",role:"menuitem","aria-label":u.default.lesson?a("exit lesson"):a("go to dashboard"),className:"menu-btn",onClick:u.default.exit_lesson,onKeyUp:function e(t){if(t.keyCode==13)u.default.exit_lesson()}},l.default.createElement("div",{className:"nav-icon"},l.default.createElement("span",null),l.default.createElement("span",null),l.default.createElement("span",null))),l.default.createElement("div",{className:"htext lesson-title"},this.props.name)),l.default.createElement("div",{className:"pull-right",tabIndex:-1},r),l.default.createElement("div",{className:"container",style:{textAlign:"right"}},l.default.createElement("span",{className:"header-options"},this.props.children)))}}]);return t}(l.default.Component))||o);t.default=g},214:function(e,t,n){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(1);var o=h(r);var i=n(138);var l=h(i);var s=n(123);var u=n(8);var c=h(u);var d=n(210);var f=h(d);var p=n(77);var m=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=function(e){y(t,e);function t(e){v(this,t);return g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}a(t,[{key:"render",value:function e(){var t=this.props;return o.default.createElement("div",null,o.default.createElement(f.default,{name:"",profile:profile}),o.default.createElement(l.default,{width:550},o.default.createElement("h6",null,t.title),o.default.createElement("h1",null,t.header),o.default.createElement("p",null,t.body),o.default.createElement("a",{onClick:t.button_callback,className:"btn btn-primary btn-large"},t.button_caption)))}}]);return t}(o.default.Component);function b(e,t,n,a,r){return o.default.createElement(m.default,{header:false,darkBody:true},o.default.createElement(_,{title:e,header:t,body:n,button_caption:a,button_callback:r}))}e.exports=b},241:function(e,t,n){var a=n(8);var r=o(a);function o(e){return e&&e.__esModule?e:{default:e}}r.default.easing["jswing"]=r.default.easing["swing"];r.default.extend(r.default.easing,{def:"easeOutQuad",swing:function e(t,n,a,o,i){return r.default.easing[r.default.easing.def](t,n,a,o,i)},easeInQuad:function e(t,n,a,r,o){return r*(n/=o)*n+a},easeOutQuad:function e(t,n,a,r,o){return-r*(n/=o)*(n-2)+a},easeInOutQuad:function e(t,n,a,r,o){if((n/=o/2)<1)return r/2*n*n+a;return-r/2*(--n*(n-2)-1)+a},easeInCubic:function e(t,n,a,r,o){return r*(n/=o)*n*n+a},easeOutCubic:function e(t,n,a,r,o){return r*((n=n/o-1)*n*n+1)+a},easeInOutCubic:function e(t,n,a,r,o){if((n/=o/2)<1)return r/2*n*n*n+a;return r/2*((n-=2)*n*n+2)+a},easeInQuart:function e(t,n,a,r,o){return r*(n/=o)*n*n*n+a},easeOutQuart:function e(t,n,a,r,o){return-r*((n=n/o-1)*n*n*n-1)+a},easeInOutQuart:function e(t,n,a,r,o){if((n/=o/2)<1)return r/2*n*n*n*n+a;return-r/2*((n-=2)*n*n*n-2)+a},easeInQuint:function e(t,n,a,r,o){return r*(n/=o)*n*n*n*n+a},easeOutQuint:function e(t,n,a,r,o){return r*((n=n/o-1)*n*n*n*n+1)+a},easeInOutQuint:function e(t,n,a,r,o){if((n/=o/2)<1)return r/2*n*n*n*n*n+a;return r/2*((n-=2)*n*n*n*n+2)+a},easeInSine:function e(t,n,a,r,o){return-r*Math.cos(n/o*(Math.PI/2))+r+a},easeOutSine:function e(t,n,a,r,o){return r*Math.sin(n/o*(Math.PI/2))+a},easeInOutSine:function e(t,n,a,r,o){return-r/2*(Math.cos(Math.PI*n/o)-1)+a},easeInExpo:function e(t,n,a,r,o){return n==0?a:r*Math.pow(2,10*(n/o-1))+a},easeOutExpo:function e(t,n,a,r,o){return n==o?a+r:r*(-Math.pow(2,-10*n/o)+1)+a},easeInOutExpo:function e(t,n,a,r,o){if(n==0)return a;if(n==o)return a+r;if((n/=o/2)<1)return r/2*Math.pow(2,10*(n-1))+a;return r/2*(-Math.pow(2,-10*--n)+2)+a},easeInCirc:function e(t,n,a,r,o){return-r*(Math.sqrt(1-(n/=o)*n)-1)+a},easeOutCirc:function e(t,n,a,r,o){return r*Math.sqrt(1-(n=n/o-1)*n)+a},easeInOutCirc:function e(t,n,a,r,o){if((n/=o/2)<1)return-r/2*(Math.sqrt(1-n*n)-1)+a;return r/2*(Math.sqrt(1-(n-=2)*n)+1)+a},easeInElastic:function e(t,n,a,r,o){var i=1.70158;var l=0;var s=r;if(n==0)return a;if((n/=o)==1)return a+r;if(!l)l=o*.3;if(s<Math.abs(r)){s=r;var i=l/4}else var i=l/(2*Math.PI)*Math.asin(r/s);return-(s*Math.pow(2,10*(n-=1))*Math.sin((n*o-i)*(2*Math.PI)/l))+a},easeOutElastic:function e(t,n,a,r,o){var i=1.70158;var l=0;var s=r;if(n==0)return a;if((n/=o)==1)return a+r;if(!l)l=o*.3;if(s<Math.abs(r)){s=r;var i=l/4}else var i=l/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*n)*Math.sin((n*o-i)*(2*Math.PI)/l)+r+a},easeInOutElastic:function e(t,n,a,r,o){var i=1.70158;var l=0;var s=r;if(n==0)return a;if((n/=o/2)==2)return a+r;if(!l)l=o*(.3*1.5);if(s<Math.abs(r)){s=r;var i=l/4}else var i=l/(2*Math.PI)*Math.asin(r/s);if(n<1)return-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*o-i)*(2*Math.PI)/l))+a;return s*Math.pow(2,-10*(n-=1))*Math.sin((n*o-i)*(2*Math.PI)/l)*.5+r+a},easeInBack:function e(t,n,a,r,o,i){if(i==undefined)i=1.70158;return r*(n/=o)*n*((i+1)*n-i)+a},easeOutBack:function e(t,n,a,r,o,i){if(i==undefined)i=1.70158;return r*((n=n/o-1)*n*((i+1)*n+i)+1)+a},easeInOutBack:function e(t,n,a,r,o,i){if(i==undefined)i=1.70158;if((n/=o/2)<1)return r/2*(n*n*(((i*=1.525)+1)*n-i))+a;return r/2*((n-=2)*n*(((i*=1.525)+1)*n+i)+2)+a},easeInBounce:function e(t,n,a,o,i){return o-r.default.easing.easeOutBounce(t,i-n,0,o,i)+a},easeOutBounce:function e(t,n,a,r,o){if((n/=o)<1/2.75){return r*(7.5625*n*n)+a}else if(n<2/2.75){return r*(7.5625*(n-=1.5/2.75)*n+.75)+a}else if(n<2.5/2.75){return r*(7.5625*(n-=2.25/2.75)*n+.9375)+a}else{return r*(7.5625*(n-=2.625/2.75)*n+.984375)+a}},easeInOutBounce:function e(t,n,a,o,i){if(n<i/2)return r.default.easing.easeInBounce(t,n*2,0,o,i)*.5+a;return r.default.easing.easeOutBounce(t,n*2-i,0,o,i)*.5+o*.5+a}});r.default.extend(r.default.easing,{easeIn:function e(t,n,a,o,i){return r.default.easing.easeInQuad(t,n,a,o,i)},easeOut:function e(t,n,a,o,i){return r.default.easing.easeOutQuad(t,n,a,o,i)},easeInOut:function e(t,n,a,o,i){return r.default.easing.easeInOutQuad(t,n,a,o,i)},expoin:function e(t,n,a,o,i){return r.default.easing.easeInExpo(t,n,a,o,i)},expoout:function e(t,n,a,o,i){return r.default.easing.easeOutExpo(t,n,a,o,i)},expoinout:function e(t,n,a,o,i){return r.default.easing.easeInOutExpo(t,n,a,o,i)},bouncein:function e(t,n,a,o,i){return r.default.easing.easeInBounce(t,n,a,o,i)},bounceout:function e(t,n,a,o,i){return r.default.easing.easeOutBounce(t,n,a,o,i)},bounceinout:function e(t,n,a,o,i){return r.default.easing.easeInOutBounce(t,n,a,o,i)},elasin:function e(t,n,a,o,i){return r.default.easing.easeInElastic(t,n,a,o,i)},elasout:function e(t,n,a,o,i){return r.default.easing.easeOutElastic(t,n,a,o,i)},elasinout:function e(t,n,a,o,i){return r.default.easing.easeInOutElastic(t,n,a,o,i)},backin:function e(t,n,a,o,i){return r.default.easing.easeInBack(t,n,a,o,i)},backout:function e(t,n,a,o,i){return r.default.easing.easeOutBack(t,n,a,o,i)},backinout:function e(t,n,a,o,i){return r.default.easing.easeInOutBack(t,n,a,o,i)}})},253:function(e,t,n){var a=n(366);var r=u(a);var o=n(17);var i=u(o);var l=n(133);var s=n(255);function u(e){return e&&e.__esModule?e:{default:e}}window.Raven=r.default;r.default.config(s.sentryDSN,{logger:"js.student",debug:!window.IS_PRODUCTION,environment:window.IS_PRODUCTION?"production":"development",serverName:document.location.host.split(".")[0]=="www"?"tp":"tpc",release:l.version,whitelistUrls:[/typingclub\.com/,/tpclub\.com/],captureUnhandledRejections:true,ignoreErrors:[/^event is not defined$/,/^Unexpected token <$/,/^Unexpected identifier$/,/\.data\.indexOf is not a function$/,/^Blocked a frame with origin/,/ResizeObserver loop limit exceeded/,/The play\(\) request was interrupted by a call to pause\(\)/,/^undefined$/,/player\.es/],breadcrumbCallback:function e(t){if(t.category==="xhr"){if(/^(https?:)?\/\//.test(t.data.url))return false}return t}});if(window.IS_PRODUCTION){r.default.install()}if(top&&self!=top){r.default.captureBreadcrumb({category:"log",level:"info",message:"in iframe: "+(document.referrer||"no referrer")})}if(!window.IS_PRODUCTION){window.addEventListener("unhandledrejection",function(e){e.preventDefault();console.error("unhandled rejection",e)})}function c(e,t){function n(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++){a[o]=arguments[o]}var i=t.apply(undefined,a);if(i instanceof Promise){return i.catch(function(t){if(t.status==0&&t.statusText=="error"){console.error("failed "+e+" promise",t,"args",a);return}if(window.settings&&window.settings.is_production)r.default.captureException("failed "+e+" promise: "+t.statusText+" status: "+t.status);else console.error("failed "+e+" promise",t,"args",a)})}else{return i}}return n}i.default.registerProfileChangeHandler(function(e){r.default.setUserContext({id:e.id});r.default.setTagsContext({account:e.account_id,is_basic:e.is_basic});if(!e.is_basic){r.default.setDSN(s.sentryDSN_NOADS)}else{r.default.uninstall()}});e.exports={captureException:r.default.captureException,captureMessage:r.default.captureMessage,wrap:r.default.wrap,context:r.default.context,log_catch_promise:c}},255:function(e){e.exports={sentryDSN:"https://395fecf8768243eead8a6a93295f3b11@sentry.io/50133",sentryDSN_NOADS:"https://a069cd499c504c3084b7c8853b98e752@sentry.io/1275414"}},256:function(e,t,n){var a=n(1);var r=l(a);var o=n(18);var i=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=["#AD1457","#F4511E","#E4C441","#0B8043","#3F51B5","#8E24AA","#D81B60","#EF6C00","#C0CA33","#009688","#7986CB","#795548","#D50000","#F09300","#7CB342","#039BE5","#B39DDB","#616161","#E67C73","#F6BF26","#33B679","#4285F4","#9E69AF","#A79B8E","#1c3aa9"];var n=e.split("").map(function(e){return e.charCodeAt()}).reduce(function(e,t){return e+t},0);return t[n%t.length]}function u(e,t){e=e.sort(function(e,t){return e.name<t.name?-1:1});var n=approuter.profile.t;approuter.show_modal(r.default.createElement(i.default,{id:"select-team-modal",width:400,show_x:false,close_outside:false,esc_close:false,padding:0},r.default.createElement("h3",{style:{margin:20}},n("Select your class")),r.default.createElement("hr",{style:{marginBottom:0}}),e.map(function(e){return r.default.createElement("a",{className:"list-item-select",key:"team-selec-"+e.id,onClick:function n(){t(e);approuter.hide_modal("select-team-modal")}},r.default.createElement("b",{style:{backgroundColor:s(e.name)}},e.name[0].toUpperCase()),e.name,r.default.createElement("br",null),r.default.createElement("small",null,e.instructors.join(", ")))})))}e.exports=u},261:function(e,t,n){var a=n(214);var r=u(a);var o=n(21);var i=n(150);var l=n(266);var s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o);var l=i.value}catch(e){n(e);return}if(i.done){e(l)}else{return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)})}}return a("next")})}}var d=function e(t){var n=t.is_test?"This test is no longer available to you.":"Your teacher has not assigned this lesson to you yet. Consider practicing your previous lessons a bit more.";return(0,r.default)(t.name,"Lesson Locked",n,"Go Back",o.approuter.exit_lesson)};var f=function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.t.bind(null,469,7));case 2:a=r.sent;return r.abrupt("return",a.default[t]);case 4:case"end":return r.stop()}}},e,undefined)}));return function t(n){return e.apply(this,arguments)}}();var p=function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.t.bind(null,470,7));case 2:a=r.sent;return r.abrupt("return",a.default[t]);case 4:case"end":return r.stop()}}},e,undefined)}));return function t(n){return e.apply(this,arguments)}}();var m=function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return Promise.all([n.e(0),n.e(5),n.e(1),n.e(4)]).then(n.t.bind(null,471,7));case 2:a=r.sent;return r.abrupt("return",a.default[t]);case 4:case"end":return r.stop()}}},e,undefined)}));return function t(n){return e.apply(this,arguments)}}();var h={"typing.classic_typing_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return p("classic_typing_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.videotyping_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return p("videotyping_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.instruction":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return p("instruction");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.games.BalloonValley":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return m("BalloonValley");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.games.MonsterAttack":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return m("MonsterAttack");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.games.TempleBash":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return m("TempleBash");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.games.FloatingBubbles":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return m("FloatingBubbles");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"typing.games.AppleThieves":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return m("AppleThieves");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"shared.result_page":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return p("result_page");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"junior.result_page":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return p("junior_result_page");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"shared.login_app":{app:i.login_app},"shared.signup_app":{app:i.signup_app},"shared.school_login_app":{app:i.school_login_app},"shared.school_signup_app":{app:i.school_signup_app},"shared.not_found_app":{app:s.default},"student.dashboard_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("dashboard_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.more_tests":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("more_tests");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.lessonplan":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("lessonplan_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.testplan":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("testplan_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.videoplayer":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("video_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.changepassword_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("changepassword_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.profiledetails_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("profiledetails_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.billing_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("billing_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.license_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("license_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.plans_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("plans_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.profile.deleteaccount_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("deleteaccount_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.scoreboard":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("scoreboard_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.stats_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("stats_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.badge_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("badge_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.catalog_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("catalog_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.placementtest_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("placementtest_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.help_app":function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return f("help_app");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}},e,undefined)}));return function t(){return e.apply(this,arguments)}}(),"student.lesson_locked":{app:d}};var v=function(){var e=c(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function e(a){while(1){switch(a.prev=a.next){case 0:n=h[t];if(n){a.next=3;break}return a.abrupt("return");case 3:if(!(typeof n==="function")){a.next=9;break}a.next=6;return n();case 6:a.t0=a.sent;a.next=10;break;case 9:a.t0=n.app;case 10:return a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}},e,undefined)}));return function t(n){return e.apply(this,arguments)}}();var g=[{name:"dashboard",path:"/sportal/",app:"student.dashboard_app"},{name:"edit_password",path:"/sportal/change_password.html",app:"student.profile.changepassword_app"},{name:"profile",path:"/sportal/profile.html",app:"student.profile.profiledetails_app"},{name:"student_plans",path:"/sportal/plans.html",app:"student.profile.plans_app"},{name:"student_billing",path:"/sportal/billing.html",app:"student.profile.billing_app"},{name:"delete_account",path:"/sportal/delete_account.html",app:"student.profile.deleteaccount_app"},{name:"license",path:"/sportal/license/",app:"student.profile.license_app"},{name:"badges_page",path:"/sportal/badges.html",app:"student.badge_app"},{name:"stats_page",path:"/sportal/stats.html",app:"student.stats_app"},{name:"catalog_page",path:"/sportal/catalog.html",app:"student.catalog_app"},{name:"more_tests",path:"/sportal/more_tests.html",app:"student.more_tests"},{name:"help",path:"/sportal/help.html",app:"student.help_app"},{name:"test",path:"/sportal/test-:test_id.play",api:"/api/v:version/test/:test_id/"},{name:"lesson",path:"/sportal/program-:program_id(\\d+)/:lesson_id(\\d+).play",api:"/api/v:version/lesson/:lesson_id/"},{name:"results",path:"/sportal/push_results_display/:attempt_id/",api:"/api/v:version/attempt/:attempt_id/"},{name:"lessonplan",path:"/sportal/program-:program_id(\\d+).game",api:"/api/v:version/program/:program_id/"},{name:"placement",path:"/sportal/program-:program_id.placement",api:"/api/v:version/placementtest/:program_id/"},{name:"scoreboard",path:"/sportal/teamprogram-:teamprogram_id.scoreboard",api:"/api/v:version/scoreboard/:teamprogram_id/"}];if(window.is_tp){g=g.concat([{name:"login_page",path:"/login.html",app:"shared.login_app"},{name:"signup_page",path:"/signup.html",app:"shared.signup_app"}])}else{g=g.concat([{name:"login_page",path:"/",app:"shared.school_login_app"},{name:"signup_page",path:"/signup/:class_code",app:"shared.school_signup_app"}])}e.exports={resolveAppRoute:v,url_routes:g}},262:function(e,t,n){var a=n(263);var r=u(a);var o=n(12);var i=u(o);var l=n(8);var s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,r){this.id=n;this.signs=e;this.color=a||"";this.facts=t.facts;this.render_props=t.render_props;this.focused=false;this.i18n={t:r.t};this.get_typable=function(){return t};this.create_char_objs();this.initial_dom_setup()}c.prototype.focus=function(){this.focused=true;(0,s.default)(this.dom).addClass("_fcs");if(this.line&&this.line!=this.get_typable().focused_line)this.line.focus();this.meta_node.innerHTML=""};c.prototype.blur=function(){this.focused=false;(0,s.default)(this.dom).removeClass("_fcs");switch(this.render_props.on_token_blur){case"boxed_token_blur":var e=this.chars[0];if(e.char_dict.dirty&&e.char_dict.valid){this.green_check()}break;case"annotate_speed":this.speed_feedback();break}};c.prototype.is_done=function(){var e=this.chars;for(var t=0,n=e.length;t<n;t++){if(!e[t].char_dict.dirty)return false}return true};c.prototype.next=function(){return this.get_typable().tokens[this.id+1]};c.prototype.prev=function(){if(!this.id)return null;return this.get_typable().tokens[this.id-1]};function d(e,t){if(!t||t==5)return null;var n={a:["a","ā","á","ă","à"],o:["o","ō","ó","ŏ","ò"],e:["e","ē","é","ĕ","è"],i:["i","ī","í","ĭ","ì"],u:["u","ū","ú","ŭ","ù"]};var a=e.map(function(e){return e.chr});var r=-1;for(var o in e){if("aoe".indexOf(a[o])>=0){a[o]=n[a[o]][t];return a.join("")}if("ui".indexOf(a[o])>=0)r=o}if(r>=0)a[r]=n[a[r]][t];return a.join("")}c.prototype.create_char_objs=function(){var e=this.chars=[];var t=this.signs;var n=0;for(var a=0,o=this.signs.length;a<o;a++){var i=t[a].t;var l=t[a].tone;var s=null;if(l&&"1234".indexOf(l)>=0)s=d(t[a].t,l);for(var u=0,c=i.length;u<c;u++){var f=new r.default(i[u],this,u,s&&s[u]);e.push(f);this.get_typable().chars.push(f)}}};c.prototype.initial_dom_setup=function(){var e=this.meta_node=document.createElement("SPAN");e.className="_toknmeta";var t=document.createElement("SPAN");var n=document.createElement("SPAN");t.appendChild(n);t.appendChild(e);this.dom=t;this.clean_render()};var f={"&":"&amp;",">":"&gt;","<":"&lt;","\n":'<span class="_enter">&nbsp;</span><br />'," ":"&nbsp;<i> </i>","\t":'<span class="_tab">&nbsp;&nbsp;&nbsp;&nbsp;</span>'};function p(e){if(e in f)return f[e];return e}c.prototype.render=function(){if(this.render_props.one_span_per_char)this.update_token_class();else this.clean_render()};c.prototype.update_token_class=function(){var e=this.chars[0];var t="token_unit "+this.color+" ";if(!e.char_dict.dirty)t+="_clr";else t+=e.char_dict.valid?"_vld":"_err";this.dom.lastChild.className=t};c.prototype.clean_render=function(){var e=this;var t=this.render_props.one_span_per_char;var n=this.render_props.logographic;var a=this.chars,r=this.signs;var o=document.createElement("SPAN");o.appendChild(this.meta_node);var i=function t(n,a){var r=document.createElement("SPAN");if(n.length==1){r.appendChild(document.createTextNode(n))}else{r.innerHTML=n}r.className="token_unit "+e.color+" "+a;return r};var l=0;var u=false,c=false;var d=null,f=null,m=true;for(var h=0,v=r.length;h<v;h++){var g=r[h];var y=true,_=false;var b="",w=[],E=null;for(var k=0,x=g.t.length;k<x;k++){var N=a[l++];var S=N.char_dict;if(S.chr=="\n")u=true;if(!S.dirty)y=false;if(!S.valid)_=true;var C;if(S.valid&&!S.real_valid)C="_ervld";else C=!S.dirty?"_clr":S.valid?"_vld":"_err";var O=N.display_chr||N.chr;if(!E){b=p(O);E=C}else if(E=="_clr"&&!t){b+=p(O)}else{if(b){w.push(i(b,E));b="";E=C}b+=p(O)}}if(b){w.push(i(b,E))}if(n){d=document.createElement("SPAN");d.className="lgram"+(y?_?" _err_gram":" _vld_gram":m?" _fcs_gram":"");m=y;var T=true;var I=false;var P=undefined;try{for(var R=w[Symbol.iterator](),L;!(T=(L=R.next()).done);T=true){var A=L.value;d.appendChild(A)}}catch(e){I=true;P=e}finally{try{if(!T&&R.return){R.return()}}finally{if(I){throw P}}}f=document.createElement("DIV");f.innerHTML=g.g;d.appendChild(f);o.appendChild(d)}else{var M=true;var j=false;var G=undefined;try{for(var Y=w[Symbol.iterator](),H;!(M=(H=Y.next()).done);M=true){var D=H.value;o.appendChild(D)}}catch(e){j=true;G=e}finally{try{if(!M&&Y.return){Y.return()}}finally{if(j){throw G}}}}}if(u&&n)o.appendChild(document.createElement("BR"));o.className="token"+(this.focused?" _fcs":"")+(n?" _logo":"");(0,s.default)(this.dom).replaceWith(o);this.dom=o};c.prototype.set_char_positions=function(e,t,n){var a=this.top=this.dom.offsetTop-e;var r=this.left=this.dom.offsetLeft-t;var o;this.first_word_in_line=r==0;var i=this.chars;var l=0;for(var s=0,u=i.length;s<u;s++){var c=i[s];var d=n[c.chr];o=r+l;c.setPosition(a,o,l,d);l+=d}};c.prototype.speed_feedback=function(){var e=0;var t=0;var n=this.get_typable();for(var a=0,r=this.chars.length;a<r;a++){var o=this.chars[a];if(o.chr.match("[., ]"))continue;if(o.char_dict.dur){if(o.char_dict.valid)e++;t+=o.char_dict.dur}}if(e>3){var l=function e(){return d.clone()};var u=i.default.calc_wpm(e,t);var c=(0,s.default)("<span />").addClass("meta-word").html(u+" <sup>"+this.i18n.t("wpm")+"</sup> ");var d=(0,s.default)('<img src="'+STATIC_URL+'engine/img/star.png" width="10px" />');if(e>4){if(30<=u&&u<40)c.append((0,s.default)("<b />").html(this.i18n.t("Good")));else if(40<=u&&u<50)c.append((0,s.default)("<b />").html(this.i18n.t("Nice!")));else if(50<=u&&u<60)c.append((0,s.default)("<b />").html(this.i18n.t("Great!")));else if(60<=u&&u<70)c.append((0,s.default)("<b />").html(this.i18n.t("Great!")).append(l()));else if(70<=u&&u<80)c.append((0,s.default)("<b />").html(this.i18n.t("WOW")).append(l()));else if(80<=u&&u<100)c.append((0,s.default)("<b />").html(this.i18n.t("WOW!")).append(l(),l()));if(u>=100)c.append((0,s.default)("<b />").html(this.i18n.t("WOW!")).append(l(),l(),l()))}(0,s.default)(this.meta_node).prepend(c.fadeIn("slow"))}};c.prototype.green_check=function(){(0,s.default)(this.meta_node).prepend((0,s.default)('<div style="text-align:center;color:#a9d000;"><i style="position:absolute;" class="icon icon-check gcheck"></i></div>'))};e.exports=c},263:function(e,t,n){var a=n(8);var r=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,a){var r=t.get_typable();this.progress=parseInt(100*this.char_index/parseFloat(r.text_length));this.id=n;this.char_dict=e;this.chr=e.chr;this.display_chr=a;this.dirty=false;this.facts=t.facts;this.stats={valid:false,dur:0,real_valid:true};this.on_char_error=t.render_props.on_char_error;this.get_token=function(){return t};this.get_typable=function(){return r}}i.prototype.next=function(){var e=this.get_token();if(this.id+1==e.length){var t=e.next();if(!t)return null;else return e.next().chars[0]}else return e.chars[this.id+1]};i.prototype.prev=function(){var e=this.get_token();if(this.id==0){var t=e.prev();if(!t)return false;return t.chars[t.length-1]}else return e.chars[this.id-1]};i.prototype.setPosition=function(e,t,n,a){this.left=t;this.top=e;this.width=a;this.token_left=n};i.prototype.focus=function(e){var t=this.get_typable();var n=t.facts;var a=this.left,r=this.width,o=this.top+n.char_margin_top;var i=t.render_props.cursor?t.render_props.cursor.expandToMargin:false;if(!i){r=this.width-n.char_margin_left-n.char_margin_right;a=this.left+n.char_margin_left}e.css({marginTop:o,marginLeft:a,width:r})};i.prototype.keydown=function(e){var t=this.get_typable();var n=this.char_dict.valid;if(!n){switch(this.on_char_error){case"red_underneath":this.red_underneath(e);break;case"overlay_fade":default:this.overlay_fade(e)}}};i.prototype.overlay_fade=function(e){var t=this.get_token();var n=t.meta_node;var a=document.createElement("span");a.className="_errchr token_unit";a.innerHTML=e;var o=t.get_typable().cursor[0];a.style.left=this.token_left+"px";n.appendChild(a);(0,r.default)(a).delay(0).fadeOut(1e3);setTimeout(function(){(0,r.default)(a).remove()},1e3)};i.prototype.red_underneath=function(e){var t=this.get_token();var n=t.meta_node;var a=document.createElement("span");a.className="_errchr2 token_unit";a.innerHTML=e;var o=t.get_typable().cursor[0];a.style.left=this.token_left+"px";a.style.top=t.get_typable().facts.chr_h+"px";(0,r.default)(n).find("._errchr2").remove();n.appendChild(a);setTimeout(function(){(0,r.default)(a).delay(0).fadeOut(500);setTimeout(function(){(0,r.default)(a).remove()},500)},600)};e.exports=i},264:function(e,t,n){var a=n(378);var r=l(a);var o=n(8);var i=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){this.tokens=[];this.index=t;this.dom=(0,i.default)("<span />").addClass("line")[0];this.is_focused=false;this.get_typable=function(){return e};e.lines.push(this)}s.prototype.add_token=function(e){this.tokens.push(e);e.line=this};s.prototype.mount=function(){for(var e=0,t=this.tokens.length;e<t;e++){this.dom.appendChild(this.tokens[e].dom)}this.get_typable().arena.append(this.dom)};s.prototype.focus=function(){var e=this.get_typable();this.is_focused=true;(0,i.default)(this.dom).addClass("active").removeClass("done").prevAll().addClass("done");if(e.focused_line)e.focused_line.blur();e.focused_line=this};s.prototype.blur=function(){this.is_focused=false;this.is_done=(0,r.default)(this.tokens.map(function(e){return e.is_done()}));(0,i.default)(this.dom).removeClass("active")};e.exports=s},265:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r,o;var i=n(1);var l=g(i);var s=n(21);var u=g(s);var c=n(20);var d=n(17);var f=g(d);var p=n(12);var m=g(p);var h=n(8);var v=g(h);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w="corp2/lessonplan-icons/default.png";var E=(r=(0,c.translate)(["common"],{wait:true}),r(o=function(e){b(t,e);function t(e){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={active_dropdown:null};u.default.events.on("unload",function(){n.refs.navbarCollapseMain&&n.refs.navbarCollapseMain.classList.remove("in")});return n}a(t,[{key:"set_language",value:function e(t){f.default.updateProfile({language:t},function(e){document.location.reload()}.bind(this))}},{key:"toggle_active_dropdown",value:function e(t,n){t.preventDefault();t.stopPropagation();if(this.state.active_dropdown==null){var a=function(e){window.removeEventListener("click",a);if(this.state.active_dropdown)this.setState({active_dropdown:null})}.bind(this);window.addEventListener("click",a)}if(n==this.state.active_dropdown)n=null;this.setState({active_dropdown:n})}},{key:"componentWillUnmount",value:function e(){this.state.active_dropdown=null}},{key:"render",value:function e(){var t=this;var n=this.props.t;var a=u.default.profile;var r=u.default.profile.is_anonymous,o=a.fname?a.fname:n("Me");var i=m.default.LANGUAGE_CHOICES.length;var s=a.programs.length;var c=l.default.createElement("li",{className:"dropdown"},l.default.createElement("a",{href:"#",onClick:function e(n){return t.toggle_active_dropdown(n,"languages")},"aria-label":n("language menu. {{lang}} is selected",{lang:m.default.get_language_name(a.language)}),className:"dropdown-toggle",tabIndex:s+9,"data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},l.default.createElement("div",{className:"flag-box"},l.default.createElement("i",{className:"flag "+m.default.get_language_country(a.language)})),l.default.createElement("span",{className:"caret"})),this.state.active_dropdown=="languages"?l.default.createElement("ul",{className:"dropdown-menu"},m.default.LANGUAGE_CHOICES.map(function(e,t){var n=this;return l.default.createElement("li",{key:e[0]},l.default.createElement("a",{href:"#","aria-label":e[1],tabIndex:s+10+t,style:{padding:"8px 10px"},onClick:function t(){n.set_language(e[0])}},l.default.createElement("div",{className:"flag-box"},l.default.createElement("i",{className:"flag "+e[2]}))," ",e[1]))}.bind(this))):null);return l.default.createElement("div",{className:"edheader f32"},l.default.createElement("a",{className:"jumpNav",onKeyUp:this.OnFocus.bind(this),role:"navigation",tabIndex:"1","aria-label":"to Jump to Main Content, press Enter key","aria-labelledby":"article"},"Jump to Main Content"),l.default.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top app-navbar",role:"navigation"},l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"navbar-header"},l.default.createElement("button",{type:"button",className:"navbar-toggle collapsed",onClick:function e(){return t.refs.navbarCollapseMain.classList.toggle("in")}},l.default.createElement("span",{className:"sr-only"},"Toggle navigation"),l.default.createElement("span",{className:"icon-bar"}),l.default.createElement("span",{className:"icon-bar"}),l.default.createElement("span",{className:"icon-bar"})),l.default.createElement("a",{className:"navbar-brand",onClick:u.default.dashboard,tabIndex:"2"},l.default.createElement("div",{className:"edlogo"},"TypingClub"))),l.default.createElement("div",{ref:"navbarCollapseMain",className:"navbar-collapse collapse",onKeyUp:this.OnEsc.bind(this)},l.default.createElement("ul",{className:"nav navbar-nav hidden-xs",role:"menubar","aria-label":"Main Menu"},l.default.createElement("li",null,l.default.createElement("a",{tabIndex:"2",role:"menuitem",onKeyUp:function(e){if(e.keyCode!=13)return;u.default.dashboard()}.bind(this),onClick:u.default.dashboard},n("Home"))),l.default.createElement("li",null,l.default.createElement("a",{tabIndex:"3",role:"menuitem",onKeyUp:function(e){if(e.keyCode!=13)return;u.default.stats_page()}.bind(this),onClick:u.default.stats_page},n("Stats"))),l.default.createElement("li",null,l.default.createElement("a",{tabIndex:"4",role:"menuitem",onKeyUp:function(e){if(e.keyCode!=13)return;this.badges()}.bind(this),onClick:this.badges.bind(this)},n("Badges"))),l.default.createElement("li",{className:"dropdown",style:{maxWidth:300}},l.default.createElement("a",{onClick:function e(n){return t.toggle_active_dropdown(n,"lesson-plan-list")},href:"#",className:"dropdown-toggle",tabIndex:"5","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},u.default.program&&u.default.program.name||n("Lesson Plans")," ",l.default.createElement("span",{className:"caret"})),this.state.active_dropdown=="lesson-plan-list"?l.default.createElement("ul",{className:"dropdown-menu lesson-plan-list"},a.lessonplans().map(function(e,a){return l.default.createElement("li",{className:u.default.program&&u.default.program.resource_uri==e.resource_uri?"active":"",key:e.resource_uri,"aria-label":n("Lesson {{name}}",{name:e.name})},l.default.createElement("a",{tabIndex:6+a,href:"#",onKeyUp:function(t){if(t.keyCode!=13)return;u.default.goto_url(e.resource_uri)}.bind(t),onClick:function t(){return u.default.goto_url(e.resource_uri)}},l.default.createElement("img",{className:"nav-dropdown-thumbnail",src:STATIC_URL+(e.image||w)}),l.default.createElement("div",{className:"nav-dropdown-content"},l.default.createElement("div",null,e.name))))}),window.is_tp?l.default.createElement("li",{"aria-label":n("More lesson plans")},l.default.createElement("a",{tabIndex:6+a.programs.length,onClick:u.default.catalog_page},l.default.createElement("div",{className:"nav-dropdown-content"},l.default.createElement("i",{className:"icon icon-plus"})," ",n("More Lesson Plans")))):null):null),u.default.has_scoreboard()&&l.default.createElement("li",null,l.default.createElement("a",{tabIndex:s+6,role:"menuitem",onKeyUp:function e(t){if(t.keyCode!=13)return;u.default.scoreboard()},onClick:u.default.scoreboard},u.default.is_leaderboard()?n("Leaderboard"):n("Scoreboard")))),r?l.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu"},c,l.default.createElement("li",null,l.default.createElement("a",{tabIndex:s+7,role:"menuitem",onClick:u.default.signup_page},n("Save Progress"))),l.default.createElement("li",null,l.default.createElement("a",{tabIndex:s+8,role:"menuitem",onClick:u.default.login_page},n("Login")))):l.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu","aria-haspopup":"true"},c,l.default.createElement("li",{className:"dropdown"},l.default.createElement("a",{href:"#",onClick:function e(n){return t.toggle_active_dropdown(n,"user-settings")},tabIndex:i+s+11+1,role:"menuitem",className:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o," ",l.default.createElement("span",{className:"caret"})),this.state.active_dropdown=="user-settings"?l.default.createElement("ul",{className:"dropdown-menu"},l.default.createElement("li",null,l.default.createElement("a",{href:"#",tabIndex:i+s+11+2,role:"menuitem",onClick:this.profileDetails.bind(this)},n("Profile"))),a.can_change_password&&l.default.createElement("li",null,l.default.createElement("a",{href:"#",tabIndex:i+s+11+3,onClick:this.changePassword.bind(this)},n("Change Password"))),window.is_tp&&l.default.createElement("li",{onClick:u.default.student_billing},l.default.createElement("a",{tabIndex:i+s+11+4},n("Billing"))),l.default.createElement("li",null,l.default.createElement("a",{href:"#",tabIndex:i+s+11+5,role:"menuitem",onClick:function e(){return u.default.help_page()}},n("Help"))),l.default.createElement("li",null,l.default.createElement("a",{href:"#",tabIndex:i+s+11+6,role:"menuitem",onClick:u.default.logout},n("Logout")))):null))))))}},{key:"OnEsc",value:function e(t){if(t.keyCode==27&&this.state.active_dropdown){this.setState({active_dropdown:null});return}}},{key:"OnFocus",value:function e(t){if(t.keyCode!=13)return;var n=document.getElementById("article");if(n){n.focus();n.tabIndex=100}else{(0,v.default)("[tabIndex=100]").focus()}document.getElementsByClassName("jumpNav")[0].tabIndex=1}},{key:"badges",value:function e(){u.default.badges_page()}},{key:"profileDetails",value:function e(){u.default.edit_profile()}},{key:"changePassword",value:function e(){u.default.edit_password()}}]);return t}(l.default.Component))||o);t.default=E},266:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=function(){c.default.load({google:{families:["Courgette::latin"]}});return r.default.createElement(s.default,{style:"NOT_FOUND_PAGE",header:null,title:"Page not found"},r.default.createElement("i",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#daecee"}}),r.default.createElement("div",{id:"container"},r.default.createElement("img",{src:STATIC_URL+"corp2/img/cloud.png",id:"cloud",alt:""}),r.default.createElement("img",{src:STATIC_URL+"corp2/img/ground.png",id:"ground",alt:""}),r.default.createElement("img",{src:STATIC_URL+"corp2/img/buddy.png",id:"buddy",alt:""}),r.default.createElement("img",{src:STATIC_URL+"corp2/img/rain.png",id:"rain",alt:""}),r.default.createElement("div",{id:"ground_box",style:{height:window.outerHeight-490}}),r.default.createElement("div",{id:"text_cont"},r.default.createElement("p",{className:"head",style:{fontSize:"1.7em",margin:"20px 0 10px"}},"404. Page Not Found"),r.default.createElement("p",{className:"head",style:{marginBottom:18}},"This page does not exist. That's all we know."),r.default.createElement("p",{className:"cont"},"Consider going back to the",r.default.createElement("a",{href:"javascript:history.back()",className:"go_back"}," previous page")," or ",r.default.createElement("a",{href:"http://www.typingclub.com"},"TypingClub's home page")))))};var a=n(1);var r=d(a);var o=n(138);var i=d(o);var l=n(77);var s=d(l);var u=n(151);var c=d(u);function d(e){return e&&e.__esModule?e:{default:e}}},267:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(1);var o=s(r);var i=n(28);var l=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(e){d(t,e);function t(){var e;var n,a,r;u(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={selectedIndex:-1},n),c(a,r)}a(t,[{key:"render",value:function e(){var t=this;var n=this.props,a=n.lessons,r=n.changes;var i=this.state.selectedIndex;var s=new Map(a.map(function(e){return[e.id,e]}));var u=a.map(function(e){return e.id});var c=new Set(u);var d=r.map(function(e){return typeof e=="number"?e:e.lesson&&e.lesson.id});var f=new Set(d);var p=new Set(u.filter(function(e){return!f.has(e)}));var m=[];var h=0,v=0,g=r.length;var y=new Set;var _=1;var b={};var w=true;var E=false;var k=undefined;try{for(var x=a[Symbol.iterator](),N;!(w=(N=x.next()).done);w=true){var S=N.value;if(S.lesson_type!=1&&!S.is_hidden)b[S.id]=_++}}catch(e){E=true;k=e}finally{try{if(!w&&x.return){x.return()}}finally{if(E){throw k}}}_=1;var C;while(v<g){while(h<g&&p.has(u[h])){m.push({s:"d",l:a[h]});h++}if(!d[v]){C={s:"n",l:r[v].ref_lesson}}else{var O=r[v];if(typeof O=="number"){var T=s.get(O);C={s:!b[T.id]||_==b[T.id]?"s":"m",l:T,i:b[T.id]}}else{C={s:"c",l:r[v].ref_lesson,c:r[v].changes}}y.add(d[v])}while(h<g&&y.has(u[h])){h++}if(C.l.lesson_type!=1&&!C.l.is_hidden)_++;m.push(C);v++}var I={"typing text1":"Typing Text","typing text2":"Typing Text 2","typing text3":"Typing Text 3","typing text4":"Typing Text 4","typing text5":"Typing Text 5",key:"Icon"};var P=m.filter(function(e){return e.s!="s"}).length>0;_=1;var R=-1;var L=function e(t){var n=typeof t=="string"?t:t.join(" ");n=I[n]||n;n=n.replace(/_/g," ");return n.split(" ").map(function(e){return e[0].toLocaleUpperCase()+e.substr(1)}).join(" ")};var A=function e(t,n){if(!n)return"None";if(t=="key")return o.default.createElement("div",{style:{marginLeft:"auto"},className:n});else return n.toString()};return o.default.createElement("div",{className:"compare-programs-container"},P?m.map(function(e,n){var a=e.l;var r={s:"",n:"new",d:"deleted",c:"changed",m:"moved"};var s=i==n;if(a.lesson_type==1){R=-1;return o.default.createElement("h4",{key:n},a.name)}else{R++;return o.default.createElement("div",{key:n,onClick:function e(){return t.setState({selectedIndex:s?-1:n})},className:"lesson-item "+r[e.s]+(s?" selected":"")},o.default.createElement("div",{className:"lsn-num",style:{marginTop:0}},e.s=="m"&&o.default.createElement("span",{style:{display:"inline-block",left:-6,color:"#aaa"}},b[a.id]||"-"," ",o.default.createElement("div",{style:{verticalAlign:"bottom",margin:"0 -6px"},className:"material-icons"},"arrow_right_alt"))," ",a.is_hidden||e.s=="d"?"-":_++),o.default.createElement("div",{className:"lsn-name"},a.name),o.default.createElement("div",{className:"lsn-icon "+l.default.getIconClass(a.key)}),e.c&&o.default.createElement("div",{className:"changes",style:{left:R%6<3?105:-330}},e.c.map(function(e,t){return o.default.createElement("div",{key:t},o.default.createElement("h5",null,L(e.what)),o.default.createElement("div",{className:"material-icons"},"arrow_right_alt"),o.default.createElement("div",{className:"old"},A(e.what,e.old)),o.default.createElement("div",null,A(e.what,e.new)))})))}}):o.default.createElement("h3",{style:{color:"#555",fontWeight:"normal"}},"No notable changes were found. Versions seem to be identical."))}}]);return t}(o.default.Component);t.default=f},27:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.default=c;var a=n(435);var r=l(a);var o=n(365);var i=l(o);function l(e){return e&&e.__esModule?e:{default:e}}window.missingKey={es:{},en:{},"en-US":{},de:{},"de-DE":{}};var s;var u;function c(e){if(s&&u==e){return s}u=e;s=r.default.use(i.default).init({fallbackLng:"en",lng:e,lowerCaseLng:false,ns:["common"],defaultNS:"common",preload:false,debug:false,nsSeparator:false,keySeparator:false,backend:{loadPath:window.STATIC_URL+"locales/{{lng}}/{{ns}}.json",crossDomain:true},react:{nsMode:"fallback"}});return s}},272:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n){if(Object.prototype.hasOwnProperty.call(n,a)){e[a]=n[a]}}}return e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var o,i,l,s,u,c;var d=n(1);var f=Y(d);var p=n(0);var m=Y(p);var h=n(273);var v=Y(h);var g=n(274);var y=Y(g);var _=n(18);var b=Y(_);var w=n(2);var E=Y(w);var k=n(80);var x=n(28);var N=n(183);var S=Y(N);var C=n(184);var O=Y(C);var T=n(96);var I=n(185);var P=n(31);var R=Y(P);var L=n(101);var A=Y(L);var M=n(55);var j=Y(M);var G=n(45);function Y(e){return e&&e.__esModule?e:{default:e}}function H(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function D(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function z(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var B=["text1","text2","text3","text4"];var U=(i=o=function(e){z(t,e);function t(){H(this,t);return D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}r(t,[{key:"render",value:function e(){var t=this.props.lesson;var n=this.props.lesson.getIn(["instruction","inst"]);var a=n&&n.size>0;var r;if(t.getIn(["typing","is_dynamic"]))r=O.default.dynamicLessonText;else{r=t.getIn(["typing","text1"]);if(t.getIn(["typing","render_engine"])==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC){r=W(JSON.parse(r||"[]"))}}return f.default.createElement("div",{className:"preview-container"},f.default.createElement("div",{className:"preview-field"},f.default.createElement("div",{className:"lesson-text danger"},r)),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Score"),f.default.createElement("span",{className:"field-num"},this.props.lesson.get("score"))),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl    "},"Objective"),f.default.createElement("span",{className:"field-num"},this.props.lesson.get("objective_completion")?"Completion":"Meet Goals")),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Has Instructions"),f.default.createElement("span",{className:"field-num"},a?"Yes":"No")),t.get("objective_completion")=="0"&&f.default.createElement("div",null,f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Goal Speed"),f.default.createElement("span",{className:"field-num"},t.getIn(["typing","goal_wpm"])," wpm")),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Minimum Speed"),f.default.createElement("span",{className:"field-num"},t.getIn(["typing","min_wpm"])," wpm")),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Min Accuracy"),f.default.createElement("span",{className:"field-num"},t.getIn(["typing","min_accuracy"])," %"))))}}]);return t}(d.Component),o.propTypes={lesson:m.default.object.isRequired},i);var V=function e(t){var n=t.lessons,a=t.count,r=t.errors,o=t.onChange;return f.default.createElement("div",{className:"preview-container"},f.default.createElement("h5",null,"Typing Lessons (",a,")"),f.default.createElement(S.default,{lessons:n,errors:r,onChange:o,lesson_type:"typing",lesson_key:"typing.goal_wpm",labels:["Goal Speed","wpm"],validators:[G.isPositiveInteger,function(e){return(0,G.isLessEqualThan)(e,220)}]}),f.default.createElement(S.default,{lessons:n,errors:r,onChange:o,lesson_type:"typing",lesson_key:"typing.min_wpm",labels:["Minimum Speed","wpm"],validators:[G.isPositiveInteger,function(e){return(0,G.isLessEqualThan)(e,220)}]}),f.default.createElement(S.default,{lessons:n,errors:r,onChange:o,lesson_type:"typing",lesson_key:"typing.min_accuracy",labels:["Minimum Accuracy","%"],validators:[G.isPositiveInteger,function(e){return(0,G.isLessEqualThan)(e,100)}]}),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"Backspace Behavior:"),f.default.createElement("span",{className:"field-num"},f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"disable_backspace",onChange:function e(t){return t.target.checked&&o("typing.disable_backspace",true,"typing")}})," Disable")," ",f.default.createElement("br",null),f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"disable_backspace",onChange:function e(t){return t.target.checked&&o("video.disable_backspace",false,"typing")}})," Allow"))),f.default.createElement("div",{className:"preview-field"},f.default.createElement("span",{className:"lbl"},"On Error Behavior:"),f.default.createElement("span",{className:"field-num"},f.default.createElement("label",{style:{width:65}},f.default.createElement("input",{type:"radio",name:"on_error",onChange:function e(t){return t.target.checked&&o("typing.on_error",2,"typing")}})," Block")," ",f.default.createElement("br",null),f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"on_error",onChange:function e(t){return t.target.checked&&o("typing.on_error",1,"typing")}})," Continue"))))};var F=(s=l=function(e){z(t,e);function t(){var e;var n,a,r;H(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=D(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={showAltText:false,logogramMapping:false},a.defaultDynamicSettings={type:"progressive",glossary:"lowercase"},a.handleChangeIsDynamic=function(e){var t=["typing","is_dynamic"];var n=a,r=n.defaultDynamicSettings;var o=a.props.lesson.updateIn(t,function(){return e});if(e){if(!o.getIn(["typing","text5"]))o=o.updateIn(["typing","text5"],function(){return JSON.stringify(r)})}else{o=o.updateIn(["typing","text5"],function(){return""})}a.props.setLesson(o)},a.getDynamicTemplate=function(){var e=a.defaultDynamicSettings;try{e=JSON.parse(a.props.lesson.getIn(["typing","text5"]))}catch(e){}return e},a.handleChangeDynamicTemplate=function(e){var t=e.target.value;var n=e.target.getAttribute("name");var r=a.getDynamicTemplate();r[n]=t;a.props.updateLesson(["typing","text5"],JSON.stringify(r))},a.changeLessonEngine=function(){var e=a.getTypingOnlyList();approuter.show_modal(f.default.createElement(b.default,{id:"lesson-engine",width:450,height:600,show_x:true},f.default.createElement("div",{className:"lesson-type-selector"},f.default.createElement("h3",null,"Change typing lesson type"),f.default.createElement("div",{className:"item-container"},e.map(function(e){var t=e.template.typing.render_engine;var n=(0,E.default)({"lesson-type-item":true,selected:t==a.props.lesson.getIn(["typing","render_engine"])});return f.default.createElement("div",{className:n,onClick:a.handleChangeLessonEngine.bind(a,t),key:e.id},f.default.createElement("img",{src:e.image}),f.default.createElement("div",{className:"lesson-type-description"},f.default.createElement("h4",null,e.name),f.default.createElement("p",null,e.description)))})))))},a.handleNewLessonInstruction=function(){var e=a.newInstruction();a.handleInstructionEdit(e)},a.handleInstructionDelete=function(e){a.deleteInstruction(e)},a.handleInstructionSave=function(e){var t=a.props.lesson;var n=t.getIn(["instruction","inst"]).findIndex(function(t){return t.get("id")==e.get("id")});var r=t.updateIn(["instruction","inst"],function(t){return t.set(n,e)});a.props.setLesson(r)},a.handleInstructionEdit=function(e){approuter.show_modal(f.default.createElement(b.default,{id:"new-lesson-inst",width:450,padding:0,show_x:false},f.default.createElement(v.default,{instruction:e,saveHandler:a.handleInstructionSave})))},a.addAltText=function(){a.setState({showAltText:true})},n),D(a,r)}r(t,[{key:"componentWillMount",value:function e(){this.setupState(this.props)}},{key:"componentWillReceiveProps",value:function e(t){this.setupState(t)}},{key:"setupState",value:function e(t){var n=this;var a=t.lesson;var r=a.getIn(["typing","text2"]);var o=a.getIn(["typing","text3"]);var i=a.getIn(["typing","text4"]);if(!(0,R.default)(r)||!(0,R.default)(o)||!(0,R.default)(i)){this.setState({showAltText:true})}else if(t.lesson.get("id")!=this.props.lesson.get("id")){this.setState({showAltText:false})}if(a.getIn(["typing","render_engine"])==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC&&(!this.state.logogramMapping||t.lesson.get("format")!=this.props.lesson.get("format"))){var l=a.getIn(["typing","format"]);this.loadLogograms(function(e){return n.setState({logogramMapping:e})},l)}}},{key:"getTypingOnlyList",value:function e(){var t=this.props.lessonList;var n=(0,A.default)(t,function(e){return e.template.lesson_type==0&&!e.template.typing.is_dynamic?true:false});return n}},{key:"loadLogograms",value:function e(t,n){if(this.state.logogramMapping)t(this.state.logogramMapping);else{$.get(STATIC_URL+"lpeditor/corpora/mandarin.dat",function(e){var n={};e.split("\n").forEach(function(e){var t=e.split("\t");var a=t[1].split(" ")[0].toLowerCase();n[t[0]]=a;n["FF0C"]=",";n["3002"]=".";n["FF01"]="!";n["FF1F"]="?";n["201D"]='"';n["2019"]="'";n["FF1B"]=";";n["FF1A"]=":";n["3001"]="\\";n["300B"]=">";n["300A"]="<";n["3010"]="[";n["3011"]="]";n["300C"]="{";n["300D"]="}"});t(n)})}}},{key:"deleteInstruction",value:function e(t){var n=this.props.lesson.updateIn(["instruction","inst"],function(e){return e.delete(t)});this.props.setLesson(n)}},{key:"newInstruction",value:function e(){var t={title:"Instruction Title Here",title_tag:"",body:"Lesson instruction content here",chr:"",id:(0,x.getUUID)(),image_url:""};var e=(0,k.fromJS)(t);var n=this.props.lesson;if(!n.hasIn(["instruction","inst"])){n=n.set("instruction",(0,k.Map)());n=n.setIn(["instruction","inst"],(0,k.List)())}var a=n.updateIn(["instruction","inst"],function(t){return t.push(e)});this.props.setLesson(a);return e}},{key:"handleMoveInstruction",value:function e(t,n){var a=this.props.lesson.updateIn(["instruction","inst"],function(e){return(0,x.arrayMove)(e,t,n)});this.props.setLesson(a)}},{key:"getLessonEngine",value:function e(){var t=this.getTypingOnlyList();var n=this.props.lesson.getIn(["typing","render_engine"]);var a=(0,j.default)(t,function(e){return e.template.typing.render_engine==n});if(!a)return{name:"Not Implemented"};else return a}},{key:"handleChangeLessonEngine",value:function e(t){var n=this;approuter.hide_modal("lesson-engine");var a=t;var r=this.props.lesson;var o=r.getIn(["typing","render_engine"]);if(o==t)return;var i=r.updateIn(["typing","render_engine"],function(){return a}).updateIn(["typing","format"],function(){return""});if(a==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC){var l="pinyin";i=i.updateIn(["typing","format"],function(){return l});this.loadLogograms(function(e){var t=true;var a=false;var o=undefined;try{for(var s=B[Symbol.iterator](),u;!(t=(u=s.next()).done);t=true){var c=u.value;i=i.updateIn(["typing",c],function(t){return t&&JSON.stringify(K(t,e,l))||""})}}catch(e){a=true;o=e}finally{try{if(!t&&s.return){s.return()}}finally{if(a){throw o}}}i=i.updateIn(["typing","format"],function(){return"pinyin"});if(r.getIn(["typing","is_dynamic"])){i=i.updateIn(["typing","is_dynamic"],function(){return false})}n.props.setLesson(i);n.setState({logogramMapping:e})})}else{if(o==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC){var s=true;var u=false;var c=undefined;try{for(var d=B[Symbol.iterator](),f;!(s=(f=d.next()).done);s=true){var p=f.value;i=i.updateIn(["typing",p],function(e){return e&&W(JSON.parse(e))||""})}}catch(e){u=true;c=e}finally{try{if(!s&&d.return){d.return()}}finally{if(u){throw c}}}}this.props.setLesson(i);if(r.getIn(["typing","is_dynamic"])&&a!=T.RENDER_ENGINE.TYPING_TEXT){this.handleChangeIsDynamic(false)}}}},{key:"render",value:function e(){var t=this;var n=this.props,r=n.lesson,o=n.program,i=n.handler,l=n.errors;var s=r.getIn(["typing","render_engine"]);var u=r.getIn(["typing","goal_wpm"]);var c=r.getIn(["instruction","inst"]);var d=r.getIn(["typing","is_dynamic"]);var p=d&&this.getDynamicTemplate()||this.defaultDynamicSettings;var m=["text1"];var h=this.state.showAltText?B:m;var v={"":"Autodetect",cpp:"C++",cs:"C#",css:"CSS",scss:"SCSS",java:"Java",javascript:"JavaScript",json:"JSON",makefile:"Makefile",markdown:"Markdown",objectivec:"Objective-C",python:"Python",perl:"Perl",php:"PHP",ruby:"Ruby",sql:"SQL",yaml:"YAML",bash:"Shell Session",xml:"HTML,XML"};var g={pinyin:"Chinese Pinyin"};var _=s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC?g:v;var b;if(d){b=f.default.createElement("div",{style:{marginTop:50}},f.default.createElement("div",{style:{color:"#666",fontSize:"13px",background:"#ecf9e9",padding:"10px"}},O.default.dynamicLessonText),f.default.createElement("div",{className:"edit-field dense"},f.default.createElement("h6",null,"Type"),f.default.createElement("div",{className:"control-container"},f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"type",onChange:this.handleChangeDynamicTemplate,checked:p.type=="progressive",value:"progressive"}),"Progressive Duals-to-Words"),f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"type",onChange:this.handleChangeDynamicTemplate,checked:p.type=="duals",value:"duals"}),"Duals and Words"),f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"type",onChange:this.handleChangeDynamicTemplate,checked:p.type=="words",value:"words"}),"Words Only"))),f.default.createElement("div",{className:"edit-field dense"},f.default.createElement("h6",null,"Sample Text"),f.default.createElement("div",{style:{fontSize:11,padding:5,background:"#eee"}},p.type=="progressive"&&f.default.createElement("div",null,f.default.createElement("div",null,"th th thi the there this them"),f.default.createElement("div",null,"do do gdo dom kingdom dolphins dolphin"),f.default.createElement("div",null,"gr gr gre gre green greater great"),f.default.createElement("div",null,"pt pt ept opt concept adopted adapted")),p.type=="duals"&&f.default.createElement("div",null,f.default.createElement("div",null,"ts ts ts suggests measurements hosts"),f.default.createElement("div",null,"do do do kingdom dolphin domestic"),f.default.createElement("div",null,"gr gr gr greatly great green"),f.default.createElement("div",null,"pt pt pt adapted consumption adopted")),p.type=="words"&&f.default.createElement("div",null,f.default.createElement("div",null,"hosts results hosts measurements"),f.default.createElement("div",null,"dolphin does does dolphins"),f.default.createElement("div",null,"greatest greatly greater grew"),f.default.createElement("div",null,"accepted concept adapted adapted")))))}else if(s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC){if(s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC&&!this.state.logogramMapping)b=f.default.createElement("h5",{style:{padding:"10px 5px"}},"Loading Logograms...");else{var w=Math.min(Math.round(u*4),100);var E=r.getIn(["typing","format"])||"pinyin";b=h.map(function(e,n){return f.default.createElement(J,{key:n,mapping:t.state.logogramMapping,format:E,cssClass:(0,G.getValidStyle)(l,"typing."+e,"edit-field"),fieldName:"typing."+e,label:"Lesson Text "+(n+1),changeHandler:i.handleChangeLessonText,value:r.getIn(["typing",e])||"",recmSize:w,isValid:(0,G.isValid)(l,"typing."+e)})})}}else{var k=Math.min(Math.round(u*10),300);b=h.map(function(e,t){return f.default.createElement(q,{key:t,cssClass:(0,G.getValidStyle)(l,"typing."+e,"edit-field"),fieldName:"typing."+e,label:"Lesson Text "+(t+1),changeHandler:i.handleChangeLessonText,value:r.getIn(["typing",e])||"",recmSize:k,isValid:(0,G.isValid)(l,"typing."+e)})})}var N=this.getLessonEngine();return f.default.createElement("div",{className:"gi-edit"},f.default.createElement("div",{className:"edit-column-main"},f.default.createElement("div",{className:"group-container"},f.default.createElement("div",{className:"name-icon-wrapper clearfix"},f.default.createElement("div",{className:(0,G.getValidStyle)(l,"name","edit-field")},f.default.createElement("div",{className:"lbl",style:{width:"initial"}},"Name"),f.default.createElement("input",{className:"field-text md",name:"name",onChange:i.handleChangeTextInput,value:r.get("name")}),(0,G.isValid)(l,"name")),f.default.createElement("div",{className:"lessonicon-holder",onClick:i.pickLessonIcon},f.default.createElement("span",{className:"lessonicon "+(0,x.getIconClass)(r.get("key"))}))),f.default.createElement("div",{className:"edit-field"},s==T.RENDER_ENGINE.TYPING_CODE||s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC?f.default.createElement("div",{style:{float:"right",display:s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC?"none":"block"}},f.default.createElement("span",{className:"lbl",style:{width:"inherit"}},"Language ")," ",f.default.createElement("select",{className:"form-control",value:r.getIn(["typing","format"])||"",onChange:function e(n){var a=n.target.value;t.props.updateLesson(["typing","format"],a);if(s==T.RENDER_ENGINE.TYPING_LOGOGRAPHIC){t.state.logogramMapping=null;t.loadLogograms(function(e){var n=r;var o=true;var i=false;var l=undefined;try{for(var s=B[Symbol.iterator](),u;!(o=(u=s.next()).done);o=true){var c=u.value;n=n.updateIn(["typing",c],function(t){return t&&JSON.stringify(K(W(JSON.parse(t)),e,a))||""})}}catch(e){i=true;l=e}finally{try{if(!o&&s.return){s.return()}}finally{if(i){throw l}}}t.props.setLesson(n);t.setState({logogramMapping:e})},a)}},style:{display:"inline",width:"inherit",height:25}},Object.keys(_).map(function(e){return f.default.createElement("option",{key:e,value:e},_[e])}))):s==T.RENDER_ENGINE.TYPING_TEXT&&f.default.createElement("label",{style:{float:"right",margin:10,cursor:"pointer"}},f.default.createElement("input",{type:"checkbox",onChange:function e(n){return t.handleChangeIsDynamic(n.target.checked)},checked:d||false}),"This lesson's text is dynamic")),b,!d&&!this.state.showAltText&&f.default.createElement("div",{className:"add-more sm",title:"Add optional field to provide an alternative text",onClick:this.addAltText},"+ ",f.default.createElement("span",{className:"txt"}," Add alternative lesson text"))),f.default.createElement("div",{className:"group-container"},f.default.createElement("h5",null,"Typing Lesson Type"),f.default.createElement("div",{className:"lesson-render-engine"},f.default.createElement("div",{onClick:this.changeLessonEngine,style:{float:"left",marginRight:15}},f.default.createElement("img",{className:"lesson-engine-img",src:N.image})),f.default.createElement("div",null,f.default.createElement("div",{className:"lesson-engine-name"},N.name),f.default.createElement("p",null,N.description)))),f.default.createElement("div",{className:"group-container"},f.default.createElement("h5",null,"Lesson Objective",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.objective))),f.default.createElement("div",{className:"edit-field"},f.default.createElement("div",{className:"control-container"},f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"objective_completion",onChange:i.handleChangeRadio,checked:r.get("objective_completion")||false,value:"1"}),"Simply complete the lesson"),f.default.createElement("label",null,f.default.createElement("input",{type:"radio",name:"objective_completion",onChange:i.handleChangeRadio,checked:!r.get("objective_completion"),value:"0"}),"Meet performance goals"))),f.default.createElement("br",null),f.default.createElement("h5",null,"Lesson Settings"),f.default.createElement("div",{className:"edit-field"},f.default.createElement("label",{className:"control-container"},f.default.createElement("input",{type:"checkbox",name:"typing.disable_backspace",onChange:i.handleChangeCheckbox,checked:r.getIn(["typing","disable_backspace"])}),"Disable backspace on this lesson",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.backspace)))),f.default.createElement("div",{className:"edit-field"},f.default.createElement("label",{className:"control-container"},f.default.createElement("input",{type:"checkbox",name:"typing.on_error",onChange:function e(t){return i.handleChangeCheckbox(t,function(e){return e?2:1})},checked:r.getIn(["typing","on_error"])==2}),"Block students on error",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.onError)))),f.default.createElement("div",{className:"edit-field"},f.default.createElement("label",{className:"control-container"},f.default.createElement("input",{type:"checkbox",name:"typing.voiceover_words",onChange:i.handleChangeCheckbox,checked:r.getIn(["typing","voiceover_words"])||false}),"Lesson includes meaningful words",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.voiceOverWords)))),f.default.createElement("div",{className:"edit-field"},f.default.createElement("label",{className:"control-container"},f.default.createElement("input",{type:"checkbox",name:"is_test",onChange:i.handleChangeCheckbox,checked:r.get("is_test")||false}),"This lesson is a placement test",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.placementTest)))),(r.get("is_test")||r.get("is_hidden"))&&f.default.createElement("div",{className:"edit-field",style:{paddingLeft:25}},f.default.createElement("label",{className:"control-container"},f.default.createElement("input",{type:"checkbox",name:"is_hidden",onChange:i.handleChangeCheckbox,checked:r.get("is_hidden")||false}),"Hide this placement test from lesson view",f.default.createElement("span",{className:"helpful-hint"},f.default.createElement("div",null,O.default.hideLesson))))),f.default.createElement("div",{className:"group-container"},f.default.createElement("h5",null,"Performance Goals"),r.get("objective_completion")=="0"&&f.default.createElement("div",null,f.default.createElement(I.InputGroup,{label:"Goal Speed",help:O.default.speedGoal,name:"typing.goal_wpm",value:r.getIn(["typing","goal_wpm"])||0,errors:l,onChange:i.handleChangeNumericInput,units:"wpm"}),f.default.createElement(I.InputGroup,{label:"Minimum Speed",help:O.default.minSpeed,name:"typing.min_wpm",value:r.getIn(["typing","min_wpm"])||0,errors:l,onChange:i.handleChangeNumericInput,units:"wpm"}),f.default.createElement(I.InputGroup,{label:"Minimum Accuracy",help:O.default.minAccuracy,name:"typing.min_accuracy",value:r.getIn(["typing","min_accuracy"])||0,errors:l,onChange:i.handleChangeNumericInput,units:"%"})),f.default.createElement(I.InputGroup,{label:"Score",help:O.default.scoreTyping,name:"score",value:r.get("score")||0,errors:l,onChange:i.handleChangeNumericInput,units:"points"}),f.default.createElement(I.InputGroup,{label:"Time Limit",help:O.default.timeLimit,name:"typing.max_secs",value:(r.getIn(["typing","max_secs"])||0)/60,errors:l,onChange:function e(t){i.handleChangeNumericInput(t,{type:"*",amount:60})},units:"min"})),f.default.createElement("div",{className:"group-container"},f.default.createElement("h5",null,"Instructions"),f.default.createElement(y.default,a({instructions:c,axis:"xy",helperClass:"inst-item-drag-helper",distance:5,instructionAddHandler:this.handleNewLessonInstruction,instructionDeleteHandler:this.handleInstructionDelete,instructionEditHandler:this.handleInstructionEdit,onSortEnd:function e(n){var a=n.oldIndex,r=n.newIndex;t.handleMoveInstruction(a,r)}},this.props)))))}}]);return t}(d.Component),l.propTypes={lesson:m.default.object.isRequired,lessonList:m.default.array.isRequired,program:m.default.object.isRequired,handler:m.default.object.isRequired,errors:m.default.object.isRequired,updateLesson:m.default.func.isRequired},s);var q=(c=u=function(e){z(t,e);function t(){H(this,t);return D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}r(t,[{key:"insertAtCaret",value:function e(t,n){var a=t.scrollTop;var r=t.selectionStart;var o=t.value.substring(0,r);var i=t.value.substring(t.selectionEnd,t.value.length);t.value=o+n+i;r=r+n.length;t.selectionStart=r;t.selectionEnd=r;t.focus();t.scrollTop=a}},{key:"render",value:function e(){var t=this;return f.default.createElement("div",{className:this.props.cssClass},f.default.createElement("div",{className:"lbl"},this.props.label),f.default.createElement("textarea",{className:"lesson-text",onChange:function e(n){return t.props.changeHandler(t.props.fieldName,n.target.value)},onKeyDown:function e(n){if(n.keyCode==9){t.insertAtCaret(n.target,"\t");t.props.changeHandler(t.props.fieldName,n.target.value);n.preventDefault()}},value:this.props.value}),this.props.isValid,f.default.createElement("div",{style:{float:"right",color:"#999"}},this.props.value.length," / ",this.props.recmSize))}}]);return t}(d.Component),u.propTypes={},c);function W(e){var t="";var n=true;var a=false;var r=undefined;try{for(var o=e[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;var s=l.signs.length>1;if(s)t+="[";var u=true;var c=false;var d=undefined;try{for(var f=l.signs[Symbol.iterator](),p;!(u=(p=f.next()).done);u=true){var m=p.value;var h="";var v=true;var g=false;var y=undefined;try{for(var _=m.g[Symbol.iterator](),b;!(v=(b=_.next()).done);v=true){var w=b.value;if(~"()[]$".indexOf(w))h+="$";h+=w}}catch(e){g=true;y=e}finally{try{if(!v&&_.return){_.return()}}finally{if(g){throw y}}}t+=h;if(m.m){var E="";var k=true;var x=false;var N=undefined;try{for(var S=m.t[Symbol.iterator](),C;!(k=(C=S.next()).done);k=true){var O=C.value;if(~"()[]$".indexOf(O))E+="$";E+=O}}catch(e){x=true;N=e}finally{try{if(!k&&S.return){S.return()}}finally{if(x){throw N}}}if(m.tone)E+=m.tone;t+="("+E+")"}}}catch(e){c=true;d=e}finally{try{if(!u&&f.return){f.return()}}finally{if(c){throw d}}}if(s)t+="]"}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}return t}function K(e,t,n){var a=e;var r=0;var o=1,i=2,l=3,s=4,u=5;function c(e){return typeof e=="string"}function d(){if(r==a.length)return o;var e=a[r++];if(e=="$")e=a[r++];else if(e=="[")e=i;else if(e=="]")e=l;else if(e=="(")e=s;else if(e==")")e=u;return e}var f=void 0;function p(){if(f){var e=f;f=null;return e}return d()}function m(){if(!f)f=d();return f}function h(e){var a=e;var r=void 0;var i=false;if(m()===s){var l=[];while(e=p()){if(e===u)break;else if(e===o)throw"Missing closing parenthesis.";else if(c(e))l.push(e)}r=l.join("");i=true}else{r=t[e.charCodeAt(0).toString(16).toUpperCase()]||e}if(n=="pinyin"&&r.length>1&&"12345".indexOf(r[r.length-1])>=0){return{g:a,t:r.slice(0,-1),tone:r[r.length-1],m:i}}else return{t:r,g:a,m:i}}var v=[];var g=void 0;try{while(g=p()){if(g===o)break;else if(c(g)){v.push({signs:[h(g)]})}else if(g===i){var y=[];while(g=p()){if(g===l)break;else if(g===o)throw"Missing closing bracket.";else if(g===s)throw"Missing character before parenthesis.";else y.push(h(g))}v.push({signs:y})}}}catch(e){return[{signs:[{g:"!",t:e.message||e}]}]}return v}var J=function(e){z(t,e);function t(e){H(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state=n.getParsedText(e.value);return n}r(t,[{key:"getParsedText",value:function e(t){var n=JSON.parse(t||"[]");return{text:W(n),parsedText:n}}},{key:"changeHandler",value:function e(t,n){var a=K(n,this.props.mapping,this.props.format);this.setState({parsedText:a,text:n});if(a.length==1&&a[0].signs.length&&a[0].signs[0].g=="!")return;this.props.changeHandler(t,a.length?JSON.stringify(a):"")}},{key:"componentWillReceiveProps",value:function e(t){if(t.value!=this.props.value)this.setState(this.getParsedText(t.value))}},{key:"render",value:function e(){var t=Object.assign({},this.props);Object.assign(t,{changeHandler:this.changeHandler.bind(this),value:this.state.text,goalWPM:this.props.goalWPM});return f.default.createElement("div",null,f.default.createElement(q,t),f.default.createElement(X,{logograms:this.state.parsedText}))}}]);return t}(d.Component);var X=function e(t){var n=t.logograms;return f.default.createElement("div",{className:"logograms-view"},n.map(function(e,t){return[f.default.createElement("span",{key:t},e.signs.map(function(e,t){return f.default.createElement("span",{key:t},f.default.createElement("div",null,e.g),e.t!=e.g&&f.default.createElement("div",null,e.t,e.tone))})),e.signs.length>0&&e.signs[e.signs.length-1].g=="\n"&&f.default.createElement("br",{key:"br"})]}))};t.default={PreviewPane:U,BulkUpdatePane:V,EditContainer:F,LogogramsView:X,name:"Typing",lesson_type:0}},273:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r,o;var i=n(1);var l=c(i);var s=n(0);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var m=(o=r=function(e){p(t,e);function t(){var e;var n,a,r;d(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={instruction:a.props.instruction},a.handleDialogCancel=function(){approuter.hide_modal("new-lesson-inst")},a.handleChangeField=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"string";var n=e.target.getAttribute("name");var r=t=="int"?Number.parseInt(e.target.value,10):e.target.value;var o=n.replace("instruction.","");a.setState(function(e){return{instruction:e.instruction.update(o,function(){return r})}})},a.handleSave=function(){approuter.hide_modal("new-lesson-inst");a.props.saveHandler(a.state.instruction)},n),f(a,r)}a(t,[{key:"render",value:function e(){var t=this.state.instruction;return l.default.createElement("div",{className:"lesson-instruction-dialog"},l.default.createElement("div",{className:"title"},"Lesson Instruction"),l.default.createElement("div",{className:"content"},l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"Title Tag (optional)"),l.default.createElement("input",{type:"text",className:"field-text",name:"instruction.title",onChange:this.handleChangeField,defaultValue:t.get("title")})),l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"Slide Title"),l.default.createElement("input",{type:"text",className:"field-text",name:"instruction.title_tag",onChange:this.handleChangeField,defaultValue:t.get("title_tag")})),l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"The instructional text"),l.default.createElement("textarea",{name:"instruction.body",onChange:this.handleChangeField,defaultValue:t.get("body")})),l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"Character to highlight on keyboard (Optional)"),l.default.createElement("input",{type:"text",className:"field-text",name:"instruction.chr",onChange:this.handleChangeField,defaultValue:t.get("chr")})),l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"Image/Youtube URL (Optional)"),l.default.createElement("input",{type:"text",className:"field-text",name:"instruction.image_url",onChange:this.handleChangeField,defaultValue:t.get("image_url")})),l.default.createElement("div",{className:"field-wrapper"},l.default.createElement("label",null,"Audio instruction mp3 file path (Optional)"),l.default.createElement("input",{type:"text",className:"field-text",name:"instruction.audio_url",onChange:this.handleChangeField,defaultValue:t.get("audio_url")}))),l.default.createElement("div",{className:"btn-container"},l.default.createElement("div",{className:"btn-1",onClick:this.handleSave},"Save"),l.default.createElement("div",{className:"btn-2",onClick:this.handleDialogCancel},"Cancel")))}}]);return t}(i.Component),r.propTypes={instruction:u.default.object.isRequired,saveHandler:u.default.func.isRequired},o);t.default=m},274:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n){if(Object.prototype.hasOwnProperty.call(n,a)){e[a]=n[a]}}}return e};var r=function(){function e(e,t){var n=[];var a=true;var r=false;var o=undefined;try{for(var i=e[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){n.push(l.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!a&&i["return"])i["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var i,l,s,u;var c=n(1);var d=v(c);var f=n(0);var p=v(f);var m=n(95);var h=n(80);function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var b=(l=i=function(e){_(t,e);function t(){g(this,t);return y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,[{key:"render",value:function e(){var t=this;var n=this.props.instruction;var a=this.props.index;var r=this.props.instIndex;return d.default.createElement("div",{className:"inst-item",key:a},d.default.createElement("div",{className:"inst-trash glyphicon glyphicon-trash",onClick:function e(){return t.props.instructionDeleteHandler(r)},title:"Delete instruction"}),d.default.createElement("div",{className:"inst-edit glyphicon glyphicon-pencil",onClick:function e(){return t.props.instructionEditHandler(n)},title:"Edit instruction"}),d.default.createElement("div",{className:"inst-title"},n.get("title")),d.default.createElement("div",{className:"inst-body"},n.get("body")))}}]);return t}(c.Component),i.propTypes={instruction:p.default.object.isRequired,instIndex:p.default.number.isRequired,instructionDeleteHandler:p.default.func.isRequired,instructionEditHandler:p.default.func.isRequired},l);var w=(0,m.SortableElement)(b);var E=(u=s=function(e){_(t,e);function t(){g(this,t);return y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,[{key:"render",value:function e(){var t=this;var n=this.props.instructions;var o=n&&n.size>0;return d.default.createElement("div",null,o&&n.entrySeq().map(function(e){var n=r(e,2),o=n[0],i=n[1];var l=i.get("id");return d.default.createElement(w,a({key:"item-"+l,index:o,instIndex:o,instruction:i},t.props))}),d.default.createElement("div",{className:"inst-item",onClick:this.props.instructionAddHandler},d.default.createElement("div",{className:"new-inst-item"},d.default.createElement("div",{className:"add-icon"},"+"))))}}]);return t}(c.Component),s.propTypes={instructionAddHandler:p.default.func.isRequired},u);var k=(0,m.SortableContainer)(E);t.default=k},28:function(e,t,n){var a=n(116);var r=o(a);function o(e){return e&&e.__esModule?e:{default:e}}var i=function e(){var t=void 0,n=void 0;var a="";for(t=0;t<32;t++){n=Math.random()*16|0;if(t===8||t===12||t===16||t===20){a+="-"}a+=(t===12?4:t===16?n&3|8:n).toString(16)}return a};function l(e,t){var n=e.getIn([t?"videotyping":"video","video_catalog_vimeo_uri"]);var a=n?n.split("/")[2]:null;return a}var s=function e(t,n,a){if(a<0)return t;var r=t.get(n);return t.delete(n).insert(a,r)};var u={};var c=function e(t){(0,r.default)(u,t);document.location.hash=JSON.stringify(u)};var d=function e(t){document.location.hash=JSON.stringify(t)};var f=function e(){var t={};if(document.location.hash){var n=decodeURI(document.location.hash.replace("#",""));t=JSON.parse(n)}return t};var p=function e(t){return t.lesson_type===1};var m=function e(t){return t.get("lesson_type")===1};function h(e){var t="e-cmn cmn-default";if(!e)e=t;return e+(e.endsWith("-wide")?" icon-wide":"")}function v(){return[{val:-1,label:"Unassigned"},{val:15,label:"Pre-K"},{val:0,label:"Kindergarten"},{val:1,label:"1st Grade"},{val:2,label:"2nd Grade"},{val:3,label:"3rd Grade"},{val:4,label:"4th Grade"},{val:5,label:"5th Grade"},{val:6,label:"6th Grade"},{val:7,label:"7th Grade"},{val:8,label:"8th Grade"},{val:9,label:"9th Grade"},{val:10,label:"10th Grade"},{val:11,label:"11th Grade"},{val:12,label:"12th Grade"},{val:16,label:"Trainee"}]}e.exports={getUUID:i,getVimeoVideoId:l,arrayMove:s,getHashDict:f,updateHashDict:c,lessonIsASection:p,lessonImmuIsASection:m,setHashDict:d,getIconClass:h,getGradeList:v}},360:function(e,t,n){var a={"./es":361};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");n.code="MODULE_NOT_FOUND";throw n}return t}r.keys=function e(){return Object.keys(a)};r.resolve=o;e.exports=r;r.id=360},45:function(e,t,n){var a=n(1);var r=u(a);var o=n(395);var i=u(o);var l=n(31);var s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){return{status:!/^\+?(0|[1-9]\d*)$/.test(t),msg:"Input must be a positive whole number"}};var d=function e(t){return{status:!t||/^\s*$/.test(t),msg:"Input cannot be empty"}};var f=function e(t,n){return{status:parseInt(t)>n,msg:"Value must be less or equal to "+n}};var p=function e(t,n,a){if(t[n]&&t[n].length!=0){return a+" invalid"}else{return a}};var m=function e(t,n){if(t[n]&&t[n].length!=0){return r.default.createElement("div",{className:"err-msg"},t[n].map(function(e,t){return r.default.createElement("span",{key:t},e)}))}else{return[]}};var h=function e(t,n,a,r){var o=n[a];t[a]=[];if(o){var i=true;var l=false;var s=undefined;try{for(var u=o[Symbol.iterator](),c;!(i=(c=u.next()).done);i=true){var d=c.value;var f=d(r);if(f.status){t[a].push(f.msg)}}}catch(e){l=true;s=e}finally{try{if(!i&&u.return){u.return()}}finally{if(l){throw s}}}}};var v=function e(t){var e=(0,i.default)(t,function(e){return!(0,s.default)(e)});return e};e.exports={isPositiveInteger:c,isLessEqualThan:f,isNotBlank:d,getValidStyle:p,isValid:m,checkValidators:h,hasErrors:v}},472:function(e,t,n){n(215);e.exports=n(638)},54:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(t){r(this,e);this.event_manager=t;this.events={}}a(e,[{key:"on",value:function e(t,n){try{return this.event_manager.on(t,n)}finally{if(!this.events[t])this.events[t]=[];this.events[t].push(n)}}},{key:"unbindAll",value:function e(){for(var t in this.events){var n=true;var a=false;var r=undefined;try{for(var o=this.events[t][Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;this.event_manager.unbind(t,l)}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}}}}]);return e}();var i=function(){function e(t){r(this,e);this.events={};for(var n=0;n<t.length;n++){this.events[t[n]]=[]}}a(e,[{key:"on",value:function e(t,n){if(this.events[t]==undefined)return console.error("Event "+t+" does not exist");this.events[t].push(n)}},{key:"unbind",value:function e(t,n){if(this.events[t]==undefined)return console.error("Event "+t+" does not exist");var a=[];var r=true;var o=false;var i=undefined;try{for(var l=this.events[t][Symbol.iterator](),s;!(r=(s=l.next()).done);r=true){var u=s.value;if(u!=n)a.push(u)}}catch(e){o=true;i=e}finally{try{if(!r&&l.return){l.return()}}finally{if(o){throw i}}}this.events[t]=a}},{key:"flush",value:function e(t){this.events[t]=[]}},{key:"fire_event",value:function e(t,n){var a=this.events[t];for(var r=0;r<a.length;r++){a[r](n)}}},{key:"group",value:function e(){return new o(this)}}]);return e}();t.default=i},638:function(e,t,n){var a=n(241);var r=f(a);var o=n(21);var i=f(o);var l=n(261);var s=n(180);var u=f(s);var c=n(743);var d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}window.lpgen=d.default;if((0,u.default)(window)){i.default.set_resolveAppRoute(l.resolveAppRoute);i.default.set_url_routes(l.url_routes);window.approuter=i.default}else window.approuter={goto_url:function e(){}}},743:function(e,t,n){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(5);var o=S(r);var i=n(1);var l=S(i);var s=n(18);var u=S(s);var c=n(8);var d=S(c);var f=n(149);var p=n(176);var m=n(177);var h=n(267);var v=S(h);var g=n(124);var y=S(g);var _=n(272);var b=S(_);var w=n(115);var E=N(w);var k=n(78);var x=S(k);function N(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function I(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var R=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={modals:[]},n),I(a,r)}a(t,[{key:"componentDidMount",value:function e(){var t=this;var n=function e(){t.setState({modals:approuter.modals});(0,d.default)("#corpus-toolbar").toggle(approuter.modals.length)};approuter.events.on("show_modal",n);approuter.events.on("hide_modal",n)}},{key:"render",value:function e(){var t=this.state.modals.map(function(e,t){return l.default.createElement(f.CSSTransition,{key:t,classNames:"edmodal",timeout:{enter:600,exit:0}},l.default.createElement("div",{key:e.props.id},e))});return l.default.createElement("div",{id:"root"},l.default.createElement("div",{style:{position:"fixed",zIndex:1100}},l.default.createElement(f.TransitionGroup,null,t)),this.props.children)}}]);return t}(l.default.Component);window.corpusName="andersen-books";function L(e){var t=e.getBoundingClientRect();if(t.bottom>window.innerHeight){e.scrollIntoView(false)}if(t.top<0){e.scrollIntoView()}}var A=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={filterNeedReview:false,expandedSections:{},expandSectionAt:-1,focus_lesson_id:window.lesson_id,updates:{reviews:0,edits:0}},n),I(a,r)}a(t,[{key:"componentDidMount",value:function e(){var t=this;this.loadLesson(this.props.is_author);this.keydown_handler=this._keydown_handler.bind(this);(0,d.default)(document).keydown(this.keydown_handler);if(this.props.is_author)this.check4UpdatesInterval=setInterval(function(){if(!t.lastCheck4Updates)return;var e=t.props.teamprogram;var n={since:t.lastCheck4Updates.toISOString()};d.default.get("/sportal/lpeditor/program/"+e.program_id+"/check4updates",n,function(e){var n=t.state.updates;if(e.reviews>n.reviews||e.edits>n.edits){t.setState({updates:{edits:e.edits,reviews:e.reviews}})}})},5e4)}},{key:"componentWillUnmount",value:function e(){(0,d.default)(document).unbind("keydown",this.keydown_handler);if(this.check4UpdatesInterval)clearInterval(this.check4UpdatesInterval)}},{key:"_keydown_handler",value:function e(t){if(approuter.modals.length)return;var n=t||window.event;var a=n.keyCode||n.which;switch(a){case y.default.up_arrow:this.setFocusLesson(true);t.preventDefault();break;case y.default.down_arrow:this.setFocusLesson(false);t.preventDefault();break;case y.default.enter:if(this.focus_lesson_tr){(0,d.default)(this.focus_lesson_tr).find(".action-cell button").click();t.preventDefault()}break}}},{key:"setFocusLesson",value:function e(t){var n=this.state.program;if(!n||!n.lessons.length)return;var a=n.lessons;var r=a.filter(function(e){return e.lesson_type!=1});var o=this.state.focus_lesson_id;if(!o){this.setState({focus_lesson_id:r[0].id});return}var i=null,l=false,s=void 0;var u=true;var c=false;var d=undefined;try{for(var f=a[Symbol.iterator](),p;!(u=(p=f.next()).done);u=true){s=p.value;if(l&&s.lesson_type!=1){this.setState({focus_lesson_id:s.id});return}if(s.id==o){if(t){this.setState({focus_lesson_id:i?i.id:r[0].id});return}else l=true}if(s.lesson_type!=1)i=s}}catch(e){c=true;d=e}finally{try{if(!u&&f.return){f.return()}}finally{if(c){throw d}}}if(l)this.setState({focus_lesson_id:s.id})}},{key:"componentDidUpdate",value:function e(){if(this.focus_lesson_tr){L(this.focus_lesson_tr);window.lesson_id=0}}},{key:"loadLesson",value:function e(t){var n=this;var a=this.props.teamprogram;this.lastCheck4Updates=null;d.default.get("/sportal/lpeditor/get_program.json?program_id="+a.program_id,function(e){if(t&&e.lessons.length&&(!e.meta||!Object.keys(e.meta).length)){if(confirm("This program does not have a meta. Do you want to build it?")){n.buildProgramMeta(e)}}if(!e.meta.corpus_name)e.meta.corpus_name=window.corpusName;else window.corpusName=e.meta.corpus_name;n.setProgramState(e)})}},{key:"buildProgramMeta",value:function e(t){var n;var a=true;var r=false;var o=undefined;try{for(var i=t.lessons[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;s.meta=s.meta||{};s.isDirty=true;if(s.typing){(function(){var e=s.typing.text1.split("");var t={};e.map(function(e){t[e]=true});var a=Object.keys(t);if(a.length<=4&&!t[" "]){var r=[];if(a.length>2){r=a.filter(function(e){return e!=e.toUpperCase()&&a.indexOf(e.toUpperCase())>=0});a=a.filter(function(e){return e==e.toUpperCase()||a.indexOf(e.toUpperCase())<0})}if(a.length<4){s.meta.type="keys";s.meta.keys=a.concat(r);s.meta.fingers=["",""];s.meta.size=32;n=s.meta.keys}}})()}else{if(n){s.meta.type="review";s.meta.keys=n;n=null;continue}else if(s.typing){if(s.typing.render_engine==E.TYPING_GAME_BALLOON_VALLEY)s.meta.type="game1";else if(s.typing.render_engine==E.TYPING_GAME_TEMPLE_BASH)s.meta.type="game3"}}}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}t.meta={imported:true};this.save_lesson_meta=true}},{key:"setProgramState",value:function e(t){this.lastCheck4Updates=new Date;this.setState({program:t,updates:{reviews:0,edits:0}});window.PROGRAM_CONTENT=t.meta&&t.meta.content||{}}},{key:"save",value:function e(t){var n=this;var a=this.props.teamprogram;var r=this.state.program;var o=r.meta;if(Object.keys(window.PROGRAM_CONTENT).length)o.content=window.PROGRAM_CONTENT;o.corpus_name=window.corpusName;o.saves=(o.saves||0)+1;console.log("Saving:",r);var i=[];var s=true;var u=false;var c=undefined;try{for(var f=r.lessons[Symbol.iterator](),p;!(s=(p=f.next()).done);s=true){var m=p.value;if(!m.meta)m.meta={};if(m.isDirty){delete m.isDirty;i.push(m)}else{i.push(m.id)}}}catch(e){u=true;c=e}finally{try{if(!s&&f.return){f.return()}}finally{if(u){throw c}}}var h={data:JSON.stringify(Object.assign({},r,{lessons:i}))};if(this.save_lesson_meta)h.save_lesson_meta=true;if(t==true)h.remove_all_meta=true;this.refs.saving.style.display="flex";this.lastCheck4Updates=null;d.default.post("/sportal/lpeditor/update_program?program_id="+a.program_id,h,function(e){if(t==true)return location.reload();n.save_lesson_meta=false;if(n.expandSectionAt>=0)n.state.expandedSections[e.lesson_ids[n.expandSectionAt]]=true;n.expandSectionAt=-1;var a=n.state.program;for(var r=0;r<e.lesson_ids.length;r++){a.lessons[r].id=e.lesson_ids[r]}n.setProgramState(a)}).fail(function(e){n.show_error(l.default.createElement("p",null,"Server response: ",l.default.createElement("b",null,e.statusText)));n.loadLesson()}).always(function(){return n.refs.saving.style.display="none"})}},{key:"postReview",value:function e(t,n){var a=this;D();d.default.post("/sportal/lpeditor/lesson/"+t.id+"/post_review",n,this.setProgramState.bind(this)).fail(function(e){a.show_error(l.default.createElement("p",null,"Server response: ",l.default.createElement("b",null,e.statusText)))});window.lesson_id=t.id}},{key:"show_error",value:function e(t){approuter.show_modal(l.default.createElement(u.default,{id:"save-error"},l.default.createElement("h4",null,l.default.createElement("i",{className:"glyphicon glyphicon-alert",style:{fontSize:"1.4em",verticalAlign:"middle",padding:20}}),"Failed to save"),t))}},{key:"materializeLessons",value:function e(t,n,a,r){var o=true;var i=false;var s=undefined;try{for(var u=t[Symbol.iterator](),c;!(o=(c=u.next()).done);o=true){var d=c.value;d.isDirty=true}}catch(e){i=true;s=e}finally{try{if(!o&&u.return){u.return()}}finally{if(i){throw s}}}var f=this.state.program;var p={};(f.meta&&f.meta.snippets||[]).map(function(e){return p[e.content]=e.id});var m=new Set(f.lessons.filter(function(e){return e.typing}).map(function(e){return e.typing.text1}));var h=true;var v=false;var g=undefined;try{for(var y=t[Symbol.iterator](),_;!(h=(_=y.next()).done);h=true){var b=_.value;if(b.typing){if(m.has(b.typing.text1)){this.show_error(l.default.createElement("p",null,"Program already has a lesson with text:",l.default.createElement("br",null),l.default.createElement("b",null,b.typing.text1)));return}else{var w=p[b.typing.text1];if(w)b.meta.link=w;m.add(b.typing.text1)}}}}catch(e){v=true;g=e}finally{try{if(!h&&y.return){y.return()}}finally{if(v){throw g}}}var k;if(a&&a.startAt){var x;k=a.startAt+(r||0);(x=f.lessons).splice.apply(x,[k,0].concat(O(t)))}else{k=f.lessons.length;f.lessons=f.lessons.concat(t)}if(t[0].lesson_type==E.LESSON_HEADER)this.expandSectionAt=k;f.meta=Object.assign(f.meta||{},n||{});this.save();approuter.hide_modal("add-section-modal")}},{key:"removeSection",value:function e(t){if(confirm("Are you sure?")){this.state.program.lessons.splice(t.startAt,t.lessons.length+(t.header?1:0));this.save()}}},{key:"clearProgramMeta",value:function e(){if(confirm("WARNING!!! This will remove all usefull meta from this program.\n\nOnce cleared, the editor will have a limited functionality.\n\nAre you sure?")){this.save(true)}}},{key:"removeLesson",value:function e(t){if(confirm("Are you sure?")){var n=this.state.program.lessons;for(var a in n){if(n[a].id==t.id){n.splice(a,1);approuter.hide_modal("lesson-modal");this.save();return}}}}},{key:"saveLesson",value:function e(t,n,a){approuter.hide_modal("lesson-modal");var r=this.state.program.lessons;t.slug=null;t.isDirty=true;if(t.meta&&t.meta.link){var o=this.state.program.meta.snippets.find(function(e){return e.id==t.meta.link});if(o){o.title=t.name;o.content=t.typing.text1}else delete t.meta.link}if(t.id){for(var i in r){if(r[i].id==t.id){r[i]=t;this.save();window.lesson_id=t.id;return}}}else{if(t.lesson_type!=E.LESSON_TYPING){t.instruction=null;t.typing=null}if(t.lesson_type!=E.LESSON_VIDEO){t.video=null}if(n)r.splice(n.startAt+a,0,t);else r.push(t);this.save()}}},{key:"render",value:function e(){var t=this;if(!this.state.program)return null;var n=this.state.program;var a=this.props,r=a.teamprogram,o=a.is_author;var i=[];var s={left:[],right:[]};var c=(0,m.get_available_sections)();var f={available_sections:(0,m.get_available_sections)(c),header:null,lesson_index:1,startAt:0,lessons:[],learned_before:{left:[],right:[]}};var h=1;for(var v in n.lessons){var g=n.lessons[v];if(g.lesson_type==1){(function(){if(f.header||f.lessons.length){f.learned_after={left:s.left.slice(),right:s.right.slice()};i.push(f)}var e=g;f={available_sections:(0,m.get_available_sections)(c).filter(function(t){return!e.meta||e.meta.section!=t}),header:e,lesson_index:h,learned_before:{left:s.left.slice(),right:s.right.slice()},startAt:parseInt(v),lessons:[]};if(e.meta&&e.meta.section){c=(0,m.get_available_sections)(c,e.meta.section)}})()}else{if(g.meta.type=="keys"){s.left.push(g.meta.keys[0]);s.right.push(g.meta.keys[1])}f.lessons.push(g);h++;if(this.state.focus_lesson_id==g.id&&f.header){this.state.expandedSections[f.header.id]=true}}}if(f.header||f.lessons.length)i.push(f);var y=function e(a){var r=a.section;return l.default.createElement("div",{className:"generate-options",style:{float:"right",position:"relative",zIndex:1}},l.default.createElement("button",{style:{marginLeft:15},className:"btn btn-default",type:"button",onClick:function e(){return G(l.default.createElement(se,{program:n,section:r,index_in_section:r.lessons.length,onGenerate:t.materializeLessons.bind(t),onSaveLesson:t.saveLesson.bind(t)}))}},l.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"Add Lesson"))};var _=function e(t){var n=new Set(["keys","review","travel","space"]);if(t.lesson_type!=E.LESSON_TYPING||n.has(t.meta.type))return null;var a=t.meta.review;if(!a)return{status:"open",total:0};var r=a.votes||{};if(REVIEW_ID){if(a.closed)return null;return{status:r[REVIEW_ID]?"done":"open"}}if(a.closed)return{status:"closed"};var o=0;for(var i in r){if(r[i].text==t.typing.text1)o++}return{status:"open",accepted:o,total:Object.keys(r).length}};var w=function e(t){var n=_(t);if(n&&n.status=="open")return true;return false};var k=function e(n){var a=n.lesson,r=n.needed;var o=_(a);if(!o)return null;var i;if(o.status=="closed"||o.status=="done")i=l.default.createElement("span",{style:{color:"lightgreen"},className:"glyphicon glyphicon-ok"});else{if(REVIEW_ID)i=l.default.createElement("span",{className:"glyphicon glyphicon-edit"});else i=l.default.createElement("span",{style:{color:o.total?"orangered":"lightgrey"}},o.total?o.accepted+"/"+o.total:"0 reviews")}return l.default.createElement("button",{className:"btn btn-link",onClick:function e(){return H(l.default.createElement(M,{lesson:a,needed:r,postReview:t.postReview.bind(t)}))}},i)};var x=function e(){var a=new Date;a.setMinutes(a.getMinutes()+parseInt(t.reviewsHoursRef.value)*60);n.meta.reviewTime=a.toISOString();t.save();approuter.hide_modal("set-review-time-modal")};var N=function e(){delete n.meta.reviewTime;n.meta={};t.save();approuter.hide_modal("set-review-time-modal")};var S="",C=false;if(n.meta.reviewTime){var O=new Date;var T=new Date(n.meta.reviewTime);var I=(T-O)/(1e3*60);if(I<0){C=true;I=-I}if(I>0){if(I<60)S=Math.round(I)+" minutes";else if(I<24*60)S=Math.round(I/60)+" hours";else S=Math.round(I/24/60)+" day"+(I/24/60>=1.5?"s":"")}}var P=function e(){var a=true;var r=false;var o=undefined;try{for(var i=n.lessons[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;if(s.lesson_type==E.LESSON_HEADER)t.state.expandedSections[s.id]=true}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}t.forceUpdate()};var R=function e(){var a=true;var r=false;var o=undefined;try{for(var i=n.lessons[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;if(s.lesson_type==E.LESSON_HEADER)t.state.expandedSections[s.id]=false}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}t.setState({focus_lesson_id:0})};var A=function e(t){var n=t.lessons.filter(function(e){var t=_(e);return t&&(t.total>0||t.status=="done")}).length;if(n>0)return l.default.createElement("span",null," / ",l.default.createElement("small",{style:{color:"indianred",display:"inline-block",height:15}},n+(REVIEW_ID?" completed":" in review")))};var j=function e(a,r){var o=0;var i=true;var l=false;var s=undefined;try{for(var u=n.lessons[Symbol.iterator](),c;!(i=(c=u.next()).done);i=true){var d=c.value;if(d.name.indexOf(a)>=0){o++;d.name=d.name.replace(a,r)}}}catch(e){l=true;s=e}finally{try{if(!i&&u.return){u.return()}}finally{if(l){throw s}}}t.save();alert(o+" matches were found and replaced.")};this.focus_lesson_tr=null;var Y=null;var D=this.state.updates;if(D.edits)Y=D.edits+" edits";if(D.reviews)Y=(Y?Y+" and ":"")+D.reviews+" reviews";return l.default.createElement("div",null,l.default.createElement("div",{ref:"saving",style:{display:"none",zIndex:1,position:"fixed",top:0,bottom:0,left:0,right:0,background:"rgba(255,255,255,0.5)"}},l.default.createElement("h2",{style:{margin:"auto",padding:50,background:"white"}},"Saving...Please Wait")),Y&&l.default.createElement("div",{style:{position:"fixed",top:0,right:"calc(50% - 175px)",width:350,padding:20,color:"white",background:"orangered",zIndex:1111}},"There are ",l.default.createElement("b",{style:{color:"yellow"}},Y)," since the last refresh. Please reload the program to make sure you do not overwrite someone else's updates.",l.default.createElement("div",{style:{textAlign:"right",marginTop:10}},l.default.createElement("button",{className:"btn btn-primary",onClick:function e(){return t.loadLesson()}},"Reload"))),o&&l.default.createElement("div",{className:"using-corpus"},"Using corpus: ",l.default.createElement("strong",null,n.meta.corpus_name),l.default.createElement("sup",{style:{opacity:.2}},l.default.createElement("button",{className:"btn btn-xs btn-link",onClick:this.clearProgramMeta.bind(this)},"®meta"))),o&&l.default.createElement("div",{id:"corpus-toolbar"},l.default.createElement("div",{className:"container",style:{textAlign:"right"}},l.default.createElement(F,{name:n.meta.corpus_name}))),l.default.createElement("div",{style:{textAlign:"right"}},o&&l.default.createElement("div",{style:{float:"left"}},l.default.createElement("button",{className:"btn btn-xs btn-primary",style:{marginRight:10},onClick:function e(){return z(l.default.createElement(le,{save:function e(){return t.save()},program:n}))}},"Text Snippets"),l.default.createElement("button",{className:"btn btn-xs btn-default",onClick:function e(){return approuter.show_modal(l.default.createElement(u.default,{id:"title-edit-modal"},l.default.createElement("h5",null,"Mass replace a string in the title of all matched lessons"),l.default.createElement("label",null,"Match Text "),l.default.createElement("input",{id:"title-mass-edit-match",type:"text"}),l.default.createElement("label",null," Replace With "),l.default.createElement("input",{id:"title-mass-edit-replace",type:"text"})," ",l.default.createElement("button",{onClick:function e(){j((0,d.default)("#title-mass-edit-match").val(),(0,d.default)("#title-mass-edit-replace").val());approuter.hide_modal("title-edit-modal")},className:"btn btn-primary"},"Replace")))}},"Title Mass Edit")),S&&l.default.createElement("span",{className:C?"text-danger":""},"Review Time ",C?"Expired by":"Remaining",": ",l.default.createElement("strong",{style:{whiteSpace:"nowrap"}},S)),o&&l.default.createElement("button",{className:"btn btn-primary btn-sm",onClick:function e(){return approuter.show_modal(l.default.createElement(u.default,{id:"set-review-time-modal"},l.default.createElement("br",null),l.default.createElement("h5",null,"Set review period for"),l.default.createElement("select",{ref:function e(n){return t.reviewsHoursRef=n},className:"form-control"},l.default.createElement("option",{value:24},"1 Day"),l.default.createElement("option",{value:3*24},"3 Days"),l.default.createElement("option",{value:7*24},"1 Week"),l.default.createElement("option",{value:14*24},"2 Weeks"),l.default.createElement("option",{value:30*24},"1 Month")),l.default.createElement("br",null),l.default.createElement("button",{className:"btn btn-primary",onClick:x},"Set Review Time"),n.meta.reviewTime&&l.default.createElement("button",{style:{marginLeft:15},className:"btn btn-danger",onClick:N},"Clear")))},style:{marginBottom:15,marginLeft:15}},n.meta.reviewTime?"Reset":"Set Review Time")),l.default.createElement("div",null,l.default.createElement("label",{style:{float:"right",cursor:"pointer"}},l.default.createElement("input",{type:"checkbox",checked:this.state.filterNeedReview,onChange:function e(n){return t.setState({filterNeedReview:n.target.checked})}})," Show with Need Review only"),l.default.createElement("span",{style:{display:"inline-block",margin:"0 30px 0 -50px",fontSize:20,lineHeight:1.5},className:"glyphicon glyphicon-chevron-down",onClick:function e(){return window.scrollTo(0,document.body.scrollHeight)}}),l.default.createElement("button",{className:"btn btn-xs btn-link",onClick:P.bind(this)},"+ Expand All")," | ",l.default.createElement("button",{className:"btn btn-xs btn-link",onClick:R.bind(this)},"- Collapse All"),l.default.createElement("br",null)),i.map(function(e,a){return l.default.createElement("div",{key:a},l.default.createElement("div",{className:"add-items-row"},o&&l.default.createElement(V,{section:e,program:n,learned:e.learned_before,onGenerate:t.materializeLessons.bind(t)})),e.header&&!t.state.expandedSections[e.header.id]?l.default.createElement("div",{className:"section-tile",key:a},l.default.createElement("h4",{style:{marginBottom:5,marginTop:0}},l.default.createElement("button",{className:"btn btn-link",style:{outline:"none"},onClick:function n(){t.state.expandedSections[e.header.id]=true;t.setState({focus_lesson_id:e.header.id})}},l.default.createElement("span",{className:"glyphicon glyphicon-plus"})),e.header.name,l.default.createElement("div",{style:{paddingLeft:40}},o?l.default.createElement("small",{style:{color:"cornflowerblue"}},e.lessons.length," lessons"):l.default.createElement("small",{style:{color:"cornflowerblue"}},e.lessons.filter(function(e){return(_(e)||{}).status=="open"}).length," lessons to review"),A(e)))):l.default.createElement("div",{key:a},l.default.createElement("h4",{className:"section-header-row"},e.header&&l.default.createElement("button",{style:{outline:"none"},onClick:function n(){t.state.expandedSections[e.header.id]=false;t.setState({focus_lesson_id:e.header.id})},className:"btn btn-link"},l.default.createElement("span",{className:"glyphicon glyphicon-minus"})),o?l.default.createElement("span",null,e.header?l.default.createElement("a",{onClick:function a(){G(l.default.createElement(se,{program:n,lesson:e.header,onGenerate:t.materializeLessons.bind(t),onDelete:t.removeLesson.bind(t),onSaveLesson:t.saveLesson.bind(t),section:e,index_in_section:-1}));t.setState({focus_lesson_id:e.header.id})}},e.header.name):"No Header",l.default.createElement("button",{style:{marginLeft:20},className:"btn btn-sm btn-default",onClick:function n(){return t.removeSection(e)}},"Remove")):e.header?e.header.name:"No Header"),l.default.createElement("table",{className:"table table-bordered table-hover",style:{marginBottom:10}},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{colSpan:"2"},"Index all/sec"),l.default.createElement("th",null,"Name"),l.default.createElement("th",null,"Engine"),l.default.createElement("th",null),l.default.createElement("th",null,"Icon"),l.default.createElement("th",null,"Min WPM"),l.default.createElement("th",null,"Goal WPM"),l.default.createElement("th",null,"Score"),l.default.createElement("th",null,"Review"))),l.default.createElement("tbody",null,e.lessons.filter(function(e){return t.state.filterNeedReview?w(e):true}).map(function(a,i){var s=(0,p.compute_needed_keys)(a,e,i);var u=a.typing&&a.typing.is_dynamic;var c=a.typing&&a.typing.render_engine==E.TYPING_LOGOGRAPHIC;var d=!u&&!a.meta.skip_warnings&&a.typing&&ce(a,a.typing.text1,s);var f=a.typing&&(u?"DYNAMIC CONTENT":a.typing.text1);var m=f&&ue(a);var h=a.id==t.state.focus_lesson_id;return l.default.createElement("tr",{key:i,ref:function e(n){if(h)t.focus_lesson_tr=n},style:{outline:h?"solid 2px orangered":"inherit",background:h?"#f6f6f6":"inherit"}},l.default.createElement("td",null,e.lesson_index+i),l.default.createElement("td",null,i+1),l.default.createElement("td",null,l.default.createElement("a",{href:"/sportal/program-"+r.program_id+"/"+a.id+".play"},a.name||"--")),l.default.createElement("td",null,a.typing?E.RENDER_ENGINES[a.typing.render_engine]:"Video"),c?l.default.createElement("td",null,l.default.createElement(b.default.LogogramsView,{logograms:JSON.parse(f)})):l.default.createElement("td",{style:{position:"relative",paddingBottom:20}},f&&f.split("\n").map(function(e,t){return l.default.createElement("div",{style:{overflowWrap:"break-word",wordBreak:"break-all",maxHeight:200,overflow:"auto"},key:t},e)}),f&&l.default.createElement("span",{style:{position:"absolute",right:2,bottom:1,color:d&&d[0]<0?"red":"#a9a9a9",fontSize:14,fontFamily:"monospace"}},l.default.createElement("sup",null,f.length),"/",l.default.createElement("sub",null,m))),l.default.createElement("td",null,l.default.createElement("div",{style:{margin:"-30px auto",transform:"scale(0.6)"},className:"lesson-icon "+a.key})),l.default.createElement("td",null,a.typing&&a.typing.min_wpm),l.default.createElement("td",null,a.typing&&a.typing.goal_wpm),l.default.createElement("td",null,a.score),l.default.createElement("td",{style:{padding:10,textAlign:"center"},className:!o?"action-cell":""},l.default.createElement(k,{lesson:a,needed:s})),o&&l.default.createElement("td",{style:{padding:10,textAlign:"center"},className:"action-cell"},l.default.createElement("button",{className:"btn btn-link",onClick:function r(){G(l.default.createElement(se,{program:n,lesson:a,onGenerate:t.materializeLessons.bind(t),onDelete:t.removeLesson.bind(t),onSaveLesson:t.saveLesson.bind(t),section:e,index_in_section:i}));t.setState({focus_lesson_id:a.id})}},"Edit"),l.default.createElement("div",null,d&&d[0]>=0&&l.default.createElement("span",{style:{color:"orangered"},className:"glyphicon glyphicon-exclamation-sign"}))))}))),o&&l.default.createElement(y,{section:e}),e.header&&l.default.createElement("button",{style:{outline:"none"},onClick:function n(a){t.state.expandedSections[e.header.id]=false;L(a.target.closest("div").firstChild);t.setState({focus_lesson_id:e.header.id})},className:"btn btn-link"},l.default.createElement("span",{className:"glyphicon glyphicon-minus"}))))}),l.default.createElement("div",{className:"add-items-row",style:{marginBottom:100}},l.default.createElement("span",{style:{position:"absolute",left:-50,fontSize:20,lineHeight:1.5},className:"pull-left glyphicon glyphicon-chevron-up",onClick:function e(){return window.scrollTo(0,0)}}),o&&l.default.createElement(V,{section:{available_sections:(0,m.get_available_sections)(c)},program:n,learned:s,onGenerate:this.materializeLessons.bind(this)})))}}]);return t}(l.default.Component);var M=function(e){P(t,e);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={suggestedText:"",suggesting:false};return n}a(t,[{key:"onSelect",value:function e(t){if(confirm("Are you sure? \n\nThis lesson's review session will end, and all reviews will be removed.\nYou may reopen this lesson for another round of reviews later.")){this.props.postReview(this.props.lesson,{action:"close",text:t})}}},{key:"onReopen",value:function e(){this.props.postReview(this.props.lesson,{action:"open"})}},{key:"onVote",value:function e(t){if(!t.trim().length)return;this.props.postReview(this.props.lesson,{text:t})}},{key:"render",value:function e(){var t=this;var n=this.props,a=n.lesson,r=n.needed;var o=a.meta.review||{};var i=o.votes||{};var s=a.typing&&a.typing.render_engine==E.TYPING_LOGOGRAPHIC;var u=C({},a.typing.text1,[]);for(var c in i){var d=i[c];if(!u[d.text])u[d.text]=[];u[d.text].push({user:d.user,date:d.date})}var f=[];for(var p in u){f.push({text:p,votes:u[p]})}f.sort(function(e,t){return t.votes.length-e.votes.length});var m=function e(t){if(t==E.TYPING_LEFT_ANCHOR||t==E.TYPING_RIGHT_ANCHOR)return"This lesson requires text that should be typed only with one hand.";if(t==E.TYPING_GAME_BALLOON_VALLEY||t==E.TYPING_GAME_TEMPLE_BASH)return"This lesson's game focuses on character typing. Spaces are not needed.";if(t==E.TYPING_GAME_APPLE_THIEVES||t==E.TYPING_GAME_MONSTER_ATTACK)return"This lesson's game focuses on word typing. Do NOT include very short words or punctuation.";return null};return l.default.createElement("div",{style:{width:"90vw",minHeight:300}},l.default.createElement("h3",null,"Review Lesson ",a.name),l.default.createElement("table",{style:{width:"100%"},className:"table"},l.default.createElement("tbody",null,f.map(function(e,n){return l.default.createElement("tr",{key:n},l.default.createElement("td",{style:{paddingRight:15}},l.default.createElement("span",{className:"hint--right hint--rounded","aria-label":(e.text==a.typing.text1?"Original Text\n\n":"Suggested\n\n")+e.votes.map(function(e){return e.user+" "+new Date(e.date).toLocaleString()}).join("\n"),style:{cursor:"default",width:40,lineHeight:1.5,textAlign:"center",fontSize:18,background:e.text==a.typing.text1?"greenyellow":"#ddd"}},e.votes.length)),l.default.createElement("td",{style:{padding:"15px 8px"}},s&&e.text==a.typing.text1?l.default.createElement(b.default.LogogramsView,{logograms:JSON.parse(e.text)}):e.text),l.default.createElement("td",{style:{textAlign:"center",width:90}},REVIEW_ID?l.default.createElement("button",{className:"btn btn-link",onClick:function n(){return t.onVote(e.text)}},"Accept"):!o.closed&&(!s||e.text==a.typing.text1)&&l.default.createElement("button",{className:"btn btn-link",onClick:function n(){return t.onSelect(s?"":e.text)}},s?"Close Review":"Select")))}))),l.default.createElement("hr",null),a.typing&&l.default.createElement("h6",{className:"text-danger"},m(a.typing.render_engine)),REVIEW_ID?this.state.suggesting?l.default.createElement("div",{style:{display:"flex"}},l.default.createElement(de,{isReview:true,needed:s?[]:r,lesson:a,text:this.state.suggestedText,onChange:function e(n){return t.setState({suggestedText:n})}}),l.default.createElement("div",{style:{width:90,textAlign:"center"}},l.default.createElement("button",{className:"btn btn-link",onClick:function e(){return t.onVote(t.state.suggestedText)},style:{float:"right"}},"Suggest"))):l.default.createElement("div",{className:"btn btn-link",onClick:function e(){return t.setState({suggesting:true})}},s?"Make a suggestion":"Suggest alternative text"):l.default.createElement("div",{style:{textAlign:"right"}},o.closed&&l.default.createElement("button",{className:"btn btn-link",onClick:this.onReopen.bind(this)},"Reopen for Review")))}}]);return t}(l.default.Component);var j=function e(t){return approuter.show_modal(l.default.createElement(u.default,{id:"add-section-modal"},t))};var G=function e(t){return approuter.show_modal(l.default.createElement(u.default,{id:"lesson-modal"},t))};var Y=function e(t){return approuter.hide_modal("lesson-modal")};var H=function e(t){return approuter.show_modal(l.default.createElement(u.default,{id:"review-modal"},t))};var D=function e(t){return approuter.hide_modal("review-modal")};var z=function e(t){return approuter.show_modal(l.default.createElement(u.default,{id:"text-snippets-modal"},t))};var B=function e(t){return approuter.hide_modal("text-snippets-modal")};function U(e,t,n){return n.meta.imported||t.available_sections.indexOf(e)>=0}var V=function e(t){var n=t.onGenerate,a=t.section,r=t.program,o=t.learned,i=t.dropup;return l.default.createElement("div",{className:"dropdown generate-options "+(i?"dropup":""),style:{display:"inline-block"}},l.default.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown"},l.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"Add Section"),l.default.createElement("ul",{className:"dropdown-menu"},U("home-row",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(W,{section:a,onGenerate:n}))}},"Home Row")),U("top-row",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(K,{program:r,section:a,onGenerate:n,learned:o}))}},"Top Row")),U("bottom-row",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(J,{section:a,program:r,onGenerate:n,learned:o}))}},"Bottom Row")),U("basic-level-1",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(X,{section:a,onGenerate:n,learned:o}))}},"Basic Level 1")),U("tricky-words",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(re,{section:a,onGenerate:n,learned:o}))}},"Tricky Words")),U("shift-key",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(ie,{section:a,program:r,onGenerate:n,learned:o}))}},"Shift Key")),U("common-patterns",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(oe,{section:a,onGenerate:n,learned:o}))}},"Common Patterns")),U("basic-level-2",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement($,{program:r,section:a,onGenerate:n,learned:o}))}},"Basic Level 2")),U("numbers",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(ee,{section:a,program:r,onGenerate:n,learned:o}))}},"Numbers")),U("basic-level-3",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(Z,{program:r,section:a,onGenerate:n,learned:o}))}},"Basic Level 3")),U("numbered-symbols",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(te,{section:a,program:r,onGenerate:n,learned:o}))}},"Symbols")),U("more-symbols",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(ne,{section:a,onGenerate:n,program:r}))}},"More Symbols")),U("advanced-levels",a,r)&&l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(ae,{section:a,program:r,onGenerate:n,learned:o}))}},"Advanced Levels")),a.available_sections.length>0&&l.default.createElement("li",{role:"separator",className:"divider"}),l.default.createElement("li",null,l.default.createElement("a",{onClick:function e(){return j(l.default.createElement(q,{section:a,onGenerate:n,learned:o}))}},"Key Pair"))))};var F=function e(t){var n=t.name;return l.default.createElement("div",{style:{marginLeft:15,display:"inline-block"}},"Corpus: ",l.default.createElement("select",{className:"form-control",style:{display:"inline",width:"inherit",marginBottom:0,verticalAlign:"middle"},defaultValue:n,onChange:function e(t){return window.corpusName=t.target.value}},Object.keys(p.corpora).map(function(e){return p.corpora[e].map(function(t){return l.default.createElement("option",{value:t,key:t},t," (",e,")")})})))};var q=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.refs.key1.value.trim()[0]+this.refs.key2.value.trim()[0];if(n.length<2)return;var a={type:"new-key-pair",keys:n,fingers:[this.refs.finger1.value,this.refs.finger2.value],learned:this.props.learned};(0,p.generate_lessons)(a,function(e){return t.props.onGenerate(e,{},t.props.section,t.props.index_in_section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"3 Lesson New Character Combo"),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-6"},"Character 1:",l.default.createElement("input",{type:"text",ref:"key1",className:"form-control"}),"Finger:",l.default.createElement("input",{type:"text",ref:"finger1",defaultValue:"left index finger",className:"form-control"})),l.default.createElement("div",{className:"col-sm-6"},"Character 2:",l.default.createElement("input",{type:"text",ref:"key2",className:"form-control"}),"Finger:",l.default.createElement("input",{type:"text",ref:"finger2",defaultValue:"right index finger",className:"form-control"}))),l.default.createElement("hr",null),l.default.createElement(fe,{labels:E.NEW_KEY_LABELS}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var W=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n={type:"home-row",keys:this.refs.keys.value.trim().substr(0,10)};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{home_keys:n.keys},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Teach the home row"),l.default.createElement("p",null,"Type the 10 home keys from left to right (exclude the key near the enter):"),l.default.createElement("input",{className:"form-control",ref:"keys",defaultValue:"asdfghjkl;",placeholder:"asdfghjkl;"}),l.default.createElement("hr",null),l.default.createElement(fe,{labels:E.NEW_KEY_LABELS.concat(E.FINGER_LABELS)}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var K=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n={type:"top-row",keys:this.refs.keys.value.trim().substr(0,10),home_keys:this.props.program.meta.home_keys,learned:this.props.learned};(0,p.generate_lessons)(n,function(e,a){return t.props.onGenerate(e,{top_keys:n.keys},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Teach the top row"),l.default.createElement("p",null,"Type the first 10 top keys from left to right (the row above from home row):"),l.default.createElement("input",{className:"form-control",ref:"keys",defaultValue:"qwertyuiop",placeholder:"qwertyuiop"}),l.default.createElement("hr",null),l.default.createElement("p",null,l.default.createElement("i",null,"Hint:")," These are the keys learned so far: ",this.props.learned.left.join(""),", ",this.props.learned.right.join("")),l.default.createElement("hr",null),l.default.createElement(fe,{labels:E.NEW_KEY_LABELS.concat(E.FINGER_LABELS)}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var J=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.props.program.meta;var a={type:"bottom-row",keys:this.refs.keys.value.trim().substr(0,10),learned:this.props.learned,home_keys:n.home_keys,top_keys:n.top_keys};(0,p.generate_lessons)(a,function(e,n){return t.props.onGenerate(e,{bottom_keys:a.keys},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Teach the bottom row"),l.default.createElement("p",null,"Type the first 10 bottom keys from left to right (the row below the home row):"),l.default.createElement("input",{className:"form-control",ref:"keys",defaultValue:"zxcvbnm,./",placeholder:"zxcvbnm,./"}),l.default.createElement("hr",null),l.default.createElement("p",null,l.default.createElement("i",null,"Hint:")," These are the keys learned so far: ",this.props.learned.left.join(""),", ",this.props.learned.right.join("")),l.default.createElement("hr",null),l.default.createElement(fe,{labels:["great-work","white-space"].concat(E.NEW_KEY_LABELS.concat(E.FINGER_LABELS))}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var X=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n={type:"basic-level-1",learned:this.props.learned};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Basic level 1"),l.default.createElement("p",null,"This section is comprised of a set of 25 fixed texts combined with a few games:"),l.default.createElement("hr",null),l.default.createElement(fe,{labels:(0,x.default)(1,26).map(function(e){return"basic-"+e})}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var $=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n={type:"basic-level-2",lessons:this.refs.lessons.value.split("\n\n"),learned:this.props.learned};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Basic level 2"),l.default.createElement("p",null,"Basic Level 2 texts contain lower and upper case letters, and some punctuation:"),l.default.createElement("p",null,"Paste bellow 24 lessons, separated by and empty line, that you want to add on this section. First line of the lesson is the title.",l.default.createElement("br",null),"If there are not enough lines, random texts will be randomly chosen for all the remaining lessons."),l.default.createElement("textarea",{style:{minHeight:400},ref:"lessons",className:"form-control"}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("div",null,l.default.createElement(Q,{program:this.props.program,learned:this.props.learned,handler:this}),l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate")))}}]);return t}(l.default.Component);var Q=function e(t){var n=t.program,a=t.learned,r=t.handler;return l.default.createElement("button",{className:"btn btn-link",onClick:function e(){z(l.default.createElement(le,{program:n,neeed:a,onSelect:function e(t){var n=r.refs.lessons;if(n.value.trim().length)n.value=n.value.trim()+"\n\n";n.value+=t.map(function(e){return e.title+"\n"+e.content}).join("\n\n");B()}}))}},"Select Snippets")};var Z=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n={type:"basic-level-3",lessons:this.refs.lessons.value.split("\n\n"),learned:this.props.learned};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Basic level 3"),l.default.createElement("p",null,"Basic Level 3 texts contain numbers, lower and upper case letters, and some punctuation:"),l.default.createElement("p",null,"Paste bellow 24 lessons, separated by and empty line, that you want to add on this section. First line of the lesson is the title.",l.default.createElement("br",null),"If there are not enough lines, random texts will be randomly chosen for all the remaining lessons."),l.default.createElement("textarea",{style:{minHeight:400},ref:"lessons",className:"form-control"}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("div",null,l.default.createElement(Q,{program:this.props.program,learned:this.props.learned,handler:this}),l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate")))}}]);return t}(l.default.Component);var ee=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.props.program.meta;var a=this.refs.withShift.checked;var r={type:"numbers",learned:this.props.learned,home_keys:a?n.shift_home_keys:n.home_keys,top_keys:a?n.shift_top_keys:n.top_keys,bottom_keys:a?n.shift_bottom_keys:n.bottom_keys};(0,p.generate_lessons)(r,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Numbers"),l.default.createElement("p",null,"This section gradually introduces the ten digits 0-9 keys, which are located above the top row."),l.default.createElement("div",{className:"checkbox"},l.default.createElement("label",{style:{paddingLeft:25}},l.default.createElement("input",{type:"checkbox",ref:"withShift",style:{marginLeft:-22,marginTop:2}})," Numbers are using Shift (shift keys must have beed introduced before)")),l.default.createElement("hr",null),l.default.createElement("p",null,"The mappings below should maintain the same digits across:"),l.default.createElement(fe,{labels:(0,x.default)(1,7).map(function(e){return"numbers-"+e}).concat(E.NEW_KEY_EXTRA)}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var te=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.props.program.meta;var a={type:"numbered-symbols",symbols:this.refs.symbols.value,learned:this.props.learned,home_keys:n.home_keys,top_keys:n.top_keys,bottom_keys:n.bottom_keys,shift_home_keys:n.shift_home_keys,shift_top_keys:n.shift_top_keys,shift_bottom_keys:n.shift_bottom_keys};(0,p.generate_lessons)(a,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Symbols"),l.default.createElement("p",null,"Introducing the symbols associated with the numbered keys:"),l.default.createElement("p",null,"Type below the 10 symbols that can be typed using SHIFT and a digit key, in order from 1,2...,9,0."),l.default.createElement("input",{className:"form-control",ref:"symbols",defaultValue:"!@#$%^&*()",placeholder:"!@#$%^&*()"}),l.default.createElement("p",null,"Content on ",l.default.createElement("strong",null,"symbols-0")," is for the final practice lesson that will utilize all symbols in a smart way such that the text makes sense"),l.default.createElement(fe,{labels:["symbols-0"].concat(E.NEW_KEY_EXTRA)}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var ne=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.props.program.meta;var a={type:"other-symbols",symbols:this.refs.symbols.value,shift_symbols:this.refs.shiftSymbols.value,home_keys:n.home_keys,top_keys:n.top_keys,bottom_keys:n.bottom_keys};(0,p.generate_lessons)(a,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"More Symbols"),l.default.createElement("p",null,"Type below 16 more symbols, in the order that you want them taught (should be half with shift and half without):"),l.default.createElement("input",{className:"form-control",ref:"symbols",defaultValue:"`~'\"-=_+[]{}\\|<>",placeholder:"`~'\"-=_+[]{}\\|<>"}),l.default.createElement("p",null,"Which ones are typed with shift:"),l.default.createElement("input",{className:"form-control",ref:"shiftSymbols",defaultValue:'~"_+{}|<>',placeholder:'~"_+{}|<>'}),l.default.createElement("p",null,"First 8 of the following texts should correspond with the symbols entered above, in the save order.",l.default.createElement("br",null),"If they don't, then you need to change them appropriately:"),l.default.createElement(fe,{labels:["symbols-1","symbols-2","symbols-3","symbols-4","symbols-5","symbols-6","symbols-7","symbols-8","symbols-all-1","symbols-all-2","symbols-all-3"].concat(E.NEW_KEY_EXTRA)}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var ae=function(e){P(t,e);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};n.level=1;var a=e.program.lessons;if(a.length>0){var r=a.length-1;while(r>=0){if(a[r].meta&&a[r].meta.advanced){n.level=a[r].meta.advanced+1;break}r--}}return n}a(t,[{key:"build",value:function e(){var t=this;var n={type:"advanced-levels",level:this.level,lessons:this.refs.lessons.value.split("\n\n"),learned:this.props.learned};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}},{key:"render",value:function e(){var t=this;var n=this.props.program.meta;if(this.level>=10)return l.default.createElement("h2",null,"No more advanced levels available");return l.default.createElement("div",null,l.default.createElement("h2",null,"Advanced Level ",this.level),l.default.createElement("p",null,"Advanced Levels texts contain most of the characters used in the written language:"),l.default.createElement("p",null,"Paste bellow ",this.level>3?30:24," lessons, separated by and empty line, that you want to add on this section. First line of the lesson is the title.",l.default.createElement("br",null)),l.default.createElement("textarea",{style:{minHeight:420},ref:"lessons",className:"form-control"}),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("div",null,l.default.createElement(Q,{program:this.props.program,learned:this.props.learned,handler:this}),l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate")))}}]);return t}(l.default.Component);var re=function(e){P(t,e);a(t,[{key:"build",value:function e(){var t=this;var n={type:"tricky-words",learned:this.props.learned,min_wpm:this.refs.min_wpm.value,goal_wpm:this.refs.goal_wpm.value,words:this.words.map(function(e){return e.value}),icons:this.icons.map(function(e){return e.value})};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}}]);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};n.words=new Array(10);n.words=["jewerly raspberry","achieve believe","breath breathe","dissapear dissappoint","accept except","forward foreword","prefer defer","to too","advice advise","by bye buy"];n.icons=["spell","spell","misused","spell","misused","homonym","spell","homonym","misused","homonym"];return n}a(t,[{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Tricky Words"),l.default.createElement("p",null,"This section is comprised of a set of 10 lesson focusing on pairs of tricky words:"),l.default.createElement("hr",null),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-6"},"Min WPM:",l.default.createElement("input",{type:"text",ref:"min_wpm",defaultValue:"13",className:"form-control"})),l.default.createElement("div",{className:"col-sm-6"},"Goal WPM:",l.default.createElement("input",{type:"text",ref:"goal_wpm",defaultValue:"20",className:"form-control"}))),l.default.createElement("p",null,"Add 10 pairs of tricky words (a pair is two or three words separated by space):"),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-7"},"Words:"),l.default.createElement("div",{className:"col-sm-5"},"Relation type: (spell/misused/homonym)")),(0,x.default)(0,10).map(function(e){return l.default.createElement("div",{className:"row",key:e},l.default.createElement("div",{className:"col-sm-7"},l.default.createElement("input",{type:"text",ref:function n(a){return t.words[e]=a},defaultValue:t.words[e],className:"form-control"})),l.default.createElement("div",{className:"col-sm-5"},l.default.createElement("input",{type:"text",ref:function n(a){return t.icons[e]=a},defaultValue:t.icons[e],className:"form-control"})))}),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var oe=function(e){P(t,e);a(t,[{key:"build",value:function e(){var t=this;var n={type:"common-patterns",learned:this.props.learned,min_wpm:this.refs.min_wpm.value,goal_wpm:this.refs.goal_wpm.value,drums:this.drums.map(function(e){return e.value})};(0,p.generate_lessons)(n,function(e){return t.props.onGenerate(e,{},t.props.section)})}}]);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};n.words=new Array(10);n.drums=["the","ing","tion","est","and","int","ship","nth","ear","ore"];return n}a(t,[{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Common Patterns"),l.default.createElement("p",null,"This section is comprised of a set of 10 lesson focusing on pairs of tricky words:"),l.default.createElement("hr",null),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-6"},"Min WPM:",l.default.createElement("input",{type:"text",ref:"min_wpm",defaultValue:"10",className:"form-control"})),l.default.createElement("div",{className:"col-sm-6"},"Goal WPM:",l.default.createElement("input",{type:"text",ref:"goal_wpm",defaultValue:"20",className:"form-control"}))),l.default.createElement("p",null,"Add 10 commpon patterns (a pattern is a string of 3 to 5 letters that is used very frequently in the language:"),(0,x.default)(0,10).map(function(e){return l.default.createElement("div",{key:e},l.default.createElement("input",{type:"text",ref:function n(a){return t.drums[e]=a},defaultValue:t.drums[e],className:"form-control"}))}),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var ie=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={},n),I(a,r)}a(t,[{key:"build",value:function e(){var t=this;var n=this.refs.homeRow.value.trim().substr(0,10);var a=this.refs.topRow.value.trim().substr(0,10);var r=this.refs.bottomRow.value.trim().substr(0,10);var o=this.props.program.meta;var i={type:"shift-key",home_row:o.home_keys,top_row:o.top_keys,bottom_row:o.bottom_keys,shift_home_row:n,shift_top_row:a,shift_bottom_row:r,learned:this.props.learned};var l={shift_top_keys:a,shift_home_keys:n,shift_bottom_keys:r};(0,p.generate_lessons)(i,function(e){return t.props.onGenerate(e,l,t.props.section)})}},{key:"render",value:function e(){var t=this;return l.default.createElement("div",null,l.default.createElement("h2",null,"Teach the SHIFT Key"),l.default.createElement("p",null,"Type in the corresponding SHIFT keys for the top, home and bottom rows. ",l.default.createElement("strong",null,"Use SHIFT key to enter the characters. Do NOT use Caps Lock!")),l.default.createElement("p",null,l.default.createElement("label",null,"Top Row"),l.default.createElement("input",{className:"form-control",ref:"topRow",defaultValue:"QWERTYUIOP",placeholder:"QWERTYUIOP"})),l.default.createElement("p",null,l.default.createElement("label",null,"Home Row"),l.default.createElement("input",{className:"form-control",ref:"homeRow",defaultValue:"ASDFGHJKL:",placeholder:"ASDFGHJKL:"})),l.default.createElement("p",null,l.default.createElement("label",null,"Bottom Row"),l.default.createElement("input",{className:"form-control",ref:"bottomRow",defaultValue:"ZXCVBNM<>?",placeholder:"ZXCVBNM<>?"})),l.default.createElement("hr",null),this.state.generating?l.default.createElement("span",{style:{padding:15},className:"pull-right"},"Generating Lessons...Please Wait..."):l.default.createElement("button",{className:"pull-right btn btn-primary",onClick:function e(){t.setState({generating:true});t.build()}},"Generate"))}}]);return t}(l.default.Component);var le=function(e){P(t,e);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.program.meta||{};n.state={page:0,dirty:false,add_mode:false,selected:new Set,hideLinked:!!(e.lesson||e.onSelect)};n.linkedSnippets=e.program.lessons.filter(function(t){return t.meta.link&&(!e.lesson||e.lesson.id!=t.id)}).map(function(e){return e.meta.link});n.refreshSnippets(e,a.snippets);return n}a(t,[{key:"refreshSnippets",value:function e(t,n){var a=this;this.state.snippets=n;var r=n||[];r=r.concat();if(this.state.hideLinked)r=r.filter(function(e){return!~a.linkedSnippets.indexOf(e.id)});if(t.needed)r=r.filter(function(e){return e.content.match(new RegExp("^[\\s"+t.needed.join("")+"]*$"))});this.state.filteredSnippets=r.sort(function(e,t){return e.content.length-t.content.length})}},{key:"componentWillUnmount",value:function e(){if(this.state.dirty&&this.props.save)this.props.save()}},{key:"render",value:function e(){var t=this;var n=5;var a=this.props,r=a.program,o=a.save;var i=this.props,s=i.onDone,u=i.lesson,c=i.needed;var d=this.state,f=d.snippets,p=d.filteredSnippets,m=d.page,h=d.add_mode,v=d.selected;if(h){return l.default.createElement("div",{style:{width:"80vw",minHeight:580}},l.default.createElement("h4",{style:{marginTop:0}},"Paste the texts that you want to add. Texts are separated by blank lines. First line is the title."),l.default.createElement("textarea",{className:"form-control",ref:"textareaAdd",style:{width:"100%",height:"60vh"},placeholder:"Text 1: Title\nText 1: Contents\n\nText 2: Title\nText 2: Contents\n\n..."}),l.default.createElement("button",{className:"pull-right btn btn-primary btn-sm",onClick:function e(){var n=t.refs.textareaAdd.value.split("\n\n");if(!r.meta.snippets)r.meta.snippets=[];var a=r.meta.snippets;var o=a.length?parseInt(a[a.length-1].id)+1:1;var i=true;var l=false;var s=undefined;try{for(var u=n[Symbol.iterator](),c;!(i=(c=u.next()).done);i=true){var d=c.value;var f=d.split("\n")[0].trim();var p=d.substr(f.length+1).trim();if(!p.length)continue;a.push({id:o,title:f,content:p});o++}}catch(e){l=true;s=e}finally{try{if(!i&&u.return){u.return()}}finally{if(l){throw s}}}t.refreshSnippets(t.props,a);t.setState({dirty:true,add_mode:false})}},"Done"))}var g=p.slice(m*n,(m+1)*n)||[];var y=true;var _=true;var b=false;var w=undefined;try{for(var E=g[Symbol.iterator](),k;!(_=(k=E.next()).done);_=true){var x=k.value;if(!v.has(x.id)){y=false;continue}}}catch(e){b=true;w=e}finally{try{if(!_&&E.return){E.return()}}finally{if(b){throw w}}}return l.default.createElement("div",{style:{width:"80vw",position:"relative"}},l.default.createElement("table",{className:"table table-condensed",style:{marginBottom:0,minHeight:480}},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{style:{width:40}},l.default.createElement("label",{style:{marginBottom:0,fontWeight:"bold"}},l.default.createElement("input",{style:{marginRight:10},onChange:function e(){var n=true;var a=false;var r=undefined;try{for(var o=g[Symbol.iterator](),i;!(n=(i=o.next()).done);n=true){var l=i.value;if(y)v.delete(l.id);else v.add(l.id)}}catch(e){a=true;r=e}finally{try{if(!n&&o.return){o.return()}}finally{if(a){throw r}}}t.forceUpdate()},type:"checkbox",checked:y}))),l.default.createElement("th",null,"Title & Content ",l.default.createElement("small",{style:{fontWeight:"normal"}},"(First line is the title)")),l.default.createElement("th",{style:{width:100}},l.default.createElement("label",null,l.default.createElement("input",{type:"checkbox",style:{marginLeft:10},checked:this.state.hideLinked,onChange:function e(){t.state.hideLinked=!t.state.hideLinked;t.refreshSnippets(t.props,f);t.setState({page:0})}})," ",l.default.createElement("div",{style:{display:"inline-block",width:50,verticalAlign:"middle",lineHeight:1,marginLeft:3}},"Hide Linked"))))),l.default.createElement("tbody",null,g.length?g.map(function(e){return l.default.createElement("tr",{key:e.id},l.default.createElement("td",null,l.default.createElement("input",{type:"checkbox",checked:v.has(e.id),onChange:function n(){if(v.has(e.id))v.delete(e.id);else v.add(e.id);t.forceUpdate()}})),l.default.createElement("td",null,l.default.createElement("textarea",{className:"form-control",style:{width:"100%",minHeight:60},value:e.title+"\n"+e.content,onChange:function n(a){var o=a.target.value;e.title=o.split("\n")[0];e.content=o.substr(e.title.length+1);if(~t.linkedSnippets.indexOf(e.id)){var i=r.lessons.find(function(t){return t.meta.link==e.id});if(i){i.name=e.title;i.typing.text1=e.content}}t.setState({dirty:true})}}),l.default.createElement("div",{style:{float:"right",marginTop:-8}},e.content.length," characters")),l.default.createElement("td",null,u?e.id==u.meta.link?"Selected":~t.linkedSnippets.indexOf(e.id)?l.default.createElement("i",{className:"badge",style:{padding:5,background:"#28a745"}},"Linked"):l.default.createElement("button",{style:{marginTop:5},className:"btn btn-primary",onClick:function t(){return s(e)}},"Select"):~t.linkedSnippets.indexOf(e.id)?"Linked":"Available"))}):l.default.createElement("tr",null,l.default.createElement("td",{colSpan:"3"},l.default.createElement("h3",null,"No snippets available yet"))))),l.default.createElement("div",{style:{textAlign:"right"}},l.default.createElement("button",{className:"btn btn-xs",disabled:m==0,onClick:function e(){return t.setState({page:m-1})}},"Prev Page"),l.default.createElement("button",{className:"btn btn-xs",disabled:m*n>=p.length-n,onClick:function e(){return t.setState({page:m+1})}},"Next Page")),l.default.createElement("hr",null),l.default.createElement("div",{className:"btn-group btn-group-sm"},l.default.createElement("button",{className:"btn btn-warning",disabled:!v.size,onClick:function e(){if(!confirm("Are you sure?"))return;v.forEach(function(e){if(~t.linkedSnippets.indexOf(e)){var n=r.lessons.find(function(t){return t.meta.link==e});delete n.meta.link}});var a=[];f.forEach(function(e){if(!v.has(e.id))a.push(e)});r.meta.snippets=a;t.refreshSnippets(t.props,a);t.setState({page:Math.min(m,Math.ceil(a.length/n)-1),selected:new Set,dirty:true})}},"Delete Selected ",l.default.createElement("small",{style:{display:"inline-block",width:20}},"(",v.size,")")),l.default.createElement("button",{className:"btn btn-primary",onClick:function e(){return t.setState({add_mode:true})}},"Add snippets"),!u&&!this.props.onSelect&&l.default.createElement("button",{className:"btn btn-success",onClick:function e(){return approuter.hide_modal("text-snippets-modal")}},"Save and Close"),this.props.onSelect&&l.default.createElement("button",{className:"btn btn-success",disabled:!v.size,onClick:function e(){var n=f.filter(function(e){return v.has(e.id)});t.props.onSelect(n)}},"Apply Selected",l.default.createElement("small",{style:{display:"inline-block",width:20}},"(",v.size,")"))))}}]);return t}(l.default.Component);var se=function(e){P(t,e);function t(e){T(this,t);var n=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={section_insert_index:e.section.lessons.length+(e.section.header?1:0),dynamic_lesson_template:{type:"progressive",glossary:"lowercase"}};if(n.props.lesson){n.state.lesson=JSON.parse(JSON.stringify(e.lesson));if(n.state.lesson.typing&&n.state.lesson.typing.is_dynamic){try{n.state.dynamic_lesson_template=JSON.parse(n.state.lesson.typing.text5)}catch(e){}}}else n.newLesson();n.state.needed_keys=(0,p.compute_needed_keys)(n.state.lesson,e.section,e.index_in_section);return n}a(t,[{key:"newLesson",value:function e(){this.state.lesson={description:"",key:"",name:"",objective_completion:false,score:2e3,meta:{},instruction:null,slug:null};this.setLessonType(E.LESSON_TYPING)}},{key:"regenerate",value:function e(){var t=this.props,n=t.section,a=t.index_in_section;var r=this.props.index_in_section;var o=[];while(r>0&&o.length<4){r--;var i=n.lessons[r];if(i.typing&&i.typing.render_engine==E.TYPING_TEXT&&i.meta.type!="review")o.push(i.typing.text1)}var l=this.state.lesson;if(!l.meta.size)l.meta.size=this.state.recm_size;if(!l.meta.type)l.meta.type="practice";(0,p.regenerate_lesson_text)(l,this.state.needed_keys,this.setLessonText.bind(this),o.join(" "))}},{key:"setLessonText",value:function e(t){this.state.lesson.typing.text1=t;this.forceUpdate()}},{key:"setLessonType",value:function e(t){this.state.lesson.lesson_type=t;if(t==E.LESSON_TYPING){this.state.lesson.typing=this.state.lesson.typing||{disable_backspace:false,font_size:2,goal_wpm:10,max_secs:600,min_accuracy:80,min_wpm:3,on_error:1,render_engine:E.TYPING_TEXT,show_live_extras:true,show_live_stats:true,text1:"",text2:"",text3:"",text4:"",text5:""}}else if(t==E.LESSON_VIDEO){this.state.lesson.video=this.state.lesson.video||{auto_start:true,can_skip:false,show_subtitles:false,start_muted:false,video_catalog_vimeo_uri:""}}}},{key:"setRenderEngine",value:function e(t){var n=this.state.lesson;n.typing.render_engine=t;if(t==E.TYPING_GAME_BALLOON_VALLEY)n.meta.type="game1";else if(t==E.TYPING_GAME_MONSTER_ATTACK)n.meta.type="game2";else if(t==E.TYPING_GAME_TEMPLE_BASH)n.meta.type="game3";else n.meta.type="practice";this.setState({needed_keys:(0,p.compute_needed_keys)(n,this.props.section,this.props.index_in_section)})}},{key:"insertBefore",value:function e(){this.newLesson();this.setState({section_insert_index:this.props.index_in_section+(this.props.section.header?1:0)})}},{key:"render",value:function e(){var t=this;var n=this.props,a=n.onGenerate,r=n.onDelete,o=n.onSaveLesson,i=n.section,s=n.index_in_section,c=n.program;var f=this.state,m=f.lesson,h=f.dynamic_lesson_template;var v=function e(t){return t.instruction&&t.instruction.inst&&t.instruction.inst.length};var g;if(m.meta.link)g=c.meta.snippets.find(function(e){return e.id==m.meta.link});return l.default.createElement("div",{style:{minHeight:590,minWidth:640}},l.default.createElement("h3",{style:{margin:0}},(m.id?"Edit":"Add")+" Lesson #"+(i.lesson_index+(s||0)),m.id&&l.default.createElement("button",{className:"btn btn-link",onClick:this.insertBefore.bind(this)},"Insert Before"),m.id&&l.default.createElement("button",{className:"btn btn-link",onClick:function e(){approuter.hide_modal("lesson-modal");j(l.default.createElement(q,{section:i,onGenerate:a,learned:(0,p.compute_learned_keys)(i,s),index_in_section:s+1}))}},"Add New Key Combo Before")),l.default.createElement("hr",null),l.default.createElement("div",null,l.default.createElement("div",{className:"row"},l.default.createElement("dl",{className:"dl-horizontal col-md-6"},l.default.createElement("dt",{style:{width:90}},"Type"),l.default.createElement("dd",{style:{marginLeft:110}},m.id?E.LESSON_TYPES[m.lesson_type]:l.default.createElement("select",{className:"form-control",style:{width:"inherit"},value:m.lesson_type,onChange:function e(n){t.setLessonType(parseInt(n.target.value));t.forceUpdate()}},Object.keys(E.LESSON_TYPES).map(function(e){return l.default.createElement("option",{key:e,value:e},E.LESSON_TYPES[e])}))),l.default.createElement("dt",{style:{width:90}},"Name"),l.default.createElement("dd",{style:{marginLeft:110}},l.default.createElement("input",{className:"form-control",value:m.name||"",onChange:function e(n){m.name=n.target.value;t.forceUpdate()}})),m.lesson_type!=E.LESSON_HEADER&&l.default.createElement("div",null,l.default.createElement("dt",{style:{width:90}},"Icon"),l.default.createElement("dd",{style:{marginLeft:110}},l.default.createElement("input",{className:"form-control",value:m.key||"",onChange:function e(n){m.key=n.target.value;t.forceUpdate()}})),l.default.createElement("dt",{style:{width:90}},"Score"),l.default.createElement("dd",{style:{marginLeft:110}},l.default.createElement("input",{className:"form-control",value:m.score||"",onChange:function e(n){var a=parseInt(n.target.value);if(isNaN(a))a=0;m.score=a;t.forceUpdate()}})))),m.lesson_type!=E.LESSON_HEADER&&l.default.createElement("dl",{className:"dl-horizontal col-md-6"},l.default.createElement("dt",null,"Skip Result Page"),l.default.createElement("dd",null,l.default.createElement("input",{type:"checkbox",checked:m.objective_completion,onChange:function e(n){m.objective_completion=n.target.checked;t.forceUpdate()}})),l.default.createElement("dt",null,"Instructions"),l.default.createElement("dd",null,l.default.createElement("button",{className:"btn btn-xs"+(v(m)?" btn-primary":" btn-default"),onClick:function e(){return approuter.show_modal(l.default.createElement(u.default,{id:"instruction-editor"},l.default.createElement("h5",null,"Please respect the json format when editing these instructions:"),l.default.createElement("textarea",{id:"instructions-textarea",style:{display:"block",width:"75vw",height:"60vh",marginBottom:15},defaultValue:JSON.stringify(m.instruction||{},null,2)}),l.default.createElement("button",{style:{float:"right"},className:"btn btn-primary",onClick:function e(){m.instruction=JSON.parse((0,d.default)("#instructions-textarea").val());approuter.hide_modal("instruction-editor")}},"Save")))}},v(m)?"Edit":"Add")),m.typing&&l.default.createElement("dt",null,"VoiceOver Words"),m.typing&&l.default.createElement("dd",null,l.default.createElement("input",{type:"checkbox",checked:m.typing.voiceover_words==null||m.typing.voiceover_words,onChange:function e(n){m.typing.voiceover_words=n.target.checked;t.forceUpdate()}})),m.meta.type=="keys"&&l.default.createElement("dt",null,"New Keys"),(m.meta.type=="keys"||m.meta.type=="review")&&l.default.createElement("dd",null,m.meta.keys.map(function(e,n){return l.default.createElement("input",{key:n,style:{width:40,marginRight:15,display:"inline-block"},className:"form-control",maxLength:1,value:e,onChange:function e(a){m.meta.keys[n]=a.target.value;t.forceUpdate()}})})),m.typing&&l.default.createElement("dt",null,"Is dynamic"),m.typing&&l.default.createElement("dd",null,l.default.createElement("input",{type:"checkbox",checked:m.typing.is_dynamic||false,onChange:function e(n){m.typing.is_dynamic=n.target.checked;t.forceUpdate()}})))),m.lesson_type==E.LESSON_VIDEO&&l.default.createElement("dl",{className:"dl-horizontal"},l.default.createElement("dt",{style:{width:90}},"Video URI"),l.default.createElement("dd",{style:{marginLeft:110}},l.default.createElement("input",{className:"form-control",value:m.video.video_catalog_vimeo_uri,onChange:function e(n){m.video.video_catalog_vimeo_uri=n.target.value;t.forceUpdate()}}))),l.default.createElement("hr",{style:{marginTop:0}}),m.lesson_type==E.LESSON_TYPING&&l.default.createElement("div",null,l.default.createElement("table",{className:"one-line-input-table"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("dl",null,l.default.createElement("dt",null,"Engine"),l.default.createElement("dd",null,m.meta.keys?E.RENDER_ENGINES[m.typing.render_engine]+" ("+m.meta.type+")":l.default.createElement("select",{className:"form-control",style:{width:"inherit"},value:m.typing.render_engine,onChange:function e(n){t.setRenderEngine(parseInt(n.target.value));t.forceUpdate()}},Object.keys(E.RENDER_ENGINES).map(function(e){return l.default.createElement("option",{key:e,value:e},E.RENDER_ENGINES[e])}))))),l.default.createElement("td",null,l.default.createElement("dl",null,l.default.createElement("dt",null,"Min WPM"),l.default.createElement("dd",null,l.default.createElement("input",{className:"form-control",style:{width:60},value:m.typing.min_wpm,onChange:function e(n){var a=parseInt(n.target.value);if(isNaN(a))a=0;m.typing.min_wpm=a;t.forceUpdate()}})))),l.default.createElement("td",null,l.default.createElement("dl",null,l.default.createElement("dt",null,"Goal WPM"),l.default.createElement("dd",null,l.default.createElement("input",{className:"form-control",style:{width:60},value:m.typing.goal_wpm,onChange:function e(n){var a=parseInt(n.target.value);if(isNaN(a))a=0;m.typing.goal_wpm=a;t.forceUpdate()}}))))))),m.typing.is_dynamic?l.default.createElement("dl",{className:"dl-horizontal",style:{width:"calc(90vw - 90px)",height:200,marginTop:25}},l.default.createElement("dt",{className:"dl-horizontal"},"Template"),l.default.createElement("dd",null,l.default.createElement("select",{className:"form-control",style:{width:"inherit"},value:h.type,onChange:function e(n){h.type=n.target.value;t.forceUpdate()}},l.default.createElement("option",{value:"progressive"},"From Duals to Trigrams and Words"),l.default.createElement("option",{value:"duals"},"Duals and Words"),l.default.createElement("option",{value:"words"},"Words Only"))),l.default.createElement("dt",{className:"dl-horizontal"},"Glossary"),l.default.createElement("dd",null,l.default.createElement("select",{className:"form-control",style:{width:"inherit"},value:h.glossary,onChange:function e(n){h.glossary=n.target.value;t.forceUpdate()}},l.default.createElement("option",{value:"lowercase"},"Lowercase letters only")))):l.default.createElement(de,{needed:this.state.needed_keys,lesson:m,text:m.typing.text1,onChange:this.setLessonText.bind(this),onSkipWarnings:function e(n){if(n)m.meta.skip_warnings=true;else delete m.meta.skip_warnings;var a={action:n?"skip_check":"check_text"};d.default.post("/sportal/lpeditor/lesson/"+m.id+"/post_review",a,function(){t.forceUpdate()}).fail(function(e){t.show_error(l.default.createElement("p",null,"Server response: ",l.default.createElement("b",null,e.statusText)))})}})),l.default.createElement("div",{style:{height:40}},m.lesson_type==E.LESSON_TYPING&&!m.meta.text&&!g&&l.default.createElement("button",{className:"btn btn-primary",onClick:this.regenerate.bind(this)},"Generate Text"),m.id?l.default.createElement("button",{className:"btn btn-danger",style:{marginLeft:10},onClick:function e(){return r(m)}},"Delete"):null,m.lesson_type==E.LESSON_TYPING&&(m.meta.type=="practice"||!m.id)&&l.default.createElement("span",null,g&&l.default.createElement("i",{className:"badge",style:{paddingTop:3,lineHeight:1.2,marginLeft:10,background:"#28a745"}},"Linked"),g&&m.typing.text1!=g.content&&l.default.createElement("button",{className:"btn btn-link",onClick:function e(){delete m.meta.link;t.forceUpdate()}},"Remove Snippet Link"),l.default.createElement("button",{className:"btn btn-link",onClick:function e(){return z(l.default.createElement(le,{onDone:function e(n){if(n){m.meta.link=n.id;m.name=n.title;m.typing.text1=n.content}B();t.forceUpdate()},program:c,lesson:m,needed:t.state.needed_keys}))}},"Link with a Snippet")),l.default.createElement("button",{className:"btn btn-primary pull-right",onClick:function e(){if(m.typing){if(m.typing.is_dynamic)m.typing.text5=JSON.stringify(h);else m.typing.text5=""}o(t.state.lesson,t.props.section,t.state.section_insert_index)}},"Apply"),l.default.createElement("button",{className:"btn btn-link pull-right",onClick:Y,style:{outline:"none"}},"Cancel"))))}}]);return t}(l.default.Component);function ue(e){var t=e.meta;var n;if(["keys","space","review"].indexOf(t.type)>=0){n=t.size||t.pattern&&t.pattern.length}if(!n){var a=e.typing.goal_wpm;n=Math.round(a*10);if(n>300)n=300}return n}function ce(e,t,n,a){var r=["keys","game1","game3"].indexOf(e.meta.type)==-1&&e.typing.render_engine!=E.TYPING_GAME_BALLOON_VALLEY&&e.typing.render_engine!=E.TYPING_GAME_TEMPLE_BASH;var o;if(!r){o=/\s/g;if(o.test(t))return[o.lastIndex-1,"no white space allowed"]}o=/  /g;if(o.test(t))return[o.lastIndex-1,"double space found"];o=/ \n/g;if(o.test(t))return[o.lastIndex-1,"space before new line found"];for(var i in t){var l=t[i];if(/\S/.test(l)&&n.length&&n.indexOf(l)==-1){return[i,"character "+l+" not suitable for this lesson"]}}if(e.typing.render_engine==E.TYPING_GAME_MONSTER_ATTACK||e.typing.render_engine==E.TYPING_GAME_APPLE_THIEVES||e.typing.render_engine==E.TYPING_GAME_FLOATING_BUBBLES){o=/[\.,;\!\?]/g;if(o.test(t))return[o.lastIndex-1,"no punctuation in word games"];o=/\s[^\s]{1,3}\s/g;if(o.test(" "+t+" "))return[o.lastIndex-1,"no words less than 4 characters"]}if(["practice","game"].indexOf(e.meta.type)==-1)return;o=/\s[\.,;\!\?]/g;if(o.test(t))return[o.lastIndex-1,"extra space found before punctuation"];if(!a)a=ue(e);if(t.length>a*1.25)return[-1,"text is much longer than the recommended size"];if(t.length<a*.5)return[-1,"text is much shorter than the recommended size"]}var de=function(e){P(t,e);function t(){var e;var n,a,r;T(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++){i[l]=arguments[l]}return r=(n=(a=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a),a.state={warning:null},n),I(a,r)}a(t,[{key:"componentDidMount",value:function e(){var t=this.props,n=t.lesson,a=t.text,r=t.needed;this.checkLesson(n,a,r)}},{key:"componentWillReceiveProps",value:function e(t){var n=t.lesson,a=t.text,r=t.needed;this.checkLesson(n,a,r)}},{key:"checkLesson",value:function e(t,n,a){if(t.meta.skip_warnings)this.setState({warning:null});else this.setState({warning:ce(t,n,a,ue(t))})}},{key:"render",value:function e(){var t=this;var n=this.props,a=n.lesson,r=n.text,o=n.onChange,i=n.needed,s=n.isReview,u=n.onSkipWarnings;var c=ue(a);var d=this.state.warning;var f;if(d){f=l.default.createElement("div",{style:{position:"absolute",lineHeight:1.5,color:"transparent",whiteSpace:"pre-wrap",overflow:"hidden",paddingTop:2,pointerEvents:"none",bottom:0,top:7,left:13,right:13}},r.substr(0,d[0]),l.default.createElement("span",{style:{display:"inline-block",color:"red",verticalAlign:"text-top",lineHeight:1.1,margin:"-4px -5px 0",borderTop:"5px solid red",borderLeft:"5px solid transparent",borderRight:"5px solid transparent"}},r[d[0]]))}var p;if(!s)p=a.meta.skip_warnings?l.default.createElement("button",{onClick:function e(){return u(false)},style:{marginTop:-3,lineHeight:1.2},className:"btn btn-xs btn-primary"},"Check"):d&&l.default.createElement("button",{onClick:function e(){return u(true)},style:{marginTop:-3,lineHeight:1.2},className:"btn btn-xs btn-warning"},"Skip");return l.default.createElement("div",{className:"lesson-textarea"},l.default.createElement("label",null,d&&d[1]," ",p),l.default.createElement("code",null,r.length,"/",c),l.default.createElement("textarea",{className:"form-control",value:r,style:{lineHeight:1.5},onChange:function e(n){var l=n.target.value;t.checkLesson(a,r,i);o(l)},spellCheck:"true"}),f)}}]);return t}(l.default.Component);var fe=function e(t){var n=t.labels;return l.default.createElement("table",null,l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Original Content"),l.default.createElement("th",null,"Translated Content",l.default.createElement("button",{className:"btn btn-xs btn-link pull-right",onClick:function e(t){(0,d.default)(t.target).closest("table").find("textarea").val("");var a=true;var r=false;var o=undefined;try{for(var i=n[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;delete window.PROGRAM_CONTENT[s]}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}}},"Clear All"))),n.map(function(e,t){return l.default.createElement("tr",{key:e,style:{borderBottom:"solid 10px transparent"}},l.default.createElement("td",null,l.default.createElement("code",null,e),l.default.createElement("div",{style:{width:400}},E.CONTENT[e])),l.default.createElement("td",null,l.default.createElement("textarea",{spellCheck:"true",style:{width:400},defaultValue:window.PROGRAM_CONTENT[e]||"",onChange:function a(r){var o=r.target.value;if(!o.trim()){r.target.value="";delete window.PROGRAM_CONTENT[e];return}var i=r.target;var l=o.split("\n");if(l.length==1){window.PROGRAM_CONTENT[e]=o.trim();return}for(var s in l){i.focus();var u=l[s].trim();if(!u)break;i.value=u;window.PROGRAM_CONTENT[n[t+parseInt(s)]]=u;i=(0,d.default)(i).closest("tr").next().find("textarea")[0];if(!i)break}}})))})))};e.exports={renderLPGEN:function e(t,n,a){approuter.root=(0,d.default)(t);o.default.render(l.default.createElement(R,{style:"LPGEN",darkBody:true},l.default.createElement(A,{teamprogram:n,is_author:a})),approuter.root[0])},renderCompareProgramsView:function e(t,n,a){o.default.render(l.default.createElement(v.default,{lessons:n,changes:a}),(0,d.default)(t)[0])}}},77:function(e,t,n){var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(8);var o=b(r);var i=n(306);var l=b(i);var s=n(1);var u=b(s);var c=n(21);var d=b(c);var f=n(17);var p=b(f);var m=n(265);var h=b(m);var v=n(20);var g=n(27);var y=b(g);var _=n(149);function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var x=false;var N=function(e){k(t,e);function t(e){w(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onResize=function(){if(n.props.hasSize)n.setState({size:{width:n.window.width(),height:n.window.height()}})};n.onTouchMove=function(e){if(n.props.noTouch){e.preventDefault()}};n.throttledOnResize=(0,l.default)(function(){return n.onResize()},500);n.window=(0,o.default)(window);n.body=(0,o.default)(document.body);n.state={is_loading:false,size:null,modals:[]};if(n.props.hasSize){n.state.size={width:n.window.width(),height:n.window.height()}}if(d.default.modals){n.state.modals=d.default.modals}return n}a(t,[{key:"isLoading",value:function e(){return this.state.is_loading}},{key:"render",value:function e(){var t=this;if(this.isLoading()){return u.default.createElement("div",{id:"root"},u.default.createElement("div",{className:"boxLoading boxLoading-dark"}))}var n=this.state.modals.map(function(e,t){return u.default.createElement(_.CSSTransition,{key:t,classNames:"edmodal",timeout:{enter:600,exit:0}},u.default.createElement("div",{key:e.props.id},e))});return u.default.createElement(v.I18nextProvider,{i18n:d.default.profile.i18n},u.default.createElement("div",{id:"root"},u.default.createElement("div",{style:{position:"fixed",zIndex:1100}},u.default.createElement(_.TransitionGroup,null,n)),this.props.header?u.default.createElement(h.default,null):null,this.props.hasSize?u.default.Children.map(this.props.children,function(e){return u.default.cloneElement(e,{window_width:t.state.size.width,window_height:t.state.size.height})}):this.props.children))}},{key:"updateEnvironment",value:function e(t,n){if(x)console.log("page_container: updateEnvironment",t,n);if(n){if(n.styles){var a=true;var r=false;var o=undefined;try{for(var i=n.styles[Symbol.iterator](),l;!(a=(l=i.next()).done);a=true){var s=l.value;d.default.root.removeClass(s)}}catch(e){r=true;o=e}finally{try{if(!a&&i.return){i.return()}}finally{if(r){throw o}}}}else if(n.style){d.default.root.removeClass(n.style)}if(n.rootId){d.default.root.removeAttr("id")}if(n.scroll==false){this.body.removeClass("noscroll-body")}if(n.darkBody){this.body.removeClass("dark-body")}if(n.darkerBody){this.body.removeClass("darker-body")}if(n.cloudBody){this.body.removeClass("tpc-cloud-body")}if(n.skyBody){this.body.removeClass("sky-body")}if(n.title){document.title="EdClub"}}if(t){if(t.styles){var u=true;var c=false;var f=undefined;try{for(var p=t.styles[Symbol.iterator](),m;!(u=(m=p.next()).done);u=true){var h=m.value;d.default.root.addClass(h)}}catch(e){c=true;f=e}finally{try{if(!u&&p.return){p.return()}}finally{if(c){throw f}}}}else if(t.style){d.default.root.addClass(t.style)}if(t.rootId){d.default.root.attr("id",t.rootId)}if(t.scroll==false){this.body.addClass("noscroll-body")}if(t.darkBody){this.body.addClass("dark-body")}if(t.darkerBody){this.body.addClass("darker-body")}if(t.cloudBody){this.body.addClass("tpc-cloud-body")}if(t.skyBody){this.body.addClass("sky-body")}if(t.title){document.title=t.title+" - EdClub"}}}},{key:"componentWillReceiveProps",value:function e(t){this.setState({is_loading:false})}},{key:"componentWillMount",value:function e(){this.updateEnvironment(this.props)}},{key:"componentDidMount",value:function e(){var t=this;var n=d.default.events.group();n.on("transition",function(){return t.setState({is_loading:true})});n.on("show_modal",function(){return t.setState({modals:d.default.modals})});n.on("hide_modal",function(){return t.setState({modals:d.default.modals})});this._events=n;window.addEventListener("resize",this.throttledOnResize);window.addEventListener("touchmove",this.onTouchMove);if(this.props.onMount)this.props.onMount()}},{key:"componentWillUpdate",value:function e(t,n){if(x)console.log("page_container: componentWillUpdate",t,n);this.updateEnvironment(t,this.props)}},{key:"componentWillUnmount",value:function e(){if(x)console.log("page_container: componentWillUnmount");this.updateEnvironment(null,this.props);this._events.unbindAll();window.removeEventListener("resize",this.throttledOnResize);window.removeEventListener("touchmove",this.onTouchMove)}}]);return t}(u.default.Component);N.defaultProps={header:true,scroll:true,darkBody:false,darkerBody:false,onMount:null,hasSize:false,noTouch:false,style:null,title:null};e.exports=N},96:function(e,t,n){var a,r,o;var i=function(){var e=m(regeneratorRuntime.mark(function e(t,n,a){var r,o,i,l,s,u,c;return regeneratorRuntime.wrap(function e(d){while(1){switch(d.prev=d.next){case 0:l=function e(t){if(t.keyCode==27)i();window.removeEventListener("keydown",e)};i=function e(){r.remove();$(n).remove()};r=$('<div id="try_lesson_disabled_header">').css({position:"absolute",top:50,left:50,right:50,textAlign:"right",lineHeight:.4,paddingBottom:20,background:"rgba(0,0,0,0.2)",zIndex:1e4,fontSize:75,color:"black"}).prependTo("body");o=$("<span>").css({cursor:"pointer"}).html("&times;").prependTo("#try_lesson_disabled_header");o.click(i);window.addEventListener("keydown",l);n.contentWindow.addEventListener("keydown",l);t=t.toJSON();s=Object.assign({},k);s.demo=true;u=b[t.lesson_type];s.lesson_type=u;if(u=="typing"){s.typing=Object.assign({},k.typing);Object.assign(s.typing,t.typing);s.typing.render_engine=g[t.typing.render_engine];s.typing.text=t.typing.text1;if(s.typing.render_engine=="logographic")s.typing.text=JSON.parse(s.typing.text);s.typing.format=t.typing.format;s.name=t.name;s.typing.app=y[t.typing.render_engine]}else if(u=="video"){s.video={app:"student.videoplayer",auto_start:t.video.auto_start,can_skip:t.video.can_skip,file_uri:"",id:0,resource_uri:"",show_subtitles:false,start_muted:false,vimeo_id:parseInt(t.video.video_catalog_vimeo_uri.split("/")[2])};delete s.typing}else if(u=="video typing"){s.name=t.name;c=t.videotyping;s.videotyping={app:"typing.videotyping_app",height:c.height,width:c.width,left:c.left,top:c.top,text:c.text,soundtrack:"https://vid.typingclub.com/"+c.soundtrack,url:a.filter(function(e){return e.vimeo_uri==c.video_catalog_vimeo_uri})[0].file_uri};delete s.typing}if(!AUTHORING_ACCESS){approuter.apply_env_message(n.contentWindow,s,{profile:E,program:{resource_uri:"bogus"}})}else{n.contentWindow.document.getElementsByClassName("back-to-editor-snippet")[0].style.display="none"}case 14:case"end":return d.stop()}}},e,this)}));return function t(n,a,r){return e.apply(this,arguments)}}();var l=n(5);var s=p(l);var u=n(17);var c=p(u);var d=n(180);var f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o);var l=i.value}catch(e){n(e);return}if(i.done){e(l)}else{return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)})}}return a("next")})}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}window.ReactDOM=s.default;var v={TYPING_TEXT:1,TYPING_BOXES:2,TYPING_RIGHT_ANCHOR:3,TYPING_LEFT_ANCHOR:4,TYPING_CODE:5,TYPING_LOGOGRAPHIC:6,TYPING_GAME_BALLOON_VALLEY:1001,TYPING_GAME_MONSTER_ATTACK:1002,TYPING_GAME_TEMPLE_BASH:1003,TYPING_GAME_FLOATING_BUBBLES:1004,TYPING_GAME_APPLE_THIEVES:1005};var g=(a={},h(a,v.TYPING_TEXT,"normal"),h(a,v.TYPING_BOXES,"boxed"),h(a,v.TYPING_RIGHT_ANCHOR,"right-anchor"),h(a,v.TYPING_LEFT_ANCHOR,"left-anchor"),h(a,v.TYPING_CODE,"code"),h(a,v.TYPING_LOGOGRAPHIC,"logographic"),h(a,v.TYPING_GAME_BALLOON_VALLEY,"balloon-valley"),h(a,v.TYPING_GAME_MONSTER_ATTACK,"monster-attack"),h(a,v.TYPING_GAME_TEMPLE_BASH,"temple-bash"),h(a,v.TYPING_GAME_FLOATING_BUBBLES,"floating-bubbles"),h(a,v.TYPING_GAME_APPLE_THIEVES,"apple-thieves"),a);var y=(r={},h(r,v.TYPING_TEXT,"typing.classic_typing_app"),h(r,v.TYPING_BOXES,"typing.classic_typing_app"),h(r,v.TYPING_RIGHT_ANCHOR,"typing.classic_typing_app"),h(r,v.TYPING_LEFT_ANCHOR,"typing.classic_typing_app"),h(r,v.TYPING_CODE,"typing.classic_typing_app"),h(r,v.TYPING_LOGOGRAPHIC,"typing.classic_typing_app"),h(r,v.TYPING_GAME_BALLOON_VALLEY,"typing.games.BalloonValley"),h(r,v.TYPING_GAME_MONSTER_ATTACK,"typing.games.MonsterAttack"),h(r,v.TYPING_GAME_TEMPLE_BASH,"typing.games.TempleBash"),h(r,v.TYPING_GAME_FLOATING_BUBBLES,"typing.games.FloatingBubbles"),h(r,v.TYPING_GAME_APPLE_THIEVES,"typing.games.AppleThieves"),r);var _={LESSON_TYPING:0,LESSON_HEADER:1,LESSON_INSTRUCTIONS:2,LESSON_VIDEO:3,LESSON_VIDEO_TYPING:4};var b=(o={},h(o,_.LESSON_TYPING,"typing"),h(o,_.LESSON_HEADER,"header"),h(o,_.LESSON_INSTRUCTIONS,"instructions"),h(o,_.LESSON_VIDEO,"video"),h(o,_.LESSON_VIDEO_TYPING,"video typing"),o);function w(e,t,n){var a=AUTHORING_ACCESS?"/sportal/program-"+t+"/"+e.get("id")+".play":"/portal/blank_index/";var r=jQuery('<iframe src="'+a+'"></iframe>');r.css({position:"fixed",zIndex:"1000",top:"50px",height:"calc(100% - 100px)",left:"50px",right:"100px",width:"calc(100% - 100px)",boxShadow:"0 0 100px #444",border:"0px"});r.appendTo("body");var o=r.get(0);window.iframe=o;o.contentWindow.addEventListener("load",function(){i(e,o,n)})}var E={font_face:"Droid Sans Mono",font_size:"med",force_custom_player:false,is_basic:false,joinable_tests:[],keyboard:"en,us",keyboard_layout:0,keyboard_sfx:true,language:"en",fname:"",lname:"",prevent_mistakes:false,school_name:"",show_hand:true,show_keyboard:true,show_live_extras:true,show_live_stats:true,timezone:"",use_hand:null,voice_name:"Alex",voicefx:"OFF",fakeprofile:true,teamprograms:[{teamsettings:{}}]};var k={app:"lesson",authoring_meta:"",canonical_url:"",created:"",description:"",id:0,index:0,instruction:null,is_hidden:false,is_locked:false,is_test:false,key:"",lesson_index:1,lesson_plan_url:"",lesson_type:"typing",name:"",next_lesson_url:"",objective_completion:false,program:"bogus",push_result_url:"",resource_uri:"",score:0,slug:null,src_lesson_id:0,team_id:0,title:"",typing:{app:"",deletable:true,disable_backspace:false,font_size:"med",goal_wpm:1,id:1,max_secs:1e3,min_accuracy:1,min_wpm:1,on_error:"continue",render_engine:"normal",resource_uri:"",show_ads:false,show_hand:false,show_keyboard:false,show_live_extras:true,show_live_stats:true,text:"",voiceover_words:true},video:null,videotyping:null};e.exports={try_lesson:w,RENDER_ENGINE:v}}},[[472,2,0]],[0,5,1,4,7,9]]);
//# sourceMappingURL=student.5c270de1e1.min.js.map